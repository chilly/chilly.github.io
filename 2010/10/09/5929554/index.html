<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.ico">
  <link rel="mask-icon" href="/icon.svg" color="#222">
  <meta name="google-site-verification" content="hcdiytqUGPoTW0eAaN6TWAmRfiv7IWFIIc9DKNr7Eno">
  <meta name="yandex-verification" content="eb8f01295fdccb3d">
  <meta name="baidu-site-verification" content="QoJxa8tZnO">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Times+New+Roman:300,300italic,400,400italic,700,700italic%7CRaleway:300,300italic,400,400italic,700,700italic%7COswald:300,300italic,400,400italic,700,700italic%7CWork+Sans:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chillyc.info","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.18.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":20,"unescape":false,"preload":false}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/config.min.js"></script>

    <meta name="description" content="引用地址： [ http:&#x2F;&#x2F;free.yes81.net&#x2F;yes81&#x2F;view-1179.html ](http:&#x2F;&#x2F;free.yes81.net&#x2F;yes81&#x2F;view-1179.html)  crontab  命令 功能是在一定的时间间隔调度一些命令的执行。在  &#x2F;etc  目录下有一个  crontab 文件，这里存放有系统运行的一些调度程序。每个用户可以建立自己的调度  crontab">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux Crontab and at 命令">
<meta property="og:url" content="http://chillyc.info/2010/10/09/5929554/">
<meta property="og:site_name" content="帐前卒专栏">
<meta property="og:description" content="引用地址： [ http:&#x2F;&#x2F;free.yes81.net&#x2F;yes81&#x2F;view-1179.html ](http:&#x2F;&#x2F;free.yes81.net&#x2F;yes81&#x2F;view-1179.html)  crontab  命令 功能是在一定的时间间隔调度一些命令的执行。在  &#x2F;etc  目录下有一个  crontab 文件，这里存放有系统运行的一些调度程序。每个用户可以建立自己的调度  crontab">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2010-10-09T06:32:00.000Z">
<meta property="article:modified_time" content="2023-10-05T04:41:46.063Z">
<meta property="article:author" content="帐前卒">
<meta property="article:tag" content="工作">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="任务调度">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://chillyc.info/2010/10/09/5929554/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://chillyc.info/2010/10/09/5929554/","path":"2010/10/09/5929554/","title":"Linux Crontab and at 命令"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Linux Crontab and at 命令 | 帐前卒专栏</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/rss2.xml" title="帐前卒专栏" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <!-- Global site tag (gtag.js) - Google Analytics start -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11621532-3"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6565392687771630"
     crossorigin="anonymous"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-11621532-3');
</script>
 <!-- Global site tag (gtag.js) - Google Analytics end -->
  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">帐前卒专栏</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-feeds"><a href="/rss2.xml" rel="section"><i class="fa fa-feed fa-fw"></i>feeds</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E5%9C%B0%E5%9D%80-httpfreeyes81netyes81view-1179html"><span class="nav-number">1.</span> <span class="nav-text"> 引用地址： [ http:&#x2F;&#x2F;free.yes81.net&#x2F;yes81&#x2F;view-1179.html</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#crontab-%E5%91%BD%E4%BB%A4"><span class="nav-number">2.</span> <span class="nav-text"> crontab  命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#run-parts"><span class="nav-number"></span> <span class="nav-text"> run-parts</span></a></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="帐前卒"
      src="/icon.svg">
  <p class="site-author-name" itemprop="name">帐前卒</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">795</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">755</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoaWxseQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chilly"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9jY3R0XzE=" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cctt_1"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8="><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/big/by_nc_nd.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/10/09/5929554/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Linux Crontab and at 命令 | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux Crontab and at 命令
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-10-09 14:32:00" itemprop="dateCreated datePublished" datetime="2010-10-09T14:32:00+08:00">2010-10-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>5.6k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>5 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h3 id="引用地址-httpfreeyes81netyes81view-1179html"><a class="markdownIt-Anchor" href="#引用地址-httpfreeyes81netyes81view-1179html"></a> 引用地址： [ <span class="exturl" data-url="aHR0cDovL2ZyZWUueWVzODEubmV0L3llczgxL3ZpZXctMTE3OS5odG1s">http://free.yes81.net/yes81/view-1179.html<i class="fa fa-external-link-alt"></i></span></h3>
<p>](<span class="exturl" data-url="aHR0cDovL2ZyZWUueWVzODEubmV0L3llczgxL3ZpZXctMTE3OS5odG1s">http://free.yes81.net/yes81/view-1179.html<i class="fa fa-external-link-alt"></i></span>)</p>
<h3 id="crontab-命令"><a class="markdownIt-Anchor" href="#crontab-命令"></a> crontab  命令</h3>
<p>功能是在一定的时间间隔调度一些命令的执行。在  /etc  目录下有一个  crontab<br />
文件，这里存放有系统运行的一些调度程序。每个用户可以建立自己的调度  crontab  。<br />
crontab  命令有三种形式的命令行结构：<br />
crontab [-u user] [file]<br />
crontab [-u user] [-e|-l|-r]<br />
crontab -l -u [-e|-l|-r]<br />
第一个命令行中，  file  是命令文件的名字。如果在命令行中指定了这个文件，那么执行  crontab  命令，则将这个文件拷贝到  crontabs<br />
目录下；如果在命令行中没有制定这个文件，  crontab  命令将接受标准输入（键盘）上键入的命令，并将他们也存放在  crontab  目录下。<br />
命令行中  -r  选项的作用是从  /usr/spool/cron/crontabs  目录下删除用户定义的文件  crontab  ；<br />
命令行中  -l  选项的作用是显示用户  crontab  文件的内容。<br />
使用命令  crontab -u user -e  命令编辑用户  user  的  cron©  作业。用户通过编辑文件来增加或修改任何作业请求。<br />
执行命令  crontab -u user -r  即可删除当前用户的所有的  cron  作业。<br />
作业与它们预定的时间储存在文件  /usr/spool/cron/crontabs/username  里。  username<br />
使用户名，在相应的文件中存放着该用户所要运行的命令。命令执行的结果，无论是标准输出还是错误输出，都将以邮件形式发给用户。文件里的每一个请求必须包含以<br />
spaces  和  tabs  分割的六个域。前五个字段可以取整数值，指定何时开始工作，第六个域是字符串，称为命令字段，其中包括了  crontab<br />
调度执行的命令。<br />
第一道第五个字段的整数取值范围及意义是：<br />
0  ～  59  表示分<br />
1  ～  23  表示小时<br />
1  ～  31  表示日<br />
1  ～  12  表示月份<br />
0  ～  6  表示星期（其中  0  表示星期日）<br />
/usr/lib/cron/cron.allow  表示谁能使用  crontab<br />
命令。如果它是一个空文件表明没有一个用户能安排作业。如果这个文件不存在，而有另外一个文件  /usr/lib/cron/cron.deny,<br />
则只有不包括在这个文件中的用户才可以使用  crontab  命令。如果它是一个空文件表明任何用户都可安排作业。两个文件同时存在时  cron.allow<br />
优先，如果都不存在，只有超级用户可以安排作业。<br />
任务调度的  crond  常驻命令<br />
crond  是  linux  用来定期执行程序的命令。当安装完成操作系统之后，默认便会启动此任务调度命令。  crond<br />
命令每分锺会定期检查是否有要执行的工作，如果有要执行的工作便会自动执行该工作。而  linux  任务调度的工作主要分为以下两类：<br />
1  、系统执行的工作：系统周期性所要执行的工作，如备份系统数据、清理缓存<br />
2  、个人执行的工作：某个用户定期要做的工作，例如每隔  10  分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置。<br />
一、任务调度设置文件的写法<br />
其格式如下：<br />
Minute Hour Day Month Dayofweek command<br />
分钟  小时  天  月  天每星期  命令<br />
每个字段代表的含义如下：<br />
Minute  每个小时的第几分钟执行该任务<br />
Hour  每天的第几个小时执行该任务<br />
Day  每月的第几天执行该任务<br />
Month  每年的第几个月执行该任务<br />
DayOfWeek  每周的第几天执行该任务<br />
Command  指定要执行的程序<br />
在这些字段里，除了“  Command  ”是每次都必须指定的字段以外，其它字段皆为可选字段，可视需要决定。对于不指定的字段，要用“  *<br />
”来填补其位置。<br />
举例如下：<br />
1  、指定每小时的第  5  分钟执行一次  ls  命令<br />
5 * * * * ls<br />
2  、指定每天的  5:30  执行  ls  命令<br />
30 5 * * * ls<br />
3  、指定每月  8  号的  7  ：  30  分执行  ls  命令<br />
30 7 8 * * ls<br />
4  、指定每年的  6  月  8  日  5  ：  30  执行  ls  命令<br />
30 5 8 6 * ls<br />
5  、指定每星期日的  6:30  执行  ls  命令<br />
30 6 * * 0 ls<br />
注：  0  表示星期天，  1  表示星期  1  ，以此类推，也可以用英文来表示，  sun  表示星期天，  mon  表示星期一等。<br />
6  、每月  10  号及  20  号的  3  ：  30  执行  ls  命令<br />
30 3 10,20 * * ls<br />
注：“，”用来连接多个不连续的时段<br />
7  、每天  8-11  点的第  25  分钟执行  ls  命令<br />
25 8-11 * * * ls<br />
注：“  -  ”用来连接连续的时段<br />
8  、每  15  分钟执行一次  ls  命令<br />
*/15 * * * * ls<br />
即每个小时的第  0 15 30 45 60  分钟执行  ls  命令<br />
9  、每个月中，每隔  10  天  6:30  执行一次  ls  命令<br />
30 6 */10 * * ls<br />
即每月的  1  、  11  、  21  、  31  日是的  6  ：  30  执行一次  ls  命令。<br />
10  、每天  7  ：  50  以  root  身份执行  /etc/cron.daily  目录中的所有可执行文件<br />
50 7 * * * root run-parts /etc/cron.daily<br />
注：  run-parts  参数表示，执行后面目录中的所有可执行文件。<br />
二、新增调度任务<br />
新增调度任务可用两种方法：<br />
1  、在命令行输入  : crontab -e  然后添加相应的任务，  wq  存盘退出。<br />
2  、直接编辑  /etc/crontab  文件，即  vi /etc/crontab  ，添加相应的任务。<br />
三、查看调度任务<br />
crontab -l //  列出当前的所有调度任务<br />
crontab -l -u jp    //  列出用户  jp  的所有调度任务<br />
四、删除任务调度工作<br />
crontab -r //  删除所有任务调度工作<br />
五、任务调度执行结果的转向<br />
例  1  ：每天  5  ：  30  执行  ls  命令，并把结果输出到  /jp/test  文件中<br />
30 5 * * * ls &gt;/jp/test 2&gt;&amp;1<br />
注：  2&gt;&amp;1  表示执行结果及错误信息。<br />
编辑  /etc/crontab  文件配置  cron<br />
cron  服务每分钟不仅要读一次  /var/spool/cron  内的所有文件，还需要读一次  /etc/crontab,<br />
因此我们配置这个文件也能运用  cron  服务做一些事情。用  crontab  配置是针对某个用户的，而编辑  /etc/crontab<br />
是针对系统的任务。此文件的文件格式是  :<br />
SHELL=/bin/bash<br />
PATH=/sbin:/bin:/usr/sbin:/usr/bin<br />
MAILTO=root //  如果出现错误，或者有数据输出，数据作为邮件发给这个帐号<br />
HOME=/ //  使用者运行的路径  ,  这里是根目录</p>
<h1 id="run-parts"><a class="markdownIt-Anchor" href="#run-parts"></a> run-parts</h1>
<p>01 * * * * root run-parts /etc/cron.hourly //  每小时执行  /etc/cron.hourly  内的脚本<br />
02 4 * * * root run-parts /etc/cron.daily //  每天执行  /etc/cron.daily  内的脚本<br />
22 4 * * 0 root run-parts /etc/cron.weekly //  每星期执行  /etc/cron.weekly  内的脚本<br />
42 4 1 * * root run-parts /etc/cron.monthly //  每月去执行  /etc/cron.monthly  内的脚本<br />
大家注意  “run-parts”  这个参数了，如果去掉这个参数的话，后面就可以写要运行的某个脚本名，而不是文件夹名了</p>
<p>以下转自鸟哥私房菜</p>
<p><span class="exturl" data-url="aHR0cDovL2xpbnV4LnZiaXJkLm9yZy9saW51eF9iYXNpYy8wNDMwY3Jvbi5waHAjYXQ=">http://linux.vbird.org/linux_basic/0430cron.php#at<i class="fa fa-external-link-alt"></i></span><br />
單一工作排程的進行就使用 at 這個指令囉！這個指令的運作非常簡單！將 at 加上一個時間即可！基本的語法如下：</p>
<pre><code>[root@www ~]# at [-mldv] TIME

[root@www ~]# at -c 工作號碼

選項與參數：
-m  ：當 at 的工作完成後，即使沒有輸出訊息，亦以 email 通知使用者該工作已完成。
-l  ：at -l 相當於 atq，列出目前系統上面的所有該使用者的 at 排程；
-d  ：at -d 相當於 atrm ，可以取消一個在 at 排程中的工作；
-v  ：可以使用較明顯的時間格式列出 at 排程中的工作列表；
-c  ：可以列出後面接的該項工作的實際指令內容。

TIME：時間格式，這裡可以定義出『什麼時候要進行 at 這項工作』的時間，格式有：
  HH:MM				ex&gt; 04:00
	在今日的 HH:MM 時刻進行，若該時刻已超過，則明天的 HH:MM 進行此工作。
  HH:MM YYYY-MM-DD		ex&gt; 04:00 2009-03-17
	強制規定在某年某月的某一天的特殊時刻進行該工作！
  HH:MM[am|pm] [Month] [Date]	ex&gt; 04pm March 17
	也是一樣，強制在某年某月某日的某時刻進行！
  HH:MM[am|pm] + number [minutes|hours|days|weeks]
	ex&gt; now + 5 minutes	ex&gt; 04pm + 3 days
	就是說，在某個時間點『再加幾個時間後』才進行。
</code></pre>
<p>老實說，這個 at 指令的下達最重要的地方在於『時間』的指定了！鳥哥喜歡使用『 now + … 』<br />
的方式來定義現在過多少時間再進行工作，但有時也需要定義特定的時間點來進行！底下的範例先看看囉！</p>
<pre><code>範例一：再過五分鐘後，將 /root/.bashrc 寄給 root 自己

[root@www ~]# at now + 5 minutes
  &lt;==記得單位要加 s 喔！

at&gt; /bin/mail root -s &quot;testing at job&quot; &lt; /root/.bashrc

at&gt; &lt;EOT&gt;   &lt;==這裡輸入 [ctrl] + d 就會出現 &lt;EOF&gt; 的字樣！代表結束！

job 4 at 2009-03-14 15:38
# 上面這行資訊在說明，第 4 個 at 工作將在 2009/03/14 的 15:38 進行！
# 而執行 at 會進入所謂的 at shell 環境，讓你下達多重指令等待運作！
範例二：將上述的第 4 項工作內容列出來查閱

[root@www ~]# at -c 4

#!/bin/sh               &lt;==就是透過 bash shell 的啦！

# atrun uid=0 gid=0
# mail     root 0
umask 22
....(中間省略許多的環境變數項目)....

cd /root || &#123;           &lt;==可以看出，會到下達 at 時的工作目錄去執行指令

         echo 'Execution directory inaccessible' &gt;&amp;2
         exit 1
&#125;

/bin/mail root -s &quot;testing at job&quot; &lt; /root/.bashrc
# 你可以看到指令執行的目錄 (/root)，還有多個環境變數與實際的指令內容啦！
範例三：由於機房預計於 2009/03/18 停電，我想要在 2009/03/17 23:00 關機？

[root@www ~]# at 23:00 2009-03-17

at&gt; /bin/sync

at&gt; /bin/sync

at&gt; /sbin/shutdown -h now

at&gt; &lt;EOT&gt;
job 5 at 2009-03-17 23:00
# 您瞧瞧！ at 還可以在一個工作內輸入多個指令呢！不錯吧！
</code></pre>
<p>事實上，當我們使用 at 時會進入一個 at shell 的環境來讓使用者下達工作指令，此時，  建議你最好使用絕對路徑來下達你的指令，比較不會有問題喔<br />
！由於指令的下達與 PATH 變數有關， 同時與當時的工作目錄也有關連 (如果有牽涉到檔案的話)，因此使用絕對路徑來下達指令，會是比較一勞永逸的方法。<br />
為什麼呢？舉例來說，你在 /tmp 下達『 at now 』然後輸入『 mail root -s “test” &lt; .bashrc 』， 問一下，那個<br />
.bashrc 的檔案會是在哪裡？答案是『 /tmp/.bashrc 』！因為  at 在運作時，會跑到當時下達 at 指令的那個工作目錄  的緣故啊！</p>
<p>有些朋友會希望『我要在某某時刻，在我的終端機顯示出 Hello 的字樣』，然後就在 at 裡面下達這樣的資訊『 echo “Hello”<br />
』。等到時間到了，卻發現沒有任何訊息在螢幕上顯示，這是啥原因啊？  這是因為 at 的執行與終端機環境無關，而所有 standard<br />
output/standard error output 都會傳送到執行者的 mailbox 去  啦！所以在終端機當然看不到任何資訊。那怎辦？沒關係，<br />
可以透過終端機的裝置來處理！假如你在 tty1 登入，則可以使用『 echo “Hello” &gt; /dev/tty1 』來取代。</p>
<p>** Tips: **<br />
要注意的是，如果在 at shell 內的指令並沒有任何的訊息輸出，那麼 at 預設不會發 email 給執行者的。 如果你想要讓 at 無論如何都發一封<br />
email 告知你是否執行了指令，那麼可以使用『 at -m 時間格式 』來下達指令喔！ at 就會傳送一個訊息給執行者，而不論該指令執行有無訊息輸出了！</p>
<p>at 有另外一個很棒的優點，那就是『背景執行』的功能了！什麼是背景執行啊？很難瞭解嗎？其實與 bash 的 nohup ( <a target="_blank" rel="noopener" href="http://linux.vbird.org/linux_basic/0440processcontrol.php#nohup"> 第十七章<br />
</a> ) 類似啦！<br />
鳥哥提我自己的幾個例子來給您聽聽，您就瞭了！</p>
<ul>
<li>
<p>離線繼續工作的任務  ：鳥哥初次接觸 Unix 為的是要跑空氣品質模式， 那是一種大型的程式，這個程式在當時的硬體底下跑，一個案例要跑 3 天！由於鳥哥也要進行其他研究工作，因此常常使用 Windows 98 來連線到 Unix 工作站跑那個 3 天的案例！結果你也該知道， Windows 98 連開三天而不當機的機率是很低的～@_@～ 而當機時，所有在 Windows 上的連線都會中斷！包括鳥哥在跑的那個程式也中斷了～嗚嗚～明明再三個鐘頭就跑完的程式， 由於當機害我又得跑 3 天！</p>
</li>
<li>
<p>另一個常用的時刻則是例如上面的範例三，由於某個突發狀況導致你必須要進行某項工作時，這個 at 就很好用啦！</p>
</li>
</ul>
<p>由於 at 工作排程的使用上，系統會將該項 at 工作獨立出你的 bash 環境中， 直接交給系統的 atd 程式來接管，因此，當你下達了 at<br />
的工作之後就可以立刻離線了， 剩下的工作就完全交給 Linux 管理即可  ！所以囉，如果有長時間的網路工作時，嘿嘿！ 使用 at<br />
可以讓你免除網路斷線後的困擾喔！ <sup>_</sup></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechat_pay.jpg" alt="帐前卒 WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="帐前卒 Alipay">
        <span>Alipay</span>
      </div>
      <div>
        <img src="/images/paypal.png" alt="帐前卒 PayPal">
        <span>PayPal</span>
      </div>
      <div>
        <img src="/bitcoin.png" alt="帐前卒 Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/cctt_1">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E5%B7%A5%E4%BD%9C/" rel="tag"># 工作</a>
              <a href="/tags/linux/" rel="tag"># linux</a>
              <a href="/tags/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/" rel="tag"># 任务调度</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2010/09/20/5897786/" rel="prev" title="老姐婚礼">
                  <i class="fa fa-angle-left"></i> 老姐婚礼
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2010/10/11/2010-10-11-create-class-size-0/" rel="next" title="How to Create a Class , Which Size Is 0?">
                  How to Create a Class , Which Size Is 0? <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2017 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">帐前卒</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">1.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">24:16</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/next-boot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/bookmark.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/search/local-search.min.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin="anonymous">


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"chilly/blog_comments","issue_term":"url","theme":"github-dark"}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/comments/utterances.min.js"></script>

</body>
</html>

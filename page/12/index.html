<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.ico">
  <link rel="mask-icon" href="/icon.svg" color="#222">
  <meta name="google-site-verification" content="hcdiytqUGPoTW0eAaN6TWAmRfiv7IWFIIc9DKNr7Eno">
  <meta name="yandex-verification" content="eb8f01295fdccb3d">
  <meta name="baidu-site-verification" content="QoJxa8tZnO">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Times+New+Roman:300,300italic,400,400italic,700,700italic%7CRaleway:300,300italic,400,400italic,700,700italic%7COswald:300,300italic,400,400italic,700,700italic%7CWork+Sans:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chillyc.info","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.18.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":20,"unescape":false,"preload":false}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/config.min.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="帐前卒专栏">
<meta property="og:url" content="http://chillyc.info/page/12/">
<meta property="og:site_name" content="帐前卒专栏">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="帐前卒">
<meta property="article:tag" content="有意思的代码，有意思的架构, 有趣的小说, 好看的故事, code, software, articles, novel, architect">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://chillyc.info/page/12/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/12/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>帐前卒专栏 - code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/rss2.xml" title="帐前卒专栏" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <!-- Global site tag (gtag.js) - Google Analytics start -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11621532-3"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6565392687771630"
     crossorigin="anonymous"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-11621532-3');
</script>
 <!-- Global site tag (gtag.js) - Google Analytics end -->
  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">帐前卒专栏</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-feeds"><a href="/rss2.xml" rel="section"><i class="fa fa-feed fa-fw"></i>feeds</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="帐前卒"
      src="/icon.svg">
  <p class="site-author-name" itemprop="name">帐前卒</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">793</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">750</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoaWxseQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chilly"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9jY3R0XzE=" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cctt_1"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8="><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/big/by_nc_nd.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/08/19/5824898/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/08/19/5824898/" class="post-title-link" itemprop="url">快速生成大文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-08-19 20:48:00" itemprop="dateCreated datePublished" datetime="2010-08-19T20:48:00+08:00">2010-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>749</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在linux下如果不考虑断电系统重启等其他原因可以使用ftruncate()函数，这个函数输入参数为file descriptor 和 offset,<br />
这个函数在unistd.h中，windows一般是用不了这个的。</p>
<p>另外使用文件名得到文件描述符的方法就是int fileno(FILE*); 注意之后别忘了fclose(),下面的代码里忘记写了。</p>
<p>#include<iostream> #include<cstdio> #include&lt;unistd.h&gt; using namespace std;<br />
int main(){ FILE* f = fopen(“abc.txt”,“w”); int fd = fileno(f); long long<br />
offset = 1024<em>1024</em>1024*(long long)2; ftruncate(fd,offset); return 0; }</p>
<p>在windows及其他平台可以使用fseeko(FILE* , offset, pos)这个方法</p>
<p>#include<iostream> #include<cstdio> using namespace std; int main(){ FILE* f =<br />
fopen(“abc.txt”,“w”); long long offset=1024<em>1024</em>1024*(long long)2;<br />
fseeko(f,offset,SEEK_SET); int i = 10; // write i to file end<br />
fwrite(&amp;i,sizeof(int),1,f); fclose(f); return 0; }</p>
<p>这样就可以快速得到2G的文件了。另外编译时不要忘记添加编译参数  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64</p>
<p>想看大文件测试的结果到 <a target="_blank" rel="noopener" href="http://blog.csdn.net/cctt_1/archive/2010/05/23/5618652.aspx"> http://blog.csdn.net/cctt_1/archive/2010/05/23/5618652.aspx<br />
</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/08/13/2010-08-13-trickies-bugs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/08/13/2010-08-13-trickies-bugs/" class="post-title-link" itemprop="url">Trickies and Bugs in C</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-08-13 00:00:00" itemprop="dateCreated datePublished" datetime="2010-08-13T00:00:00+08:00">2010-08-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:07:00" itemprop="dateModified" datetime="2023-10-05T23:07:00+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="views" content="542" />
the macro #define is the biggest hidden bug in c. You should always remember macro-function is like code paster. And it will slow down your system in some special situations, such as macro recursion. If you macro define some function use BIG characters.
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#define FUN1(a,b) a*b</span><br><span class="line">#define FUN2(a) a++;\</span><br><span class="line">     a*=a;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">	int a = 2;</span><br><span class="line">	int b = 3;</span><br><span class="line">	FUN1(a,5+1); // =&amp;gt; 2*5+1</span><br><span class="line">        if(a&amp;gt;2)FUN2(a); //=&amp;gt; if(a&amp;gt;2) a++;a*=a;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>strcpy() will copy “\0”, and it is dangerous when you copy two points.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int main()&#123;</span><br><span class="line">	char str1[] = &quot;abcd&quot;;</span><br><span class="line">	char str2[] = &quot;12&quot;;</span><br><span class="line">	strcpy(str1,str2); // ok, str1 equals &quot;12&quot;</span><br><span class="line">	char *st1 = &quot;abcd&quot;;</span><br><span class="line">	char *st2 = &quot;12&quot;;</span><br><span class="line">	strcpy(st1,st2); //crash!! st1 points to static const string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>param as point or array style. Although they are differnt styles, they are the same.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">int size1(char a[])&#123;</span><br><span class="line">	cout &amp;lt;&amp;lt; sizeof(a);</span><br><span class="line">&#125;</span><br><span class="line">int size2(char* a)&#123;</span><br><span class="line">	cout &amp;lt;&amp;lt; sizeof(a);</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">	char a[] = &quot;abcdef&quot;;</span><br><span class="line">	char *b = &quot;abcdef&quot;;</span><br><span class="line">	size1(a); //  =&amp;gt; sizeof(char*)</span><br><span class="line">	size1(b); //  =&amp;gt; sizeof(char*)</span><br><span class="line">	size2(a); //  =&amp;gt; sizeof(char*)</span><br><span class="line">	size2(b);//  =&amp;gt; sizeof(char*)</span><br><span class="line">	cout &amp;lt;&amp;lt; sizeof(a)&amp;lt;&amp;lt;endl; // =&amp;gt;strlen(a)+1</span><br><span class="line">	cout &amp;lt;&amp;lt; sizeof(b)&amp;lt;&amp;lt;endl; // sizeof(char*)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// There are 5 segments in codes, DATA, BSS, TEXT, heap, stack</span><br><span class="line">// DATA stores all globel variables, and those variables are defined.</span><br><span class="line">// BSS stores all globel variables, but those variables are not defined.</span><br><span class="line">// const variables are in TEXT, and codes are in this segment also.</span><br><span class="line">// heap store (malloc, calloc,realloc, new) data</span><br><span class="line">// stack store function params, local variables.</span><br><span class="line"></span><br><span class="line">int a; // a is in BSS</span><br><span class="line">int b = 3; // b is in DATA</span><br><span class="line">int fun(int c)&#123; // c is in stack, when the function is called.</span><br><span class="line">	return 0; </span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">	const int c = 4; // c is in TEXT</span><br><span class="line">	a = 4; // move to DATA</span><br><span class="line">	int x = 4; // in stack</span><br><span class="line">	int * p = malloc(sizeof(int)); // *p is in heap. but p is in stack.</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/22/5755632/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/22/5755632/" class="post-title-link" itemprop="url">Memory Leak 攻略</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-22 16:13:00" itemprop="dateCreated datePublished" datetime="2010-07-22T16:13:00+08:00">2010-07-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>相信几乎每个人都遇到过memory leak的问题。解决方法各不相同。</p>
<p>1。防止内存泄露</p>
<p>例如c<ins>中使用auto_ptr, java中自己的垃圾回收。对于纯java, python的语言编写的东西，memory<br />
leak一般不是啥米的问题，这些语言最严重的问题是内存不足。这些java要处理内存不足就-Xmx1024m或者开更大的内存，或者闲得无聊的时候调调gc.<br />
python的解决方法差不多，不过它可以显式delete. 另外听说python调用django时会有内存分配不足的问题，原因在于django这鬼东西在de<br />
bug＝=true时没有对sql查询进行释放。下面接着过去的话题扯下c</ins>/c这些需要自己care的语言。<br />
c++中有auto_ptr这东东算是可以，因为遵循RAII(resource acquirement is initial 不知道自己英文拼对了没有)， 也<br />
就是说：在类初始化的时候申请资源，在类析构的时候释放资源。另外注意析构函数是virtual的。为啥米呢？因为要多态调用析构父类。如果自己写的类不是那么标准，<br />
喜欢到处申请资源，到处释放资源，还是建议使用auto_ptr这个类，它在<memory>中。其实auto_ptr类似于下面的代码：</p>
<p>template<class T> class simple_auto_ptr{ private: T* point; public: explicit<br />
simple_auto_ptr(T* point):point(point){} virtual ~simple_auto_ptr(){delete<br />
point;} }; 调用代码例如simple_auto_ptr<int> a(new int(3));</p>
<p>这东东的作用在于简化下面的代码：</p>
<p>void foo(){ T* a = new T(); try{ throw something; }catch(something){<br />
if(NULL!=a){ delete a; a=NULL; } } if(NULL != a) delete a; } 使用auto_ptr<br />
将上面的简化为 void foo(){ auto_ptr<T> a(new T()); throw something; }</p>
<p>可以说还是有些用处的…不过不能用于申请数组…除非你想申请auto_ptr的数组。另外传说不能用于容器类。所以为了不让内存泄露，还是需要谨慎小心。</p>
<p>2。监测内存泄露，使用监测内存泄露的小工具</p>
<p>另外有一些监测工具可以帮你检查一部分内存泄露的问题。有些工具其实就是替换了free/malloc/realloc/calloc 或者是<br />
new/delete.采用宏定义就可以轻松做到：</p>
<p>#define new MY_NEW #define MY_NEW my_new</p>
<p>然后就可以截获new/delete的函数调用，至于你想再多做一些事情，就看你宏定义和你函数的具体写法了。然后就如同左右括号匹配一样。当然往往不是那么简单，例<br />
如类中的一些指针有还有一些内存检测是需要你传入指针进去，然后catch指针做些监测工作。</p>
<p>但有些memory leak的问题很难被监测到，或者有时候会被误报。比如某个指针在函数中申请空间并传出，然后在外面进行n次转换，并进行加加见见运算，最后变为<br />
另外一个指针。除非检测工具做了名字的转换，可以进行数学运算，比如int * a = new int[20]; int * c = ++a; delete<br />
[] --c;当然这里只是一个模拟，没有人会这样写代码。但是真正的程序中很有可能代码简化后就是这样的情况。当然进行dynamic_cast的情况更加复杂，还<br />
需要判断析构函数是否是虚函数等问题。</p>
<p>3。断言法</p>
<p>测试程序正确性很难监测出内存泄露的情况。</p>
<p>下面以链表为例：list_insert()时原List比现List少1个元素，list_delete()时,原List比现List多一个元素。</p>
<p>List * l = new List(); size_t old = l-&gt;size(); l-&gt;list_insert(some elements);<br />
size_t new = l-&gt;size(); assert(new-old == 1); old = l-&gt;size();<br />
l-&gt;list_delete(some elements); new = l-&gt;size(); assert(old-new == 1); //<br />
另外必须保证list的size其实和具体的值无关，应该是遍历后的结果</p>
<p>即使这里的size变化是正确的，这也依旧不能保证list_delete()中调用了合适的delete 方法，有可能没有进行delete, 或者进行了节点的d<br />
elete，但是组成链表中的节点的析构函数没有写好，也会造成内存泄露。个人就遇到PG中删除链表函数的问题。原链表长度的确是减小了。但是链表节点的内存的确没有<br />
释放。</p>
<p>4。模拟法</p>
<p>这个方法其实很好用，一般在已经确定可能是某一个大模块的问题，但是不清楚内部可能的路径，也有可能是路径太过复杂。这里就可以模拟一下。化简各种流程，仅仅调用申请<br />
释放资源的几个主要函数。然后逐一排除各个主要函数的可能性。例如那个链表，如果起初的业务流程有许多复杂的链表操作，但是申请释放空间的地方其实就是list_in<br />
sert()和list_delete(),这就可以仅仅是调用几千次list_new(),list_delete()看看情况.内存泄露就会明显显现。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/21/5751498/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/21/5751498/" class="post-title-link" itemprop="url">转载一篇关于Linux 监视进程的文章...</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-21 09:42:00" itemprop="dateCreated datePublished" datetime="2010-07-21T09:42:00+08:00">2010-07-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>408</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><span class="exturl" data-url="aHR0cDovL2xpbnV4LnZiaXJkLm9yZy9saW51eF9iYXNpYy8wNDQwcHJvY2Vzc2NvbnRyb2wucGhw">http://linux.vbird.org/linux_basic/0440processcontrol.php<i class="fa fa-external-link-alt"></i></span></p>
<p>top: failed tty get 错误, 因为top中没有加上-b选项。</p>
<p>free是监视内存的 used, free, swap等东东。</p>
<p>vmstat  是监视硬盘使用情况的。io情况的.包括memory, swap, io,system,cpu等</p>
<p>netstat 监视网络使用情况的，包括socket和协议等，以及传输的字节和接受的字节以及套接字类型stream/DGRAM/RAW</p>
<p>ps aux监视进程用的，一般可以看出占用cpu，memory的百分比和进程的优先级</p>
<p>ps -l 也是监视进程用的，一般看的是此bash下的进程使用cpu和内存的情况</p>
<p>top 这个很有用，用于监视某个进程。包括IO,cpu,内存等。其中的wa很有用，是wait event或者IO的百分比。id是cpu idle的情况。</p>
<p>基本上脚本监视也就用到这几个常用东西了…</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/17/5742476/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/17/5742476/" class="post-title-link" itemprop="url">诸神之战</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-17 20:04:00" itemprop="dateCreated datePublished" datetime="2010-07-17T20:04:00+08:00">2010-07-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>one day somebody’s gonna  have to make a stand.</p>
<p>one day, somebody’s gonna have to say enough.</p>
<p>老渔夫说出这么有哲理的话出来.是抱怨呢?还是just say to his son.<br />
不过一般说这话的人都很难第一个站出来.否则也就不会说这就话了.因为他使用了somebody而不是…I.但是这话本身在这场电影里挺有气势的.</p>
<p>I never understood the gods, but even I don’t question that  you are saved for<br />
some reason. And some day, that reason, is gonna take you far away from here.</p>
<p>换而言之,每个人呆在这个地球上都是有理由的.当然有可能是配角,上来便game over. 也有可能是主角,到最后怎么都不会game<br />
over.所以努力活着…该over的时候就认命.</p>
<p>I can do this as a man.这话是鄙视人类还是鄙视要做的这件事本身呢? or both of them.</p>
<p>your journey does not  end well. Fate has spoken.女巫说了这样的话.加入相信,那就必死无疑.不相信,或许还能<br />
证明女巫说错了.想到了算命的.没有什么准不准,自己把握着自己的命运.其实女巫说只有美杜莎可以杀死海妖,这事情我早就知道了.惊奇的发现拍片人的智商依旧那么低.<br />
当然如果他们早就知道,估计就没有女巫那一场戏了.</p>
<p>I’d rather die in the mud with those men, than live forever as a<br />
God.其实做God挺好…推荐他先看一下上帝也疯狂.</p>
<p>we live, we fight and we die for each other.生死患难,或许就是这句话的意思.</p>
<p>I have everything I need. Right here.主角这人其实活得很high…啥叫知足者常乐.</p>
<p>其实这部影片写的希腊神话被编剧改的面目全非.不过希腊神话就是神话,几乎所有神话都可以改写来改写去的.看电影其实是看看编辑的想象力.只不过我很好奇…美杜<br />
莎跟所有编剧都有仇…不杀死她咋都没有办法完成任务.</p>
<p>这部影片中要献祭的公主其实就是仙女座,男主角是英仙座,皇后是仙后座,国王是仙王座.海怪是鲸鱼座.我终于理解日本人为啥要杀鲸鱼了…这是几千年的仇恨呀…</p>
<p>总体评价:</p>
<p>场面宏大,打斗火爆.话语有时很激情.配角比主角更出色.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/16/5738744/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/16/5738744/" class="post-title-link" itemprop="url">念念有词</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-16 09:22:00" itemprop="dateCreated datePublished" datetime="2010-07-16T09:22:00+08:00">2010-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>696</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>有许多其实开始就知道即使尽力也很难实现。所以在结果出来之时，我还是询问下是否尽力了。尽力而为或者与虽败尤荣是同义词，只不过一个是在之前说，另外一个是在之后说<br />
。说尽力是真话，反正也可以作为幌子。真与假只有自己评定。这是一份诚信的答卷，可是仍然可以写不诚信的答案。机会给了又给却还是不一定有机会。人何必执着，没有必要<br />
为一个信念而活，就如同不要在一颗树上吊死一样。于是我说，那就在两棵树上吊死好了…都是死掉还分什么多少？墓葬的人可曾想到？…但是人的确是执着的，结果就<br />
沦为固执。本来就是度的问题，结果因为不可量化而导致不同的结局。当然要看结局是什么。所有人都是结局论者，因为历史中没有假设。自己也是极端主义者，因为假设了所有<br />
的人。运气是实力的一部分，我很赞同。因为在对的地点遇到对的人做对的事情本来就是攒了许多人品的运气。师兄的杯子留给了我，里面是黑黑的茶垢还有数不尽的细菌和病毒<br />
，我准备用它来养花。但是首先要将它戳个洞。事情总要有先决条件，没有的话就是想到也做不成。因为我这里没有锥子。真实世界和计算机世界有太多不同，这就是许多技术牛<br />
人至今仍然默默无闻的原因，这也是许多出了名的往往不是技术牛人的原因。混是很好的词，它反映了当今社会的主流趋势。所以即使你不想同流合污，也必须混成非主流。呓语<br />
有终但无始。散文形散而意不散，我的形散意也散。真想将此文当资格评审卷考一下语文老师们。他们是无论如何也揣摩不出我的深层含义，当然你们也一样。这让我想到说的所<br />
有话都是歧义句，我怎么可能有全部理解正确的时候？知道自己的信念就坚持走下去，总有人会跟随…换句话说也对，坚持走下去总会产生自己的信念，并为别人所信仰…<br />
.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/16/2010-07-16-quick-sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/16/2010-07-16-quick-sort/" class="post-title-link" itemprop="url">Quick Sort</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-16 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-16T00:00:00+08:00">2010-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:06:30" itemprop="dateModified" datetime="2023-10-05T23:06:30+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_description" content="Optimize QuickSort" />
<meta name="_su_keywords" content="Optimize,Quick,Sort" />
<meta name="_su_title" content="Quick Sort" />
<meta name="views" content="851" />
the simplest quick sort is like following:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int Partition(int * a, int start, int end)&#123;</span><br><span class="line">    swap(a[start],a[start+rand()%(end-start+1)]);</span><br><span class="line">    int p = a[start];</span><br><span class="line">    while(start&amp;lt;end)&#123;</span><br><span class="line">        while(start&amp;lt;end &amp;amp;&amp;amp; a[end] &amp;gt;= p) end--;</span><br><span class="line">        swap(a[start],a[end]);</span><br><span class="line">        while(start&amp;lt;end &amp;amp;&amp;amp; a[start]&amp;lt;= p) start++;</span><br><span class="line">        swap(a[start],a[end];)</span><br><span class="line">    &#125;</span><br><span class="line">    return start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void QuickSort(int * a, int start, int end)&#123;</span><br><span class="line"></span><br><span class="line">     if(end-start&amp;gt;=1)&#123;</span><br><span class="line">         int mid = Partition(a,start, end);</span><br><span class="line">         QuickSort(a,start,mid-1);</span><br><span class="line">         QuickSort(a,mid+1,end);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But If you want do some optimization in QuickSort, first when the number of elements is small than 10, do insert sort not quick sort. Second, To find the near-like middle element of array, and not use the random one. Third, when the array is already sorted , do not use quick sort. and Reduce the function call. You will the following codes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void QuickSort(int *a, int start, int end)&#123;</span><br><span class="line"></span><br><span class="line">    if(end - start &amp;lt;= 0 ) // or you can throw some exceptions!</span><br><span class="line">       return ;</span><br><span class="line"></span><br><span class="line">// if the number of element is less than 8, do insert sort;</span><br><span class="line"></span><br><span class="line">    if(end - start&amp;lt;7)&#123;</span><br><span class="line"></span><br><span class="line">      for(int i = start; i &amp;lt;= end; i++)&#123;</span><br><span class="line"></span><br><span class="line">         for(int j = i; j &amp;gt; start &amp;amp;&amp;amp; a[j] &amp;lt; a[j-1]; j--)</span><br><span class="line"></span><br><span class="line">             swap(a[j],a[j-1]);</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">// check if the array is sorted.</span><br><span class="line"></span><br><span class="line">    bool isSorted = true;</span><br><span class="line">    for(int i = start; i &amp;lt; end; i++)&#123;</span><br><span class="line">       if(a[i]&amp;gt;a[i+1])</span><br><span class="line">         isSorted = false;</span><br><span class="line">    &#125;</span><br><span class="line">    if(isSorted)</span><br><span class="line">      return;</span><br><span class="line"></span><br><span class="line">// get the near-like middle element, use 3 point middle method.</span><br><span class="line"></span><br><span class="line">    int dm = start+(end-start)/2;</span><br><span class="line"></span><br><span class="line">    int dl, dh;</span><br><span class="line"></span><br><span class="line">    if(end-start&amp;lt;40)&#123;</span><br><span class="line"></span><br><span class="line">       int d = (end-start+1)/8;</span><br><span class="line"></span><br><span class="line">       dl = mid(a, start,start+d,start+2*d);</span><br><span class="line"></span><br><span class="line">       dm = mid(a,dm-d,dm,dm+d);</span><br><span class="line"></span><br><span class="line">       dh = mid(a,end-2*d,end-d, end);</span><br><span class="line"></span><br><span class="line">       dm = mid(a,dl,dm,dh);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">// do partition</span><br><span class="line"></span><br><span class="line">    swap(a[start],a[dm]);</span><br><span class="line"></span><br><span class="line">    int low=start, high = end, p = a[start];</span><br><span class="line">    while(low&amp;lt;high)&#123;</span><br><span class="line">        while(low &amp;lt; high &amp;amp;&amp;amp; a[high]&amp;gt;= p) high--;</span><br><span class="line">        swap(a[low],a[high]);</span><br><span class="line">        while(low&amp;lt;high &amp;amp;&amp;amp; a[low]&amp;lt;= p) low ++;</span><br><span class="line">        swap(a[low],a[high]);</span><br><span class="line">    &#125;</span><br><span class="line">    QuickSort(a,start, low-1);</span><br><span class="line">    QuickSort(a,low+1,end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/13/5732637/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/13/5732637/" class="post-title-link" itemprop="url">Stl Upper_bound函数实现</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-13 19:50:00" itemprop="dateCreated datePublished" datetime="2010-07-13T19:50:00+08:00">2010-07-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>写了一个upper_bound的实现。其中递归使用二分法求解最上界，虽然写的完全不像STL的风格，但是练手还是可以的。</p>
<p>#include<iostream> #include<iterator> #include<cstring> #include<cassert><br />
using namespace std; int UpperBound(int* a, int start, int end , const int&amp;<br />
value){ int mid = 0; int index = 0; int up_index = 0; if(a[end]&lt;value) //<br />
特判比最后一个数大时，end+1 return end+1; //这里是经典的二分 while(start&lt;= end){ mid = start +<br />
(end - start)/2; if(a[mid] == value){ index = mid + 1; // 去递归的找一下上界 up_index =<br />
UpperBound(a,mid+1,end,value); // 如果找到的上界比现在的还小，那么就用现在的 return up_index &gt;<br />
index? up_index : index; } else if(a[mid]&lt;value){ start = mid+1; } else{ end =<br />
mid-1; // 记录上界 index = mid; } } return index; }</p>
<p>如果原数组中没有存在那个元素，就根本没有调用那个递归程序，递归只有在出现多个此元素时才会调用。另外中间递归调用段地方还可以改写为：</p>
<p>if(a[mid] == value){ index = mid + 1; /* up_index =<br />
UpperBound(a,mid+1,end,value); return up_index &gt; index? up_index : index; */<br />
// 因为只有在递归调用中start&gt;end时，才会返回一个index = 0 return (mid+1&gt;end) ? index :<br />
UpperBound(a,mid+1,end,value); }</p>
<p>这样写完后写一下测试代码,顺便wrap一层upper_bound：</p>
<p>int upper_bound(int * a,int n, const int&amp; value){ // 使用宏可以在编译时去除 #ifdef TEST<br />
// pre-condition assert(NULL != a &amp;&amp; n&gt;0); // check the array a is sorted by<br />
elements for(int i = 1; i &lt; n; i++){ assert(a[i-1]&lt;=a[i]); } int * tmp_a = new<br />
int[n]; memcpy(tmp_a,a,sizeof(int)*n); #endif int index =<br />
UpperBound(a,0,n-1,value); #ifdef TEST // post-condition //check whether the<br />
array is changed or not for(int i = 0; i &lt; n; i++) assert(a[i] == tmp_a[i]);<br />
if(index == 0){ // min assert(a[index]&gt;value); } else if(index == n){ // max<br />
assert(a[index-1]&lt;=value); } else{ assert(a[index]&gt;value &amp;&amp;<br />
a[index-1]&lt;=value); } delete [] tmp_a; #endif return index; }</p>
<p>如果希望别人不调用UpperBound而只调用upper_bound,可以使用static 关键字， 将UpperBound限制在只在本文件中使用。别人调用<br />
就只能调用upper_bound()函数。不过STL的教学源码比我这精简的多，根本无须使用递归。真正的STL源码变量名称会使用下划线__作为起始。</p>
<p>template &lt;class ForwardIterator, class T&gt; ForwardIterator upper_bound (<br />
ForwardIterator first, ForwardIterator last, const T&amp; value ) {<br />
ForwardIterator it; iterator_traits<ForwardIterator>::distance_type count,<br />
step; count = distance(first,last); while (count&gt;0) { it = first;<br />
step=count/2; advance (it,step); if (!(value&lt;*it)) // or: if<br />
(!comp(value,*it)), for the comp version { first=++it; count-=step+1; } else<br />
count=step; } return first; }</p>
<p>这里的advance()函数定义类似:</p>
<p>template&lt;class Iterator, class Distance&gt; void advance(Iterator&amp; i, Distance<br />
n); 类似于 i = x.begin()+n; i is an iterator of x</p>
<p>最后把主函数贴上做结：</p>
<p>int main(int argc, char* argv[]) { // 这里你可以使用random的方法进行测试。 int x[] =<br />
{1,2,3,4,5,5,5,5,9}; vector<int> v(x,x+9); sort(v.begin(),v.end()); cout &lt;&lt;<br />
(int)(upper_bound(v.begin(),v.end(),9)-v.begin()); cout &lt;&lt; upper_bound(x,9,9);<br />
return 0; }</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/11/5727277/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/11/5727277/" class="post-title-link" itemprop="url">HashMap 将Object 当做Key传入</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-11 17:51:00" itemprop="dateCreated datePublished" datetime="2010-07-11T17:51:00+08:00">2010-07-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>package test; import java.util.*; // Key class class A{ public int a; public<br />
int b; A(int a, int b){ this.a = a; this.b = b; } public boolean equals(Object<br />
o){ A x = (A)o; if(x.a == this.a &amp;&amp; x.b == this.b) return true; return false;<br />
} public int hashCode(){ return a+b; } } public class HashTableTest { /** *<br />
@param args */ public static void main(String[] args) { // TODO Auto-generated<br />
method stub HashMap&lt;A,Integer&gt; hm = new HashMap&lt;A,Integer&gt;(); A a1 = new<br />
A(2,3); A a2 = new A(4,5); A a4 = new A(2,3); A a3 = new A(3,2); hm.put(a1,<br />
new Integer(1)); hm.put(a2, new Integer(3));<br />
System.out.print(hm.containsKey(a4)); } }</p>
<p>对于Key这个类，这里需要重载boolean  equals(Object o) 和int hashCode()<br />
两个函数。这两个函数必须都要重载，否则会导致key找到不到。这里要说为什么，估计是HashMap中使用key相等的策略是<br />
if(key1.equals(key2) &amp;&amp; key1.hashCode() == key2.hashCode()),<br />
因为hashcode可能会有多个不同的实例对应于一个hashCode, 所以这个东东会重叠。对于判断两个对象是否相等，java默认使用的是引用相等，即a<br />
== b。但是对于String等其他内置的类来说，他们有自己的重载equals()方法。另外java<br />
doc中也提到，当重载equals()方法时，最好把hashCode()方法也重载掉。这样看来if(key1.equals(key2) &amp;&amp;<br />
key1.hashCode() == key2.hashCode())这句应该变为：</p>
<p>Key k = this.Get(key2.hashCode()); if (k.equals(key2)) return …</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/09/2010-07-09-print-display-row/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/09/2010-07-09-print-display-row/" class="post-title-link" itemprop="url">Print Only Display One Row</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-09 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-09T00:00:00+08:00">2010-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:06:21" itemprop="dateModified" datetime="2023-10-05T23:06:21+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>0</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="这篇文章是写如何在界面上只输出一行，而不用写到另外一行的方法。中文不知道专业名称是什么，英语也不知道怎么说这个才能被搜索到。
<p>this article is about how to print one row only, and do not need to write to another row. I don’t know how to describe it in Chinese or English. And I also don’t know this article how to be searched.&quot; /&gt;<br />
<meta name="_su_keywords" content="c++,fflush,\n,\r,output,printf" /><br />
<meta name="_su_rich_snippet_type" content="none" /><br />
<meta name="_su_title" content="print only display one row process bar" /><br />
<meta name="views" content="690" /><br />
这篇文章是写如何在界面上只输出一行，而不用写到另外一行的方法。中文不知道专业名称是什么，英语也不知道怎么说这个才能被搜索到。</p>
<p>this article is about how to print one row only, and do not need to write infos to another row. I don’t know how to describe it in Chinese or English. And I also don’t know this article how to be searched.</p>
<p>This effect is like use wget to downloading files. You will see the process bar moving. How to display this effect? Use the following code:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;cstdio&amp;gt;</span><br><span class="line">#include&amp;lt;unistd.h&amp;gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    printf(&quot;====&amp;gt;\r&quot;);</span><br><span class="line">    fflush(stdout);       #flush buffer</span><br><span class="line">    sleep(2);             # wait</span><br><span class="line">    printf(&quot;======&amp;gt;\r&quot;);</span><br><span class="line">    fflush(stdout);</span><br><span class="line">    sleep(3);</span><br><span class="line">    printf(&quot;========&amp;gt;\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the above code, ‘\r’ is “Enter” character, and ‘\n’ is “newline” character. If input ‘\n’ into printf(), it will go to a new line. If input ‘\r’ into printf(), the output cursor will go to the beginning. If you do not use fflush(stdout); you will never your output without ‘\n’.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/07/2010-07-07-absolute-valueinteger/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/07/2010-07-07-absolute-valueinteger/" class="post-title-link" itemprop="url">Get Absolute Value(integer)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-07 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-07T00:00:00+08:00">2010-07-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:05" itemprop="dateModified" datetime="2023-10-06T22:54:05+08:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="how to use bit operator and simple +-*/ to get absolute number." />
<meta name="_su_keywords" content="bit,operator,absolute,complement,number,priority" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_title" content="bit operators absolute complement number priority" />
<meta name="views" content="1060" />
<meta name="_wp_old_slug" content="absolute-numberinteger" />
How to get absolute (integer) only use bit operators and +-*/.(In gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5)&nbsp; )
<ul>
	<li>if number &gt;= 0 , then number &gt;&gt; 31 == 0</li>
</ul>
<ul>
	<li>if number &lt; 0&nbsp;&nbsp; , then number &gt;&gt; 31 == 0xFFFFFFFF</li>
</ul>
If some number exclusive or( xor ) 0xFFFFFFFF means each bit becomes its "opposite" number. (1 becomes 0, and 0 becomes 1).And If a number xor 0x00000000 means nothing happened to this number. So:
<ul>
	<li>number ^ 0xFFFFFFFF = ~number</li>
	<li>number ^ 0x00000000 = number</li>
</ul>
In this question, you should also know something about<span class="exturl" data-url="aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaWduZWRfbnVtYmVyX3JlcHJlc2VudGF0aW9ucyNPbmVzLjI3X2NvbXBsZW1lbnQ="> complement number(see two's complement)<i class="fa fa-external-link-alt"></i></span>. When a number is negative, |number| = ~number +1 or you can use |number| = !number + 1. When a number is positive, |number| = number.
<p>If you know above, then the goal of |x| = (x^(x&gt;&gt;31))+(~(x&gt;&gt;31)+1).</p>
<p>(x^(x&gt;&gt;31)) means:</p>
<ul>
	<li>x &gt;= 0, x^(x&gt;&gt;31) = x^0x00000000 = x</li>
	<li>x &lt; 0, x^(x&gt;&gt;31) = x^0xFFFFFFFF = ~x</li>
</ul>
And (~(x&gt;&gt;31)+1)means:
<ul>
	<li>x &gt;= 0, ~(x&gt;&gt;31)+1 = 0xFFFFFFFF+1 = 0</li>
	<li>x &lt; 0, ~(x&gt;&gt;31)+1 = 0x00000000+1 = 1</li>
</ul>
And we should take care of those brackets, because the priorities of operators are: ~ <span style="color: rgb(128, 0, 0); font-size: 16pt;"><strong>&gt;</strong></span> */ <span style="color: rgb(153, 51, 0); font-size: 16pt;"><strong>&gt;</strong></span> + - <strong><span style="color: rgb(153, 51, 0); font-size: 16pt;">&gt;</span></strong> bit operators(&amp;,^,|)
<table>
<tbody>
<tr>
<th>Level</th>
<th>Operator</th>
<th>Description</th>
<th>Grouping</th>
</tr>
<tr>
<td>1</td>
<td><tt>::</tt></td>
<td>scope</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>2</td>
<td><tt>() [] . -&gt; ++ -- dynamic_cast static_cast  reinterpret_cast const_cast typeid</tt></td>
<td>postfix</td>
<td>Left-to-right</td>
</tr>
<tr>
<td rowspan="3">3</td>
<td><tt>++ -- ~ ! sizeof new delete</tt></td>
<td>unary  (prefix)</td>
<td rowspan="3">Right-to-left</td>
</tr>
<tr>
<td><tt>* &amp;</tt></td>
<td>indirection and reference (pointers)</td>
</tr>
<tr>
<td><tt>+ -</tt></td>
<td>unary sign operator</td>
</tr>
<tr>
<td>4</td>
<td><tt>(type)</tt></td>
<td>type casting</td>
<td>Right-to-left</td>
</tr>
<tr>
<td>5</td>
<td><tt>.* -&gt;*</tt></td>
<td>pointer-to-member</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>6</td>
<td><tt>* / %</tt></td>
<td>multiplicative</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>7</td>
<td><tt>+ -</tt></td>
<td>additive</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>8</td>
<td><tt>&lt;&lt; &gt;&gt;</tt></td>
<td>shift</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>9</td>
<td><tt>&lt; &gt; &lt;= &gt;=</tt></td>
<td>relational</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>10</td>
<td><tt>== !=</tt></td>
<td>equality</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>11</td>
<td><tt>&amp;</tt></td>
<td>bitwise AND</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>12</td>
<td><tt>^</tt></td>
<td>bitwise XOR</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>13</td>
<td><tt>|</tt></td>
<td>bitwise OR</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>14</td>
<td><tt>&amp;&amp;</tt></td>
<td>logical AND</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>15</td>
<td><tt>||</tt></td>
<td>logical OR</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>16</td>
<td><tt>?:</tt></td>
<td>conditional</td>
<td>Right-to-left</td>
</tr>
<tr>
<td>17</td>
<td><tt>= *= /= %= += -= &gt;&gt;= &lt;&lt;= &amp;= ^= |=</tt></td>
<td>assignment</td>
<td>Right-to-left</td>
</tr>
<tr>
<td>18</td>
<td><tt>,</tt></td>
<td>comma</td>
<td>Left-to-right</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/05/2010-07-05-memory-allocation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/05/2010-07-05-memory-allocation/" class="post-title-link" itemprop="url">Memory Allocation in C</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-05 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-05T00:00:00+08:00">2010-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:04" itemprop="dateModified" datetime="2023-10-06T22:54:04+08:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_description" content="c language , memory allocation about malloc function , calloc function and realloc function, free function and new and delete. " />
<meta name="views" content="1100" />
<meta name="_su_title" content="memory allocation in c" />
<meta name="_su_keywords" content="memory, allocation,malloc,calloc,realloc,free,new,delete,c,c++" />
In c language, there are three methods for memory allocation: malloc(), calloc(), realloc(). And one method to free memory: free().
<p>The <strong>malloc</strong> function prototype is :<strong> void* malloc(size_t size);</strong> This function will allocates a block of <em>size</em> bytes of memory, returning a pointer to  the beginning of the block. <span style="color: #ff0000;">Attention:</span> this function is only for allocating memory! So the initial value of these memory will be Non-Zero. Maybe sometimes, it will be zero. Code for example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;stdio.h&amp;gt;</span><br><span class="line">#include&amp;lt;stdlib.h&amp;gt;</span><br><span class="line">int main()&#123;</span><br><span class="line"></span><br><span class="line">	int * a = NULL;</span><br><span class="line">	a = malloc(sizeof(int)*4);</span><br><span class="line">	// like int a[4], but those memory is in heap</span><br><span class="line">	for(int i = 0; i&amp;lt; 4; i++)</span><br><span class="line">		printf(&quot;%d &quot;,a[i]);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <strong>realloc</strong> function prototype is :<strong> void* realloc(void* ptr, size_t size);</strong> This function will reallocates a block of <em>size</em> bytes of memory,  returning a pointer to  the beginning of the block. If size is zero and ptr is not <strong>NULL</strong>, it will be used as <strong>free()</strong>. If prt is NULL and size is not zero, it will be used as <strong>malloc()</strong>. If ptr is NULL and size is zero, return value is some kind of memory which contains zero elements! Wooo~~~~. Look at the following codes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">char * p = NULL;</span><br><span class="line">printf(&quot;%x&quot;,(int)p); // will output 0</span><br><span class="line"></span><br><span class="line">p = (char*)realloc(p,0);</span><br><span class="line">printf(&quot;%x&quot;,(int)p); // will output non-zero</span><br><span class="line"></span><br><span class="line">p = (char*)realloc(p,0);</span><br><span class="line">printf(&quot;%x&quot;,(int)p);</span><br></pre></td></tr></table></figure>
<p>why?! Because if this function is called successfully, it will return non-zero memory address. And you will see the third output <strong>subtract </strong>the second output will be<strong> 16 bytes</strong>. If ptr is not NULL , and size is non-zero, and current block can simply expand without moving,  the return value is the same as ptr. But there is not enough space for simply expand, it will execute<strong> free(ptr) and return malloc(size)</strong>. This function will become very <span style="color: #ff0000;">dangerous!</span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char * k = (char*)realloc(NULL,100);</span><br><span class="line">char * kbigger = (char*)realloc(k,104);</span><br><span class="line">char * kbiggest = (char*)realloc(k,106); &lt;span style=&quot;color: #ff0000;&quot;&gt;// crash!&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p>Safety called will be like the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char * k = (char*)realloc(NULL,100);</span><br><span class="line">k = (char*)realloc(k,4); // k&#x27;s address is not changed</span><br><span class="line">k = (char*)realloc(k,104); // k&#x27;s address is changed</span><br></pre></td></tr></table></figure>
<p>If there is not enough free memory to be allocated, this function will return NULL.<span style="color: #ff0000;">Attention:</span> this function will not initialize those memory also.</p>
<p><strong>calloc</strong>'s prototype is void* calloc(int num, size_t size).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">char* p = (char*)calloc(20,sizeof(char));</span><br><span class="line"></span><br><span class="line">// it is equal to</span><br><span class="line"></span><br><span class="line">char* p = (char*)malloc(20*sizeof(char));</span><br><span class="line">memset(p,0,20*sizeof(char));</span><br></pre></td></tr></table></figure>
<p><span style="color: #ff0000;">But calloc is efficient!</span></p>
<p><span style="color: #ff0000;"> <strong> </strong><span style="color: #000000;"><strong>free</strong> function is to delete memory which has been allocated. But free function will not assign the point to zero.</span></span></p>
<p><span style="color: #ff0000;"><span style="color: #000000;"></span></span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">char * p = (char*)calloc(100);</span><br><span class="line"></span><br><span class="line">p[0] = &#x27;a&#x27;;</span><br><span class="line">printf(&quot;%c&quot;,p[0]);   // output &#x27;a&#x27;</span><br><span class="line">printf(&quot;%x&quot;,(int)p);</span><br><span class="line">free(p);</span><br><span class="line">printf(&quot;%c&quot;,p[0]); // output nothing</span><br><span class="line">printf(&quot;%x&quot;,(int)p); // the value is the same as the first.</span><br></pre></td></tr></table></figure>
<p>And all of those functions will not recommend to be used in c++, because those functions will not initialize class structure or v_ptr. free() function will not destruct parent class when sub class is destructed. In c++, maybe should always use <strong>new</strong> and <strong>delete</strong>!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/02/5709968/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/02/5709968/" class="post-title-link" itemprop="url">XMLCSPReader Null Point Error</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-02 19:28:00" itemprop="dateCreated datePublished" datetime="2010-07-02T19:28:00+08:00">2010-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>package queens; import java.io.FileNotFoundException; import<br />
java.io.IOException; import org.sat4j.csp.SolverFactory; import<br />
org.sat4j.reader.ParseFormatException; import org.sat4j.reader.XMLCSPReader;<br />
import org.sat4j.specs.ContradictionException; import<br />
org.sat4j.specs.IProblem; import org.sat4j.specs.ISolver; import<br />
org.sat4j.specs.TimeoutException; import org.sat4j.tools.ModelIterator; public<br />
class Solver { public static void main(String[] args) { ISolver solver =<br />
SolverFactory.newDefault(); solver.setTimeout(360); ModelIterator mi = new<br />
ModelIterator(solver); XMLCSPReader reader = new XMLCSPReader(solver); try {<br />
if (reader != null) reader.parseInstance(“queens.xml”); IProblem problem = mi;<br />
boolean unsat = true; int count = 1; while (problem.isSatisfiable()) { unsat =<br />
false; System.out.print(“[” + count + &quot;] “); for (int i = 0; i &lt;<br />
mi.model().length; i++) { System.out.print(mi.model()[i] + &quot; “); }<br />
System.out.println(””); // Call mi.model() to be sure you iterate to the next<br />
solution mi.model(); count++; } if (unsat) {<br />
System.out.println(“Unsitisfied”); } } catch (TimeoutException e) {<br />
System.out.println(“Timeout”); } catch (FileNotFoundException e) {<br />
System.out.println(“File not found”); } catch (IOException e) {<br />
System.out.println(“IO Exception”); } catch (ParseFormatException e) {<br />
System.out.println(“ParseFormatException”); } catch (ContradictionException e)<br />
{ System.out.println(“Contradiction”); } catch (java.lang.NullPointerException<br />
e) { System.out.print(“NullPointerException”); } } }</p>
<p>上面一段代码不知道如何，一直报NULL Point Exception. 最后发现并非是代码写错，而是因为jre不对。需要使用opensdk-1.6。</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069103M0j0.gif" alt="" /></p>
<p>然后：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069268oWP9.gif" alt="java" /></p>
<p>然后：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069345M766.gif" alt="java" /></p>
<p>选中java-opensdk1.6 然后在外面选中刚才的JavaSE-1.6 :</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069450Fl9g.gif" alt="" /></p>
<p>有时候eclipse报出Class Not Found错误，可能是因为jar包应该放在external<br />
jar的地方，但是你却放错了位置。添加external jar的地方。如果想添加external jars,需要在：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069654J18h.gif" alt="" /></p>
<p>选中propertise,然后：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069784s1ld.gif" alt="" /></p>
<p>左边add external jars, 添加需要的jar即可。</p>
<p>如果发生了selection dose not contain a main type,<br />
那么就需要重新创建一个Project,然后将你的文件再重新导入到新的Project中。或者粘贴过去。不知道为什么eclipse经常发生这个错误。</p>
<p><span class="exturl" data-url="aHR0cDovL3huLS1YTUxDU1BSZWFkZXJqYXJzYXQ0ai05ZDQ1YWpnOTFhcDdtZzEzYm5jcmJ3MmdjbzFlNDV0YTR2MWllcDFkN3NjLm9yZw==">上面一个XMLCSPReader的各种jar文件需要在sat4j.org<i class="fa fa-external-link-alt"></i></span> 上下载。该下模块的都下，但是注意版本号。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/30/2010-06-30-try-catch-exception-c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/30/2010-06-30-try-catch-exception-c/" class="post-title-link" itemprop="url">try...catch...exception in C++</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-30 00:00:00" itemprop="dateCreated datePublished" datetime="2010-06-30T00:00:00+08:00">2010-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:05:22" itemprop="dateModified" datetime="2023-10-05T23:05:22+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="try...catch...exception in c++, and it describe how to use it.  the philosophy of exceptions." />
<meta name="_su_keywords" content="c,c++,exception,throw, catch,try" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_title" content="try...catch...exception in c++" />
<meta name="views" content="2645" />
if you will throw something, you should catch it as the same type. like following:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">int main()&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw 20;</span><br><span class="line">    &#125;catch(int i)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;Exception Num is NO.&quot;&amp;lt;&amp;lt;i&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw &#x27;X&#x27;;</span><br><span class="line">    &#125;catch(char c)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;this exception is a char:&quot;&amp;lt;&amp;lt;c&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try&#123;</span><br><span class="line">        throw &quot;abc&quot;;</span><br><span class="line">    &#125;catch(const char * e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;this is string exception:&quot;&amp;lt;&amp;lt;e&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try&#123;</span><br><span class="line">        int *d = new int(65);</span><br><span class="line">        throw d;</span><br><span class="line">    &#125;catch(const int * e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;this is int point exception:&quot;&amp;lt;&amp;lt;*e&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    /* ok, catch will handle everything, if you throw correct type.*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and if you want create classes for exceptions. You should add #include&lt;exception&gt; and inherit exception class, and then override the function “<strong>what</strong>”.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line">#include&amp;lt;exception&amp;gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">/// this exception class is from #include&amp;lt;exception&amp;gt;</span><br><span class="line">/// you should override the function what() to generate your exception string</span><br><span class="line">class MyException: public exception&#123;</span><br><span class="line">    virtual const char* what() const throw()&#123;</span><br><span class="line">        return &quot;myExceptions!!!!!!!&quot;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class SubException: public MyException&#123;</span><br><span class="line">    virtual const char* what()const throw()&#123;</span><br><span class="line">        return &quot;sub exception !!!!!!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw MyException();</span><br><span class="line">    &#125;catch(exception&amp;amp; e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; e.what()&amp;lt;&amp;lt;endl;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw SubException();</span><br><span class="line">    &#125;catch(bad_alloc&amp;amp;)&#123;</span><br><span class="line">        // this will not occur, just test this type.</span><br><span class="line">        // if it is occured, your computer will be locked.</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;nothing&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;catch(exception&amp;amp; e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; e.what()&amp;lt;&amp;lt;endl;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>There are some standard exceptions in exception.h. These exceptions are:</p>
<p><strong>bad_alloc</strong></p>
<p>A bad_alloc is thrown by new if an allocation failure occurs.</p>
<p><strong>bad_cast</strong></p>
<p>A bad_cast is thrown by dynamic_cast when it fails with a referenced  type.</p>
<p><strong>bad_exception</strong></p>
<p>A bad_exception is thrown when an exception type doesn’t match any  catch</p>
<p><strong>bad_typeid</strong></p>
<p>A bad_typeid is thrown by typeid</p>
<p><strong>ios_base::failure</strong></p>
<p>An ios_base::failure is thrown by functions in the iostream library.</p>
<p>in #include&lt;stdexecpt&gt; can use these exception:<br />
class <strong>logic_error</strong>; // :  public exception<br />
class <strong>domain_error</strong>; // :  public logic_error<br />
class <strong>invalid_argument</strong>; // : public logic_error<br />
class<strong> length_error</strong>; // :  public logic_error<br />
class <strong>out_of_range</strong>; // :  public logic_error<br />
class <strong>runtime_error</strong>; // :  public exception<br />
class <strong>range_error</strong>; // :  public runtime_error<br />
class <strong>overflow_error</strong>; // :  public runtime_error<br />
class <strong>underflow_error</strong>; // :  public runtime_error</p>
<p>If you don’t know which kind of exception will occur. you should use <strong>catch(…)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">        srand(time(NULL));</span><br><span class="line">        int i = rand()%4;</span><br><span class="line"></span><br><span class="line">        switch(i)&#123;</span><br><span class="line">            case 0:</span><br><span class="line">                throw; // terminate called without an active exception</span><br><span class="line">                       // Aborted, ... will not catch it.</span><br><span class="line">                break;</span><br><span class="line">            case 1:</span><br><span class="line">                throw &#x27;x&#x27;;</span><br><span class="line">                break;</span><br><span class="line">            case 2:</span><br><span class="line">                throw 50;</span><br><span class="line">                break;</span><br><span class="line">            case 3:</span><br><span class="line">                throw &quot;my string&quot;;</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;catch(...)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;I don&#x27;t know which exception will occur!&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>But when i == 0, the program will execute throw;, and it will exit and print:</p>
<blockquote>terminate called without an active exception
<p>Aborted</blockquote><br />
<strong>You should specify something to throw. throw; is only be used within catch clauses.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            throw 2;</span><br><span class="line">        &#125;catch(int i)&#123;</span><br><span class="line">            throw; // here I use it again!</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;catch(...)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;re-throw it!!!!&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>you can declare your functions using throw(). But it is just declare!  you can throw everything! But you declare it will throw bad_exception, and use set_unexpected(), it will process some unexpected exceptions.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">void foo() throw(int,bad_exception)&#123;</span><br><span class="line"></span><br><span class="line">    throw &quot;abc&quot;;</span><br><span class="line">&#125;</span><br><span class="line">void myunexpected()&#123;</span><br><span class="line">    cout &amp;lt;&amp;lt; &quot;I get unexpected exceptions!&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    throw;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// in main</span><br><span class="line"></span><br><span class="line">    set_unexpected(myunexpected);</span><br><span class="line">    try&#123;</span><br><span class="line">        foo();</span><br><span class="line">    &#125;catch(int)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;catch a integer&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;catch(bad_exception&amp;amp;)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;bad_exception&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    // you can use catch(...)</span><br></pre></td></tr></table></figure>
<p>output is</p>
<blockquote>I get unexpected exceptions!
bad_exception</blockquote>
If the program or your function can not process some kind of situation. you should throw something out.  Sometime, someone argued that it will reduce the usability. But If you don't stop the processing(program or function), it will create a disaster.  Remember, by all means, throw it! But should we catch those exceptions and how we catch those? e....as your wish. Some bug will not appear, if you use not appropriate catch and process those exceptions in unsuitable way. If your program have some bug, and it is difficult to find, please delete all catches!
<p>In some languages which have finally clauses. But in c++, it dose not have finally clauses.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/29/5700952/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/29/5700952/" class="post-title-link" itemprop="url">博弈问题及SG函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-29 09:11:00" itemprop="dateCreated datePublished" datetime="2010-06-29T09:11:00+08:00">2010-06-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>6.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>6 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>转载自<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbG9naWNfbnV0L2FyY2hpdmUvMjAwOS8xMC8yMi80NzExNDg5LmFzcHg=">http://blog.csdn.net/logic_nut/archive/2009/10/22/4711489.aspx<i class="fa fa-external-link-alt"></i></span></p>
<p>推荐看看：<span class="exturl" data-url="aHR0cDovL3d3dy5tYXRoLnVjbGEuZWR1L350b20v">http://www.math.ucla.edu/~tom/<i class="fa fa-external-link-alt"></i></span></p>
<p>学习理论在这里：<span class="exturl" data-url="aHR0cDovL3d3dy5tYXRoLnVjbGEuZWR1L350b20vR2FtZV9UaGVvcnkvQ29udGVudHMuaHRtbA==">http://www.math.ucla.edu/~tom/Game_Theory/Contents.html<i class="fa fa-external-link-alt"></i></span></p>
<p>博弈问题<br />
若你想仔细学习博弈论，我强烈推荐加利福尼亚大学的Thomas S.<br />
Ferguson教授精心撰写并免费提供的这份教材，它使我受益太多。（如果你的英文水平不足以阅读它，我只能说，恐怕你还没到需要看“博弈论”的时 候。）</p>
<p>Nim游戏是博弈论中最经典的模型（之一？），它又有着十分简单的规则和无比优美的结论，由这个游戏开始了解博弈论恐怕是最合适不过了。</p>
<p>Nim游戏是组合游戏(Combinatorial Games)的一种，准确来说，属于“Impartial Combinatorial<br />
Games”（以下简称ICG）。满足以下条件的游戏是ICG（可能不太严谨）：1、有两名选手；2、两名选手交替对游戏进行移动(move)，每次一<br />
步，选手可以在（一般而言）有限的合法移动集合中任选一种进行移动；3、对于游戏的任何一种可能的局面，合法的移动集合只取决于这个局面本身，不取决于轮<br />
到哪名选手操作、以前的任何操作、骰子的点数或者其它什么因素；<br />
4、如果轮到某名选手移动，且这个局面的合法的移动集合为空（也就是说此时无法进行移动），则这名选手负。根据这个定义，很多日常的游戏并非ICG。例如<br />
象棋就不满足条件3，因为红方只能移动红子，黑方只能移动黑子，合法的移动集合取决于轮到哪名选手操作。</p>
<p>通常的Nim游戏的定义是这样的：有若干堆石子，每堆石子的数量都是有限的，合法的移动是“选择一堆石子并拿走若干颗（不能不拿）”，如果轮到某个人时所<br />
有的石子堆都已经被拿空了，则判负（因为他此刻没有任何合法的移动）。</p>
<p>这游戏看上去有点复杂，先从简单情况开始研究吧。如果轮到你的时候，只剩下一堆石子，那么此时的必胜策略肯定是把这堆石子全部拿完一颗也不给对手剩，然后<br />
对手就输了。如果剩下两堆不相等的石子，必胜策略是通过取多的一堆的石子将两堆石子变得相等，以后如果对手在某一堆里拿若干颗，你就可以在另一堆中拿同样<br />
多的颗数，直至胜利。如果你面对的是两堆相等的石子，那么此时你是没有任何必胜策略的，反而对手可以遵循上面的策略保证必胜。如果是三堆石子……好像已经<br />
很难分析了，看来我们必须要借助一些其它好用的（最好是程式化的）分析方法了，或者说，我们最好能够设计出一种在有必胜策略时就能找到必胜策略的算法。</p>
<p>定义P-position和N-position，其中P代表Previous，N代表Next。直观的说，上一次move的人有必胜策略的局面是P-<br />
position，也就是“后手可保证必胜”或者“先手必败”，现在轮到move的人有必胜策略的局面是N-position，也就是“先手可保证必<br />
胜”。更严谨的定义是：1.无法进行任何移动的局面（也就是terminal position）是P-position；2.可以移动到P-<br />
position的局面是N-position；3.所有移动都导致N-position 的局面是P-position。</p>
<p>按照这个定义，如果局面不可能重现，或者说positions的集合可以进行拓扑排序，那么每个position或者是P-position或者是N-<br />
position，而且可以通过定义计算出来。</p>
<p>以Nim游戏为例来进行一下计算。比如说我刚才说当只有两堆石子且两堆石子数量相等时后手有必胜策略，也就是这是一个P-position，下面我们依靠<br />
定义证明一下(3,3)是一个P-position。首先(3,3)的子局面（也就是通过合法移动可以导致的局面）有(0,3)(1,3)(2,3)（显<br />
然交换石子堆的位置不影响其性质，所以把(x,y)和(y,x)看成同一种局面），只需要计算出这三种局面的性质就可以了。<br />
(0,3)的子局面有(0,0)、(0,1)、(0,2)，其中(0,0)显然是P-position，所以(0,3)是N-position（只要找到 一个是P-<br />
position的子局面就能说明是N-position）。(1,3)的后继中(1,1)是P-position（因为(1,1)的唯一子局 面(0,1)是N-<br />
position），所以(1,3)也是N-position。同样可以证明(2,3)是N-position。所以(3,3)的所有 子局面都是N-<br />
position，它就是P-position。通过一点简单的数学归纳，可以严格的证明“有两堆石子时的局面是P-position当且<br />
仅当这两堆石子的数目相等”。</p>
<p>根据上面这个过程，可以得到一个递归的算法——对于当前的局面，递归计算它的所有子局面的性质，如果存在某个子局面是P-position，那么向这个子<br />
局面的移动就是必胜策略。当然，可能你已经敏锐地看出有大量的重叠子问题，所以可以用DP或者记忆化搜索的方法以提高效率。但问题是，利用这个算法，对于<br />
某个Nim游戏的局面(a1,a2,…,an)来说，要想判断它的性质以及找出必胜策略，需要计算O(a1<em>a2</em>…*an)个局面的性质，不管<br />
怎样记忆化都无法降低这个时间复杂度。所以我们需要更高效的判断Nim游戏的局面的性质的方法。</p>
<p>直接说结论好了。(Bouton’s Theorem)对于一个Nim游戏的局面(a1,a2,…,an)，它是P-<br />
position当且仅当a1<sup>a2</sup>…<sup>an=0，其中</sup>表示异<br />
或(xor)运算。怎么样，是不是很神奇？我看到它的时候也觉得很神奇，完全没有道理的和异或运算扯上了关系。但这个定理的证明却也不复杂，基本上就是按<br />
照两种position的证明来的。</p>
<p>根据定义，证明一种判断position的性质的方法的正确性，只需证明三个命题： 1、这个判断将所有terminal position判为P-<br />
position；2、根据这个判断被判为N-position的局面一定可以移动到某个P-position；3、根据这个判 断被判为P-<br />
position的局面无法移动到某个P-position。</p>
<p>第一个命题显然，terminal position只有一个，就是全0，异或仍然是0。</p>
<p>第二个命题，对于某个局面(a1,a2,…,an)，若a1<sup>a2</sup>…^an!=0，一定存在某个合法的移动，将ai改变成ai’后满足<br />
a1<sup>a2</sup>…<sup>ai’</sup>…<sup>an=0。不妨设a1</sup>a2<sup>…</sup>an=k，则一定存在某个ai，它的二进制表示在k的最高位上是1（否则k的<br />
最高位那个1是怎么得到的）。这时ai<sup>k&lt;ai一定成立。则我们可以将ai改变成ai’=ai</sup>k，此时<br />
a1<sup>a2</sup>…<sup>ai’</sup>…<sup>an=a1</sup>a2<sup>…</sup>an^k=0。</p>
<p>第三个命题，对于某个局面(a1,a2,…,an)，若a1<sup>a2</sup>…^an=0，一定不存在某个合法的移动，将ai改变成ai’后满足<br />
a1<sup>a2</sup>…<sup>ai’</sup>…<sup>an=0。因为异或运算满足消去率，由a1</sup>a2<sup>…</sup>an=a1<sup>a2</sup>…<sup>ai’</sup>…^an可以得<br />
到ai=ai’。所以将ai改变成ai’不是一个合法的移动。证毕。</p>
<p>根据这个定理，我们可以在O(n)的时间内判断一个Nim的局面的性质，且如果它是N-position，也可以在O(n)的时间内找到所有的必胜策略。<br />
Nim问题就这样基本上完美的解决了。</p>
<p>在下一节“Sprague-Grundy函数”中，我们将面对更多与Nim游戏有关的变种，还会看到Nim游戏的a1<sup>a2</sup>…^an这个值更广泛的<br />
意义。敬请期待。<br />
上一期的文章里我们仔细研究了Nim游戏，并且了解了找出必胜策略的方法。但如果把Nim的规则略加改变，你还能很快找出必胜策略吗？比如说：有n堆石<br />
子，每次可以从第1堆石子里取1颗、2颗或3颗，可以从第2堆石子里取奇数颗，可以从第3堆及以后石子里取任意颗……这时看上去问题复杂了很多，但相信你<br />
如果掌握了本节的内容，类似的千变万化的问题都是不成问题的。</p>
<p>现在我们来研究一个看上去似乎更为一般的游戏：给定一个有向无环图和一个起始顶点上的一枚棋子，两名选手交替的将这枚棋子沿有向边进行移动，无法移动者判<br />
负。事实上，这个游戏可以认为是所有Impartial Combinatorial<br />
Games的抽象模型。也就是说，任何一个ICG都可以通过把每个局面看成一个顶点，对每个局面和它的子局面连一条有向边来抽象成这个“有向图游戏”。下<br />
面我们就在有向无环图的顶点上定义Sprague-Garundy函数。</p>
<p>首先定义mex(minimal excludant)运算，这是施加于一个集合的运算，表示最小的不属于这个集合的非负整数。例如mex{0,1,2,4}=3、<br />
mex{2,3,5}=0、mex{}=0。</p>
<p>对于一个给定的有向无环图，定义关于图的每个顶点的Sprague-Garundy函数g如下：g(x)=mex{ g(y) | y是x的后继 }。</p>
<p>来看一下SG函数的性质。首先，所有的terminal<br />
position所对应的顶点，也就是没有出边的顶点，其SG值为0，因为它的后继集合是空集。然后对于一个g(x)=0的顶点x，它的所有后继y都满足<br />
g(y)!=0。对于一个g(x)!=0的顶点，必定存在一个后继y满足g(y)=0。</p>
<p>以上这三句话表明，顶点x所代表的postion是P-position当且仅当g(x)=0（跟P-positioin/N-position的定义的<br />
那三句话是完全对应的）。我们通过计算有向无环图的每个顶点的SG值，就可以对每种局面找到必胜策略了。但SG函数的用途远没有这样简单。如果将有向图游<br />
戏变复杂一点，比如说，有向图上并不是只有一枚棋子，而是有n枚棋子，每次可以任选一颗进行移动，这时，怎样找到必胜策略呢？</p>
<p>让我们再来考虑一下顶点的SG值的意义。当g(x)=k时，表明对于任意一个0&lt;=i&lt;k，都存在x的一个后继y满足g(y)=i。也就是<br />
说，当某枚棋子的SG值是k时，我们可以把它变成0、变成1、……、变成k-1，但绝对不能保持k不变。不知道你能不能根据这个联想到Nim游戏，Nim<br />
游戏的规则就是：每次选择一堆数量为k的石子，可以把它变成0、变成1、……、变成k-1，但绝对不能保持k不变。这表明，如果将n枚棋子所在的顶点的<br />
SG值看作n堆相应数量的石子，那么这个Nim游戏的每个必胜策略都对应于原来这n枚棋子的必胜策略！</p>
<p>对于n个棋子，设它们对应的顶点的SG值分别为(a1,a2,…,an)，再设局面(a1,a2,…,an)时的Nim游戏的一种必胜策略是把<br />
ai变成k，那么原游戏的一种必胜策略就是把第i枚棋子移动到一个SG值为k的顶点。这听上去有点过于神奇——怎么绕了一圈又回到Nim游戏上了。</p>
<p>其实我们还是只要证明这种多棋子的有向图游戏的局面是P-position当且仅当所有棋子所在的位置的SG函数的异或为0。这个证明与上节的 Bouton’s<br />
Theorem几乎是完全相同的，只需要适当的改几个名词就行了。</p>
<p>刚才，我为了使问题看上去更容易一些，认为n枚棋子是在一个有向图上移动。但如果不是在一个有向图上，而是每个棋子在一个有向图上，每次可以任选一个棋子<br />
（也就是任选一个有向图）进行移动，这样也不会给结论带来任何变化。</p>
<p>所以我们可以定义有向图游戏的和(Sum of Graph<br />
Games)：设G1、G2、……、Gn是n个有向图游戏，定义游戏G是G1、G2、……、Gn的和(Sum)，游戏G的移动规则是：任选一个子游戏Gi<br />
并移动上面的棋子。Sprague-Grundy<br />
Theorem就是：g(G)=g(G1)<sup>g(G2)</sup>…^g(Gn)。也就是说，游戏的和的SG函数值是它的所有子游戏的SG函数值的异或。</p>
<p>再考虑在本文一开头的一句话：任何一个ICG都可以抽象成一个有向图游戏。所以“SG函数”和“游戏的和”的概念就不是局限于有向图游戏。我们给每个<br />
ICG的每个position定义SG值，也可以定义n个ICG的和。所以说当我们面对由n个游戏组合成的一个游戏时，只需对于每个游戏找出求它的每个局<br />
面的SG值的方法，就可以把这些SG值全部看成Nim的石子堆，然后依照找Nim的必胜策略的方法来找这个游戏的必胜策略了！</p>
<p>回到本文开头的问题。有n堆石子，每次可以从第1堆石子里取1颗、2颗或3颗，可以从第2堆石子里取奇数颗，可以从第3堆及以后石子里取任意颗……我们可<br />
以把它看作3个子游戏，第1个子游戏只有一堆石子，每次可以取1、2、3颗，很容易看出x颗石子的局面的SG值是x%4。第2个子游戏也是只有一堆石子，<br />
每次可以取奇数颗，经过简单的画图可以知道这个游戏有x颗石子时的SG值是x%2。第3个游戏有n-2堆石子，就是一个Nim游戏。对于原游戏的每个局<br />
面，把三个子游戏的SG值异或一下就得到了整个游戏的SG值，然后就可以根据这个SG值判断是否有必胜策略以及做出决策了。其实看作3个子游戏还是保守了<br />
些，干脆看作n个子游戏，其中第1、2个子游戏如上所述，第3个及以后的子游戏都是“1堆石子，每次取几颗都可以”，称为“任取石子游戏”，这个超简单的<br />
游戏有x颗石子的SG值显然就是x。其实，n堆石子的Nim游戏本身不就是n个“任取石子游戏”的和吗？</p>
<p>所以，对于我们来说，SG函数与“游戏的和”的概念不是让我们去组合、制造稀奇古怪的游戏，而是把遇到的看上去有些复杂的游戏试图分成若干个子游戏，对于<br />
每个比原游戏简化很多的子游戏找出它的SG函数，然后全部异或起来就得到了原游戏的SG函数，就可以解决原游戏了。<br />
例子程序：<br />
acm.hdu上的例子</p>
<p>A New Tetris Game 22222</p>
<p>#include <iostream><br />
#include <set><br />
#include <bitset><br />
#include <map><br />
//#include <algorithm><br />
using namespace std;</p>
<p>//better if find area that not linked and sg each<br />
typedef bitset&lt;32&gt; int_set;<br />
struct array2{<br />
bitset&lt;64&gt; bs;<br />
int r,c;<br />
bool operator&lt;(const array2&amp; a2)const{<br />
if(r!=a2.r)return r&lt;a2.r;<br />
if(c!=a2.c)return c&lt;a2.c;<br />
return <em>(long long</em>)&amp;bs&lt; <em>(long long</em>)&amp;<span class="exturl" data-url="aHR0cDovL2EyLmJz">a2.bs<i class="fa fa-external-link-alt"></i></span>;<br />
}<br />
bitset&lt;64&gt;::reference operator()(int ir,int ic){<br />
return bs[ir*c+ic];<br />
}<br />
}g;<br />
inline int mex(const int_set&amp; is){<br />
if(is.none())return 0;<br />
for(int i=0;i!=32;++i){ //assum i will never exceed 32<br />
if(is.test(i)==0)<br />
return i;<br />
}<br />
}<br />
inline bool check_ok(int ir,int ic){<br />
return !g(ir,ic)&amp;&amp;!g(ir+1,ic)&amp;&amp;!g(ir,ic+1)&amp;&amp;!g(ir+1,ic+1);<br />
}<br />
map&lt;array2,int&gt; ma;<br />
inline void set_it(int ir,int ic,int s){<br />
g(ir,ic)=s;<br />
g(ir+1,ic)=s;<br />
g(ir,ic+1)=s;<br />
g(ir+1,ic+1)=s;<br />
}<br />
inline int sg(int r,int c){<br />
map&lt;array2,int&gt;::iterator p=ma.find(g);//optimizing for the repeated<br />
if(p!=ma.end())return p-&gt;second;<br />
int_set sgs;<br />
for(int i=0;i&lt;r-1;++i)<br />
for(int j=0;j&lt;c-1;++j)<br />
if(check_ok(i,j)){<br />
set_it(i,j,1);<br />
sgs.set(sg(r,c));<br />
set_it(i,j,0);<br />
}<br />
return ma[g]=mex(sgs);<br />
}<br />
int main(){<br />
int n;<br />
while(cin&gt;&gt;n){<br />
int out=0;<br />
while(n–){<br />
int r,c;<br />
cin&gt;&gt;g.r &gt;&gt;g.c;<br />
for(int i=0;i!=g.r;++i)<br />
for(int j=0;j!=g.c;++j){<br />
char c;<br />
cin&gt;&gt;c;<br />
g(i,j)=c-‘0’;<br />
}<br />
out^=sg(g.r,g.c);<br />
}<br />
cout&lt;&lt;(out?“Yes”:“No”)&lt;&lt;endl;<br />
}<br />
return 0;<br />
}</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/28/5698822/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/28/5698822/" class="post-title-link" itemprop="url">Python 解析XML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-28 10:58:00" itemprop="dateCreated datePublished" datetime="2010-06-28T10:58:00+08:00">2010-06-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>763</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><root> <nodes> <node name="n1"> node1 </node> <node name="n2"> node2 </node><br />
</nodes> <edge> nothing </edge> </root></p>
<p>xml 格式如上.</p>
<p>首先要得到root节点:</p>
<p>from xml.etree.ElementTree import ElementTree tree = ElementTree()<br />
tree.parse(filename) # 你想使用哪个文件作为输入? root = tree.getroot()<br />
“”“如果你的输入的是一段content”“” from xml.etree.ElementTree import XML file =<br />
open(filename) content = file.read(-1) root = XML(content) print(root.tag)<br />
file.close() # or you can use from xml.etree.ElementTree import XMLID file =<br />
open(filename) root = XMLID(file.read(-1)) print(root[0].tag) # root[0] is<br />
<root></root> file.close()</p>
<p>上面的root是class Element的object, 而tree 是ElementTree的object. 如果想得到某个节点的attribute,<br />
例如<node name="name1"><br />
则element.attrib[‘name’]即可.如果是<edge>text</edge>,就是element.text.</p>
<p>如果想得到下一层节点,可以使用root.find(tag)得到,如果不知道具体的tag,那么可以使用root.getchildren().如果想使用某个ta<br />
g作为迭代,例如nodes中有两个node.代码如下:</p>
<p>element_nodes = root.find(‘nodes’) nodes_list =<br />
element_nodes.getiterator(‘node’) for node in nodes_list: print(node.tag)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/21/5683238/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/21/5683238/" class="post-title-link" itemprop="url">Static 关键字用途</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-21 10:47:00" itemprop="dateCreated datePublished" datetime="2010-06-21T10:47:00+08:00">2010-06-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>copy from <span class="exturl" data-url="aHR0cDovL3d3dy5jbml0YmxvZy5jb20vaWN0Zmx5L2FyY2hpdmUvMjAwNi8xMS8yNS8xOTU5NC5odG1s">http://www.cnitblog.com/ictfly/archive/2006/11/25/19594.html<i class="fa fa-external-link-alt"></i></span></p>
<p>本文只是本人对C++中关于静态类型的一个总结，如错误之处，请大家帮我改正。我分两个方面来总结，第一方面主要是相对于面向过程而言，即在这方面不涉及<br />
到类，第二方面相对于面向对象而言，主要说明static在类中的作用。</p>
<p>一、在面向过程设计中的static关键字</p>
<p>1、 静态全局变量</p>
<p>定义：在全局变量前，加上关键字 static 该变量就被定义成为了一个静态全局变量。</p>
<p>特点：<br />
A、该变量在全局数据区分配内存。<br />
B、初始化：如果不显式初始化，那么将被隐式初始化为0。<br />
C、访变量只在本源文件可见， 严格的讲应该为定义之处开始到本文件结束。</p>
<p>例（摘于C++程序设计教程—钱能主编P103）： 　　　　　　　　<a target="_blank" rel="noopener" href="//file1.cpp">//file1.cpp</a><br />
#include&lt;iostream.h&gt;<br />
void fn();<br />
extern int n;<br />
void main()<br />
{<br />
n=20;<br />
cout &lt;&lt; n &lt;&lt; endl;<br />
fn();<br />
}</p>
<p><a target="_blank" rel="noopener" href="//file2.cpp">//file2.cpp</a><br />
#include&lt;iostream.h&gt;</p>
<p>static int n; //定义静态全局变量，初始化为0；<br />
void fn()<br />
{<br />
n++;<br />
cout &lt;&lt; n &lt;&lt; endl;<br />
}</p>
<p>文件 分别编译能通过，但连接时file1.cpp 中的变量n找不到定义，产生连接错误。</p>
<p>D、文件作用域下声明的const的常量默认 为static存储类型。</p>
<p>2、静态局部变量</p>
<p>定义：在局部变量前加上static关键字时，就定义了静态局部变量。</p>
<p>特 点：<br />
A、该变量在全局数据区分配内存。<br />
B、初始化：如果不显式初始化，那么将被隐式初始化为0。<br />
C、它始终驻 留在全局数据区，直到程序运行结束。但其作用域为局部作用域，当定义它的函数或　语句块结束时，其作用域随之结束。</p>
<p>3、静态函数（注意 与类的静态成员函数区别）</p>
<p>定义：在函数的返回类型前加上static关键字，函数即被定义成静态函数。</p>
<p>特点：<br />
A、静态函数只能在本源文件中使用（这是与普通函数区别）<br />
例（摘于C++程序设计教程—钱能主编P103）： 　　　　　　　　<a target="_blank" rel="noopener" href="//file1.cpp">//file1.cpp</a><br />
void fn();<br />
void staticFn()</p>
<p>void main()<br />
{</p>
<p>fn();<br />
staticFn();<br />
}</p>
<p><a target="_blank" rel="noopener" href="//file2.cpp">//file2.cpp</a><br />
#include&lt;iostream.h&gt;</p>
<p>static void staticFn();<br />
void fn();</p>
<p>void fn()<br />
{<br />
staticFn();<br />
cout &lt;&lt; “this is fn() /n”;<br />
}</p>
<p>void staticFn()<br />
{<br />
cout &lt;&lt; “this is staticFn() /n”;<br />
}<br />
连接时，将产生找不到函数 staticFn()定义的错误。</p>
<p>B、主意事项</p>
<p>在文件作用域下声明的inline函数默认为static类 型。</p>
<p>二、面象对象中的static关键字（主要指类中的static关键字）</p>
<p>1、静态数据成员</p>
<p>特 点：<br />
A、内存分配：在程序的全局数据区分配。<br />
B、初始化和定义：<br />
a、静态数据成员定义时要分配空间，所以不 能在类声明中定义。<br />
b、为了避免在多个使用该类的源文件中，对其重复定义，所在，不能在类的头文件中<br />
定义。<br />
c、静态数据成员因为程序一开始运行就必需存在，所以其初始化的最佳位置在类的内部实现。<br />
C、特点<br />
a、对相于 public,protected,private 关键字的影响它和普通数据成员一样，<br />
b、因为其空间在全局数据区分配，属于所有本类<br />
的对象共享，所以，它不属于特定的类对象，在没产生类对象时其作用域就可见，即在没有产生类的实例时，我们就可以操作它。</p>
<p>D、访问 形式<br />
a、 类对象名.静态数据成员名<br />
b、 类类型名:: 静态数据成员名</p>
<p>E、静态数据成员，主要 用在类的所有实例都拥有的属性上。比如，对于一个存款类，帐号相对<br />
于每个实例都是不同的，但每个实例的利息是相同的。所以，应该把利息设为存款类的<br />
静态数据成员。这有两个好处，第一，不管定义多少个存款类对象，利息数据成员都共享分配在全局区的内存，所以节省存贮空间。第二，一旦利息需要改变时，只<br />
要改变一次，则所有存款类对象的利息全改变过来了，因为它们实际上是共用一个东西。</p>
<p>2、静态成员函数</p>
<p>特点：<br />
A、静态成员函数与类相联系，不与类的对象相联系。<br />
B、静态成员函数不能访问非静态数据成员。原因很简单，非静态数据成员属于特定的类实 例。</p>
<p>作用：<br />
主要用于对静态数据成员的操作。<br />
调用形式：<br />
A、类对象名.静态成员函数名（）<br />
B、类类型名:: 静态成员函数名（）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/21/2010-06-21-volatile-do/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/21/2010-06-21-volatile-do/" class="post-title-link" itemprop="url">What Does Volatile Do?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-21 00:00:00" itemprop="dateCreated datePublished" datetime="2010-06-21T00:00:00+08:00">2010-06-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:05:08" itemprop="dateModified" datetime="2023-10-05T23:05:08+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>3.1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="views" content="536" />
<meta name="_wp_old_slug" content="copy" />
copy from http://www.javaperformancetuning.com/news/qotm030.shtml
<p><strong>What does <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> do?</strong></p>
<p>This is probably best explained by comparing the effects that <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> and <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> have on a method. <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> is a  field modifier, while <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> modifies code blocks and  methods. So we can specify three variations of a simple accessor using those two  keywords:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">         int i1;              int geti1() &#123;return i1;&#125;</span><br><span class="line">volatile int i2;              int geti2() &#123;return i2;&#125;</span><br><span class="line">         int i3; synchronized int geti3() &#123;return i3;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geti1()</span><br></pre></td></tr></table></figure> accesses the value currently stored in <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i1</span><br></pre></td></tr></table></figure> <em>in the current thread</em>. Threads can have local copies of variables, and  the data does not have to be the same as the data held in other threads. In  particular, another thread may have updated <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i1</span><br></pre></td></tr></table></figure> in it's thread, but the  value in the current thread could be different from that updated value. In  fact Java has the idea of a "main" memory, and this is the memory that holds the  current "correct" value for variables. Threads can have their own copy of data  for variables, and the thread copy can be different from the "main" memory.  So in fact, it is possible for the "main" memory  to have a value of 1 for <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i1</span><br></pre></td></tr></table></figure>, for thread1 to have a value of 2 for <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i1</span><br></pre></td></tr></table></figure> and for thread2 to  have a value of 3 for <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i1</span><br></pre></td></tr></table></figure> if thread1 and thread2 have both updated <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i1</span><br></pre></td></tr></table></figure> but those updated value has not yet been propagated to "main" memory or  other threads.
<p>On the other hand, <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geti2()</span><br></pre></td></tr></table></figure> effectively accesses the value  of <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i2</span><br></pre></td></tr></table></figure> from “main” memory. A <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> variable is not allowed to  have a local copy of a variable that is different from the value currently held in “main”  memory. Effectively, a variable declared <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> must have it’s data  synchronized across all threads, so that whenever you access or update the variable in any thread, all  other threads immediately see the same value. Of course, it is likely that <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> variables have a higher access and update overhead than “plain”  variables, since the reason threads can have their own copy of data is for better efficiency.</p>
<p>Well if <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> already synchronizes data across threads,  what is <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> for? Well there are two differences. Firstly <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> obtains and releases locks on monitors which  can force only one thread at a time to execute a code block, if both threads use  the same monitor (effectively the same object lock). That’s the fairly well known  aspect to <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure>. But <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> also  synchronizes memory. In fact <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> synchronizes the whole of thread  memory with “main” memory. So executing <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geti3()</span><br></pre></td></tr></table></figure> does the following:</p>
<ol>
	<li>The thread acquires the lock on the monitor for object <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this</span><br></pre></td></tr></table></figure> (assuming the monitor is unlocked, otherwise the thread waits until the  monitor is unlocked).</li>
	<li>The thread memory flushes <em>all</em> its variables, i.e. it  has all of its variables effectively read from "main" memory (JVMs can use dirty sets to optimize  this so that only "dirty" variables are flushed, but conceptually this is the same. See  section 17.9 of the Java language specification).</li>
	<li>The code block is executed (in this case setting the return  value to the current value of <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i3</span><br></pre></td></tr></table></figure>, which may have just been reset from "main"  memory).</li>
	<li>(Any changes to variables would normally now be written out to  "main" memory, but for <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geti3()</span><br></pre></td></tr></table></figure> we have no changes.)</li>
	<li>The thread releases the lock on the monitor for object <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this</span><br></pre></td></tr></table></figure>.</li>
</ol>
So where <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure> only synchronizes the value of one  variable between thread memory and "main" memory, <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> synchronizes  the value of all variables between thread memory and "main" memory, and locks and  releases a monitor to boot. Clearly <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized</span><br></pre></td></tr></table></figure> is likely to have  more overhead than <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatile</span><br></pre></td></tr></table></figure>.

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/17/5674707/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/17/5674707/" class="post-title-link" itemprop="url">微博系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-17 09:25:00" itemprop="dateCreated datePublished" datetime="2010-06-17T09:25:00+08:00">2010-06-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>195</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>貌似网上大家都使用Easytalk搭建微博系统。那东东使用php和mysql的。就是备案难了点，可以考虑放到米国。小量用户速度蛮快的，大量的用户没有测试过.<br />
…(废话ing)有个家伙做了一个IT的微博，就是贴代码麻烦了点，要先去<span class="exturl" data-url="aHR0cDovL3Bhc3RlYmluLnhuLS1jb20tencyZXI4Y3AxNGFvdmdnejRobmdj">http://pastebin.com那里发布成功<i class="fa fa-external-link-alt"></i></span>，然后再从分享那里贴进来。。。虽然<br />
webservice已经大行其道，但是真正的接口互用似乎还要等到在未来的若干年。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/17/2010-06-17-sizeof-c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/17/2010-06-17-sizeof-c/" class="post-title-link" itemprop="url">Sizeof in C++</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-17 00:00:00" itemprop="dateCreated datePublished" datetime="2010-06-17T00:00:00+08:00">2010-06-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:04" itemprop="dateModified" datetime="2023-10-06T22:54:04+08:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="the inside of sizeof
the inside of memory alignment" />
<meta name="_su_keywords" content="c++, sizeof, double, int, align,memory" />
<meta name="_su_title" content="c++, sizeof, double, int, align,memory" />
<meta name="views" content="1054" />
I use c++ in linux which is gcc version 4.4.1 (Ubuntu 4.4.1-4ubuntu9).
<p>I considered that c++ memory alignment is like the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// pseudo-code of memory alignment</span><br><span class="line">remove_all_static_varibles();</span><br><span class="line">int max= 0;</span><br><span class="line">foreach(element in struct)</span><br><span class="line">    find_the_max_memory_used(element,&amp;amp;max);</span><br><span class="line">int align = max &amp;gt; default? default: max;</span><br><span class="line">// if max memory used for element is larger than the default, use default.</span><br><span class="line">int memory = sum(memory_used(elements));</span><br><span class="line"></span><br><span class="line">if(memory%align != 0)</span><br><span class="line">// here will execute alignment!</span><br><span class="line">&#123;</span><br><span class="line">    memory = (memory/align + 1 )*align;</span><br><span class="line">&#125;</span><br><span class="line">if(memory == 0)</span><br><span class="line">    memory = 1;</span><br><span class="line">return memory;</span><br></pre></td></tr></table></figure>
<p>vc++ use #pragma_pack(n) set the default.if there are three char in a struct, like:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef struct&#123;</span><br><span class="line">	char a;</span><br><span class="line">	char b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;X;</span><br><span class="line">sizeof(X); // it will be 3</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">typedef struct&#123;</span><br><span class="line">	char a;</span><br><span class="line">	short b;</span><br><span class="line"></span><br><span class="line">&#125;Y;</span><br><span class="line">sizeof(Y); // here will be 4</span><br><span class="line"></span><br><span class="line">typedef struct&#123;</span><br><span class="line">	char a;</span><br><span class="line">	int b;</span><br><span class="line">&#125;Z;</span><br><span class="line"></span><br><span class="line">sizeof(Z); // here will be 8</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typedef struct&#123;</span><br><span class="line">	double a;</span><br><span class="line">	char b;</span><br><span class="line">&#125;W;</span><br><span class="line">sizeof(W);</span><br><span class="line">// it will be 12, the align is 4</span><br><span class="line">// when the max memory used is larger</span><br><span class="line">// than 4, it will be 4</span><br></pre></td></tr></table></figure>
<p>if the class or struct is empty, sizeof(it) will be 1.</p>
<p>But if there are static varibles in classes or structs, you can remove it!. like:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class A&#123;</span><br><span class="line">	static int a;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">sizeof(A); // it will be 1</span><br></pre></td></tr></table></figure>
<p>in class there will be many class functions. But A class is thought as A struct and many functions set. sizeof(A class) will compute the size of struct.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class ZZ&#123;</span><br><span class="line">    public:</span><br><span class="line">        ZZ()&#123;</span><br><span class="line">            int a = 3;</span><br><span class="line">            cout &amp;lt;&amp;lt; &quot;I am ZZ&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">            cout &amp;lt;&amp;lt; a&amp;lt;&amp;lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        ~ZZ()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    int c;</span><br><span class="line">&#125;;</span><br><span class="line">sizeof(ZZ); // will be 4;</span><br><span class="line">/* it is like a struct and two member functions.</span><br><span class="line">struct ZZ&#123;</span><br><span class="line">	int c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ZZ@ZZ() is name mingling</span><br><span class="line">ZZ@ZZ()&#123;</span><br><span class="line">	int a = 3;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;I am ZZ&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">        cout &amp;lt;&amp;lt; a&amp;lt;&amp;lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">ZZ@~ZZ()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p>but when we meet the virtual member functions and virtual derived class, it will be different.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/11/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/40/">40</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/13/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2017 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">帐前卒</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">1.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">24:10</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/next-boot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/bookmark.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/search/local-search.min.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin="anonymous">


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"chilly/blog_comments","issue_term":"url","theme":"github-dark"}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/comments/utterances.min.js"></script>

</body>
</html>

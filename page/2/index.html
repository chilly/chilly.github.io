<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.ico">
  <link rel="mask-icon" href="/icon.svg" color="#222">
  <meta name="google-site-verification" content="hcdiytqUGPoTW0eAaN6TWAmRfiv7IWFIIc9DKNr7Eno">
  <meta name="yandex-verification" content="eb8f01295fdccb3d">
  <meta name="baidu-site-verification" content="QoJxa8tZnO">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Times+New+Roman:300,300italic,400,400italic,700,700italic%7CRaleway:300,300italic,400,400italic,700,700italic%7COswald:300,300italic,400,400italic,700,700italic%7CWork+Sans:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chillyc.info","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.18.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="帐前卒专栏">
<meta property="og:url" content="http://chillyc.info/page/2/">
<meta property="og:site_name" content="帐前卒专栏">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="帐前卒">
<meta property="article:tag" content="有意思的代码，有意思的架构, 有趣的小说, 好看的故事, code, software, articles, novel, architect">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://chillyc.info/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>帐前卒专栏 - code, software architect, articles and novels. 代码,软件架构,博客和小说</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <!-- Global site tag (gtag.js) - Google Analytics start -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11621532-3"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6565392687771630"
     crossorigin="anonymous"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-11621532-3');
</script>
 <!-- Global site tag (gtag.js) - Google Analytics end -->
  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">帐前卒专栏</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">code, software architect, articles and novels. 代码,软件架构,博客和小说</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="帐前卒"
      src="/icon.svg">
  <p class="site-author-name" itemprop="name">帐前卒</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">792</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">736</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoaWxseQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chilly"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9jY3R0XzE=" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cctt_1"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8="><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/big/by_nc_nd.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2017/06/17/change-to-hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/17/change-to-hexo/" class="post-title-link" itemprop="url">博客迁移史</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-17 15:24:31" itemprop="dateCreated datePublished" datetime="2017-06-17T15:24:31+08:00">2017-06-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:26:52" itemprop="dateModified" datetime="2023-10-05T23:26:52+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/prose/" itemprop="url" rel="index"><span itemprop="name">prose</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/prose/blog/" itemprop="url" rel="index"><span itemprop="name">blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="CSDN-时代"><a href="#CSDN-时代" class="headerlink" title="CSDN 时代"></a>CSDN 时代</h1><p><img src="/images/change-to-hexo/csdn.jpeg" alt="CSDN"></p>
<p>最初写blog时，是在大学的时候。那时都是主站点的天下。程序员杂志影响力巨大。以程序员杂志起家的CSDN自然是程序员写作的首选。当时CSDN的竞争对手有JAVA eyes, 博客园，新浪微博等等。但是在编程方面影响力最大的还是CSDN. 所以我当时在CSDN上开创了blog, 起名帐前卒。一写就是数十年。主要是记录自己编码生涯的点点滴滴。除了如何进行编码和debug，就是电影看书、吃喝拉撒，当然也还有自己对生活的理解。现在的我再回看之前的博文，似乎总能回想起那个疯狂编码年代的故事。所以说写blog其实不是给别人看的，是给自己看的。只不过顺便兼顾了传道、授业、解惑。不过说到解惑，其实自己现在仍然很困惑。解人之惑，却解不了自己之惑。</p>
<p>当初CSDN的blog是可以自主添加一些计数器的JS脚本的。但是好景不长，总有恶人做恶:写些木马脚本什么的。所以CSDN就封禁了这功能。 当时我并没有觉得什么不妥，只不过在我的blog页面上消失了一个漂亮的计数器。</p>
<p>后来CSDN首页改版，放入了更多的文章，即使自己的文章推荐上了头条，也再也找不到在哪里了。</p>
<p>后来CSDN允许博客专家推荐自己的文章上头条，在那之后，上头条的荣誉感和胜利感也就随之消失。</p>
<p>几十年后的今天，CSDN对博客专家重新开启了自定义脚本。虽然CSDN又迈出一步，虽然我已是博客专家，但对此功能已了无兴趣。</p>
<p>现在CSDN又要求手机验证了，我都不想登陆CSDN了，就更别说在CSDN写blog了。</p>
<h1 id="WordPress时代"><a href="#WordPress时代" class="headerlink" title="WordPress时代"></a>WordPress时代</h1><p><img src="/images/change-to-hexo/Wordpress.png" alt="Wordpress"></p>
<p>godaddy进入中国了。可以申请域名了。不用再需要什么身份证、户口本、地址、电话才能申请个域名，省却了系统备案的时间和麻烦。于是就申请了chillyc.info. 为什么申请这个域名呢？嗯，其实我也是稀里糊涂的申请的。</p>
<p>我们当时几个人一起买了一个主机。主机上有我们几个人的wordpress搭建起来的blog。需要自己通过ftp上传各种php的plugins。需要自己作为admin编写博客，改写某些plugin。但是好景不长，很快就被黑掉，并植入了病毒。另外也需要主机继续购买续费。所以后来就放弃了这个wordpress搭建的blog。</p>
<p>但是搭建这个blog还是有很多的收获。首先有了自己的Google AD，后来使用自己申请的Google Analytics的获得的blog访问数据写了一篇论文。可惜后来Google被墙。AD和Analytics都需要翻墙。Google当时的这些服务又都是同步加载的。这导致blog加载的速度非常非常的慢，看客也就慢慢的流失了。不过当时并没有在chillyc.info上花主要精力。</p>
<p>Wordpress搭建blog站点的最大的问题就是没有预览功能。意味着你需要搭两个同样的wordpress服务，一个线上的一个线下的。然后再改改看看。另外当时还没有搭svn或者git，服务代码同步起来也特别麻烦。</p>
<h1 id="Jekyll-与-Octopress"><a href="#Jekyll-与-Octopress" class="headerlink" title="Jekyll 与 Octopress"></a>Jekyll 与 Octopress</h1><p><img src="/images/change-to-hexo/Octopress.jpeg" alt="Octopress"><br>再后来有了github。我开始准备将wordpress中的内容迁移到Octopress上。这是一个使用ruby写的软件服务。它将markdown的内容转变为静态html，然后再将内容传送到github上，最终通过github的域名解析变成自己的域名。这不需要自己再购买主机，省下一些银子。当时Octopress也提供了从wordpress到octopress的迁移程序。总之搞了一段时间后，终于将blog从wordpress迁移下来。其实自己并不喜欢markdown文法，虽然简单，但仍然没有wordpress的富文本编辑器简单，而且还需要各种html转义。没有鼠标点点，用vi写blog的效率还是下降了不少。还好后来渐渐习惯了vi+markdown。</p>
<p>有了自己的github库，再将chillyc.info wordpress的文章内容全部提交到了github上。自己也在Octopress的基础上修修改改：比如，将url从utf-8的汉字编码修改为了中文拼音。这种改变其实并没有提高什么google rank啥的。只是自己看着舒服了些。又如，将页面样式修改为动态的，添加一只追着骨头狂奔的狗。这改变又增加了不少blog的加载时间。</p>
<p>Octopress的问题在于：</p>
<ol>
<li>首先要来一套ruby全家桶。</li>
<li>其次生成页面的速度实在慢的要死要死的，比八爪鱼爬的还要慢。</li>
</ol>
<p>再后来我也懒得管这个blog了。因为毕竟没有什么访问量。索性还是将精力花在CSDN上。</p>
<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p><img src="/images/change-to-hexo/hexo.png" alt="Hexo"></p>
<p>从2015年开始因为V8+ES6+node,以及facebook的JS解析器啥的。JS再次火了起来。网上用JS写的服务越来越多。这次blog生成工具是hexo. 一个nodejs写成的服务。原理和Octopress一样。只不过语言换了换。</p>
<p>因为自己许多年没有在动chillyc.info上的blog。 ruby全家桶如何搭建自己已忘记的差不多了，又换了新的电脑。一切将要重新开始。那为什么不试试新的服务呢？于是使用的hexo. 很幸运的是hexo沿用了Octopress的设计。宣称简单到只要将source目录copy过来即可。我非常心动。于是下载了一套JS的全家桶，开始了前往Hexo的旅程。</p>
<p>但是这旅程实在不顺利。之前在Octopress上好好的markdown,到了Hexo上却总是报错。费劲千辛万苦改成Hexo认为合法的markdown。下一步就是找一个合适的theme. 有人推荐了pacman这个主题。这个主题的demo看起来很是不错。我使用了一下，却发现文章分类乱七八糟的。看了Hexo的官方文档才发现。其实是Hexo并不支持一篇文章多分类。这和Octopress的假设是冲突的。于是自己编写转换脚本，将分类转变为了tags。这样blog看起来就好看多了。我的blog里面还有latex。发现pacman支持的也不错。只不过需要自己先手工把过去的latex改成适合Mathjs的形式。程序员何苦为难程序员。为什么整那么多不同的格式?</p>
<p>好吧，搞定latex后，blog看起来不错了。而现在csdn上的登陆需要验证手机了。没有手机号是不是永远就不能登陆了？那我索性就把CSDN上这么多年的blog全部迁移到github上吧。找了一个Python写的csdn导出工具。把所有的CSDN的html文本转换成了markdown。然后放入到hexo。然后就hexo generate就卡死了，卡死了，卡死了…找了半天问题，发现还是因为blog篇数太多，不管hexo还是Octopress都没有对这些做过优化。写的blog越多，生成的就越慢。换句话说，不管hexo还是Octopress在github搭建这条路上都没有考虑到上万blog或者更多blog的情况。</p>
<p>后来去掉了pacman主题，速度立刻提升了不少，所以这个主题优化做的差。去掉pacman主题后，生成700篇文章从10分钟降到了1分钟。我现在使用的主题是next，性能优化的比较好。如果你只是尝鲜，或者你只是一时兴起要写blog，那随便什么主题都适合你。否则你就要仔细挑选一下主题了。我推荐next主题。虽然这个主题人用多了，就丧失了个性。但我还是推荐大家用一下。</p>
<p>搞定主题后，我又安插了Google AD和Google analytics。经过了那么多年，Google终于提供了异步加载的JS脚本。虽然我的网站访问量低，但是我仍然考虑着提升读者的访问速度。我不指望用Google AD赚到钱。但如果能赚到意外之财，我也会很开心。最近也出了简书等靠打赏存活的blog工具。但我觉得我用google AD赚到钱的概率应该比采用各种打赏的方式靠谱一些。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>为什么所有的github blog搭建方式都选择生成html? 如果直接写markdown,而在前端直接将markdown渲染成本应的样式，就没有必要把时间浪费在生成html上了。我觉得很大可能是github的原因。希望它未来会考虑将github blog做的更好。不过话又说回来，将这个功能做的更好，对它来说又有什么好处呢？除非它有更加宏伟的目标——将全世界的所有站点都迁移到github上。这样只用github搜索就足够了。不过显然这个目标太过宏伟了。</p>
<p>或许再过几年又会出来一款新的blog搭建工具。工具总是在推陈出新。所以折腾必不可少，计算机界有太多身后而身先的例子。或许某一天我们人类终将被历史淘汰，但我们也应坚持到那一天，不是吗？所以继续折腾吧。活到老就折腾到老吧。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2017/06/12/csdn-blog-export/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/12/csdn-blog-export/" class="post-title-link" itemprop="url">Csdn-Blog-Export</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-12 22:41:59" itemprop="dateCreated datePublished" datetime="2017-06-12T22:41:59+08:00">2017-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:27:40" itemprop="dateModified" datetime="2023-10-05T23:27:40+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/prose/" itemprop="url" rel="index"><span itemprop="name">prose</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/prose/blog/" itemprop="url" rel="index"><span itemprop="name">blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>因为感觉csdn的界面越来越乱了，是不是的还有各种广告。另外CSDN借工信部的名义强制要求输入手机号。像我这样根本没有手机的人，再也没有办法登陆了。所以还是把所有的blog迁移过来。从此我就再也不写csdn的blog.专心写我的这里的blog吧。</p>
<p>迁移工具从<span class="exturl" data-url="bWFpbHRvOiYjeDY3OyYjeDY5OyYjeDc0OyYjeDQwOyYjMTAzOyYjeDY5OyYjeDc0OyYjeDY4OyYjeDc1OyYjOTg7JiN4MmU7JiN4NjM7JiN4NmY7JiMxMDk7">&#x67;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#x68;&#x75;&#98;&#x2e;&#x63;&#x6f;&#109;<i class="fa fa-external-link-alt"></i></span>:gaocegege&#x2F;csdn-blog-export.git那边copy过来的。修改了一下code的生成地方和tags抽取。大家如果想将csdn的blog转换成markdown.可以参考我copy过来的这个工具。详细地址是: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoaWxseS9jc2RuX2V4cG9ydA==">csdn_export<i class="fa fa-external-link-alt"></i></span></p>
<p>先安装一下pip<br>然后使用pip 安装一下 BeautifulSoup</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install BeautifulSoup</span><br><span class="line">git clone https://github.com/chilly/csdn_export</span><br><span class="line">cd csdn_export</span><br><span class="line">./main.py -u [你的csdn的username] -f markdown</span><br></pre></td></tr></table></figure>
<p>我之前的blog是blog.csdn.net&#x2F;cctt_1。所以命令为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./main.py -u cctt_1 -f markdown</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2017/06/11/2010-07-19-catalan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/11/2010-07-19-catalan/" class="post-title-link" itemprop="url">Catalan 数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-11 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-11T00:00:00+08:00">2017-06-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:06:49" itemprop="dateModified" datetime="2023-10-05T23:06:49+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/math/" itemprop="url" rel="index"><span itemprop="name">math</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hi all,I should write this article  in Chinese. Because there are many special Math words here. Maybe I will translate this article later.</p>
<p>首先是啥米叫<code>[[catalan]]</code>数，$$h(n) &#x3D; h(0)h(n-1)+ h(1)h(n-2)+….+h(n-2)h(1)+h(n-1)h(0) ，h(0) &#x3D; h(1) &#x3D; 1$$通项公式为 $$h(n) &#x3D; \frac{1}{n+1}{C_{2n}^{n}}$$ 另外还有 $$h(n) &#x3D; h(1)h(n-1)+h(2)h(n-2)+…+h(n-2)h(2)+h(n-1)h(1), h(1) &#x3D; 1$$。其通项公式为 $$h(n) &#x3D; \frac{1}{n}{C_{2n-2}^{n-1}}$$</p>
<p>首先是括号问题，很多问题都能转换为括号匹配问题，即在任何位置，左括号的数目都要大于等于右括号的数目。然后问你给n个左括号和n个右括号，共有多少种放置方法。具体解法为：</p>
<p>分析：把左括号看作0，将右括号看作1，n个1和n个0组成的2n     位二进制数。由于等待入栈的操作数按照1‥n的顺序排列、入栈的操作数b大于等于出栈的操作数a(a≤b)，因此输出序列的总数目&#x3D;由左而右扫描由n个1   和n个0组成的2n位二进制数，1的累计数不小于0的累计数的方案种数。在2n位二进制数中填入n个1的方案数为c(2n,n),不 填 1的其余n位自动填0。从中减去不符合要求（由左而右扫描，0的累计数大于1的累计 数）的方案数即为所求。不符合要求的数的特征是 由左 而右扫描时，必然在某一奇数位2m+1位上首先出现m+1个0的累计数和m个1的累计数，此后的2(n-m)-1位上有 n-m个    1和n-m-1个0。如若把后面这2(n-m)-1位上的0和1互换，使之成为n-m个0和n-m-1个1，结果得1个由n+1个0和n-1个1组成的   2n位数，即一个不合要求的数对应于一个由n+1个0和n-1个1组成的排列。反过来，任何一个由n+1个0和n-1个1组成的2n位 二 进制数，由于0的个数多2个，2n为偶数，故必在某一个奇数位上出现0的累计数超过1的累   计数。同样在后面部分0和1互换，使之成为由n个0和n个1组成的2n位数，即n+1个0和n-1个1组成的2n位数必对应一个不符合要求的数。因而不合要求的2n位数与n＋1个0，n－1个1组成的排列一一对应。显然，不符合要求的方案数为c(2n,n+1)。由此得出 $$输出序列的总数目&#x3D;{C_2n^n}-{C_2n^{n+1}}&#x3D;\frac{n+1}{1}{C_2n^n}$$。</p>
<p>当然也可以看作第一对括号出现在什么位置，如果出现在1，2位置，则为<code>h(0)h(2n-2)</code>,出现在3,4位置为<code>h(2)h(2n-4)</code>,当然这里不可能出现在2，3位置，否则，左边h(1)是错误状态，不可以再递归做下去。所以原方程为</p>
<p>$$h(n) &#x3D; h(0)h(2n-2)+h(2)h(2n-4)+…+h(2n-4)h(2)+h(2n-2)h(0)$$，这里将h(n)替换为f(n&#x2F;2),即 $$h(n) &#x3D; f(0)f(n-1)+f(1)f(n-2)+… &#x3D; \frac{1}{n+1}{C_{2n}^{n}}$$</p>
<p>另外矩阵连乘，出入栈，人过街区问题和这个解法类似。</p>
<ol>
<li>矩阵连乘即<code>a1*a2*a3...*an</code>这样的矩阵加括号表示成对共有多少种方法。首先可以选取某个矩阵作为起始矩阵，在这个矩阵上加括号，例如a2为起始矩阵，然后就变为 $$a1(a2)a3…$$然后如果a2与a3相乘则$$a1((a2)a3)…$$看出来括号是否和刚才那个左右括号匹配的问题一样？所以这里共有2n个括号，然后求放置正确括号位置的种类有多少。因为最初的一对括号无用，所以这里其实有2n-2个括号，结果秒杀为</li>
</ol>
<p>$$ \frac{1}{n}{C_{2n-2}^{n-1}} $$ 其实就是$$g(n)&#x3D;f(2n-2)&#x3D;h(n-1)$$带入即可。</p>
<ol>
<li>下面是问n个数出入栈，共有多少种出入栈的方式？进栈看作左括号，出栈看作右括号，然后瞬间变为左右括号匹配问题。结果依旧是<br> $$\frac{1}{n+1}{C_{2n}^{n}} $$</li>
</ol>
<p> 因为第一个括号对就决定了结果的顺序，所以是2n个括号，这个与问题1有所不同。</p>
<ol>
<li>然后是人过2n个街区工作，看作方格子，即左右走向n个街区，南北走向n个街区，但是这个家伙不会穿越但是可以碰到家到办公室的对角线，问有多少种可能的道路走法。这里因为没有通过对角线，所以走了k个左右走向的街区，最多只能再走k个南北走向的街区，否则就会穿越对角线。所以可以看作是栈问题，塞进去k个数只能弹出k个数。所以结果同2.</li>
<li>凸多边形区域划分三角形的方法数有多少？划分的三角形不能重叠（除三边可以重叠外）。首先选一条基边（因为划分必然要用到基边），一个顶点。图1中选中一条基边，一个顶点后，左边剩余1条基边(红色)，右边剩余n-2条；图二中左边剩余两条基边，右边剩余n-3条。其中n为凸多边形顶点数。则有</li>
</ol>
<p>$$f(n) &#x3D; f(1)f(n-2)+f(2)f(n-3)+….+f(n-2)f(1)$$</p>
<ol>
<li>圆上选择2n个点，将这些点对连接起来，且所得n条线段不相交，求可行方法数。首先选择两个点，左边剩余0个点，右边剩余2n-2个点继续这样连接。下一次选择，左边剩余两个点，右边剩余2n-4继续选择..</li>
</ol>
<p> $$f(2n) &#x3D; f(0)f(2n-2)+f(2)f(2n-4)+…$$令$$f(2n) &#x3D; h(n)$$则$$ f(2n) &#x3D; h(0)h(n-1)+h(1)h(n-2)+…&#x3D;\frac{1}{n+1}{C_{2n}^{n}} $$</p>
<ol>
<li>n个节点构造多少种不同的二叉树。这个问题可以转换为括号问题，与连乘不同的是，它的第一对括号决定了它的树根。当选择一个节点，左边可以有0个，右边有n-1个；左边有1个，右边n-2个….所以</li>
</ol>
<p> $$g(n) &#x3D; f(2n) &#x3D; h(n) &#x3D;\frac{1}{n+1}{C_{2n}^{n}} $$</p>
<p>下面转载冷笑话：</p>
<p>从前有棵树，叫高数，树上挂了很多人<br>很久很久以前，在拉格朗日照耀下，有几座城：分别是常微分方城和偏微分方城这两座兄弟城，还有数理方程、随机过城。从这几座城里流出了几条溪，比较著名的 有：柯溪、数学分溪、泛函分溪、回归分溪、时间序列分溪等。其中某几条溪和支流汇聚在一起，形成了解析几河、微分几河、黎曼几河三条大河。</p>
<p>河边有座古老的海森堡，里面生活着亥霍母子，穿着德布罗衣、卢瑟服、门捷列服，这样就不会被开尔蚊骚扰，被河里的薛定鳄咬伤。城堡门口两边摆放着牛墩和道 尔墩，出去便是鲍林。鲍林里面的树非常多：有高等代树、抽象代树、线性代树、实变函树、复变函树、数值代树等，还有长满了傅立叶，开满了范德花的级 树…人们专门在这些树边放了许多的盖(概)桶,高桶，这是用来放尸体的，因为，挂在上面的人，太多了，太多了…</p>
<p>这些人死后就葬在微积坟，坟的后面是一片广阔的麦克劳林，林子里有一只费马，它喜欢在柯溪喝水，溪里撒着用高丝做成的ε-网，有时可以捕捉到二次剩鱼。<br>后来，芬斯勒几河改道，几河不能同调，工程师李群不得不微分流形，调河分溪。几河分溪以后，水量大涨，建了个测渡也没有效果，还是挂了很多人，连非交换代 树都挂满了，不得不弄到动力系桶里扔掉。<br>有些人不想挂在树上，索性投入了数值逼井（近）。结果投井的人发现井下生活着线性回龟和非线性回龟两种龟：前一种最为常见的是简单线性回龟和多元线性回 龟，它们都喜欢吃最小二橙。</p>
<p>柯溪经过不等市，渐近县和极县，这里房子的屋顶都是用伽罗瓦盖的，人们的主食是无穷小粮。</p>
<p>极县旁有一座道观叫线性无观，线性无观里有很多道士叫做多项士，道长比较二，也叫二项士。线性无观旁有一座庙叫做香寺，长老叫做满志，排出咀阵，守卫着一 座塔方。一天二项士拎着马尔可夫链来踢馆，满志曰：“正定！正定！吾级数太低，愿以郑太求和，道友合同否？”二项士惊呼：“特真值啊！”立退。不料满志此 人置信度太低，不以郑太求和，却要郑太回归。二项式大怒在密度函树下展开标准分布，布里包了两个钗钗，分别是标准钗和方钗。满志见状央（鞅）求饶命。二项 式将其关到希尔伯特空间，命巴纳赫看守。后来，巴纳赫让其付饭钱，满志念已缴钱便贪多吃，结果在无参树下被噎死（贝叶斯）。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2017/05/04/71158421/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/05/04/71158421/" class="post-title-link" itemprop="url">架构之路：从5000年传统到现代设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-05-04 10:07:00" itemprop="dateCreated datePublished" datetime="2017-05-04T10:07:00+08:00">2017-05-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:34:52" itemprop="dateModified" datetime="2023-10-05T12:34:52+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>从五千年前刀耕火种发展到现今的文明。架构发挥着不可磨灭的作用。架构主要是为了解放生产力，发展和推动生产力的变革。架构是一门学问，更是一门有艺术。但这种艺术不是给自己欣赏的，也不应该是阳春白雪。这种艺术必须是普罗大众，芸芸众生所能熟知了解。这样才能真正的实现整个社会的生产力的提高。本文将详细的介绍整个文明过程中的架构的发展模式。而现今架构已经发展到抽象软件架构。软件架构乘借互联网之风更大程度上推动了整个社会的变革。</p>
<p><img src="http://img.blog.csdn.net/20170504100458374?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2N0dF8x/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="下面才是正题"><a href="#下面才是正题" class="headerlink" title="下面才是正题"></a>下面才是正题</h2><p>嗯。我实在编不下去了。果真距离大湿之路还是很遥远的。就说几句实话，软件架构不要太让人费解。即使你觉得这架构太好了，基本不用改就能实现下一个功能了，也不要沾沾自喜。如果这架构让太多的人费解，那一定不容易推广，不容易推广也就意味着最终会被淘汰。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2017/05/03/71156005/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/05/03/71156005/" class="post-title-link" itemprop="url">畅想网站实名制</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-05-03 22:12:00" itemprop="dateCreated datePublished" datetime="2017-05-03T22:12:00+08:00">2017-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:34:52" itemprop="dateModified" datetime="2023-10-05T12:34:52+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>现在csdn也需要实名制了。现在的网站应国家要求都要提供手机号进行绑定了。这种实名制还是太虚拟化。</p>
<p>我现在想了一下关于网站真正实名制的设想。首先呢，必须要实体认证，手机号这种仍然属于虚拟范畴。</p>
<p>实体认证是：</p>
<ul>
<li>生理特征（DNA, 指纹，虹膜，掌纹，面孔） </li>
<li>关系特征（七大姑八大姨，九族，亲朋好友） </li>
<li>地理特征（住址，公司，吃饭场所，行走路线） </li>
<li>物质特征（资产，负债等）</li>
</ul>
<p>例如我们使用地理、物质、关系特征来做一个实名规则。</p>
<p>设计这样一条实名制注册的路径。用户注册本网站时，需要填入自己的姓名，住址，亲友姓名，亲友地址，并同时用自己的银行卡向本网站的指定账号汇入不低于一万元。本网站<br>收到现金后，扣除少量邮寄费用，再向用户的地址和用户亲友的地址寄出等份的钱。例如收到10000，邮寄费用是50.<br>用户填了1个自己的和三个亲友的地址。那每个地址会被寄出(10000-50)&#x2F;4&#x3D;2487.5元。</p>
<p>我想该用户一定会认真填写正确的地址。否则注册一次至少会亏损2487.5元。</p>
<p>我们再来用生理特征、亲友特征以及物质特征做一个实名规则。这个规则也很简单。</p>
<p>用户注册网址时，先向本网站汇入不低于10000元。然后再依次录入自己的10个指纹，以及三个亲友各10个指纹。三个月之后，再依次录入40个指纹，本网站再打款给<br>用户。</p>
<p>我想该用户一定会好好的录入自己的指纹。</p>
<p>下面我们只用物质特征来做一次实名注册。大家一定要注意看。这里是难点。</p>
<p>用户注册网址时，先用本人账号向本网站汇入不低于10000元不高于20000（金额可以随机），然后再以周利率30%从本网站借出不低于1000元，不高于2000<br>元的随机金额。三个月后的某一天，用户再汇入的金额必须等于应还款金额减去刚开始汇入的随机金额。这才算注册成功。只有用户向法院申请起诉，才会退还。</p>
<p>我想该用户一定会好好学数学。</p>
<p>我想这一套规则推广迅速。不出一年就可以实现全面实名制了。</p>
<p>感谢大家看我一本正经的胡说八道。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2017/03/24/52927656/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/24/52927656/" class="post-title-link" itemprop="url">NVIDIA GPU 2016</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-03-24 09:25:00" itemprop="dateCreated datePublished" datetime="2017-03-24T09:25:00+08:00">2017-03-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>是几月份去参加的来着？我已经忘记了。<br>我记得GPU就是用来做图形处理的。做着做着就变成并行计算了。虽然单线程的运算能力不及CPU，但是并发能力却胜CPU.</p>
<p>对了这次大会没有看到Intel的人，唉，都没有人来砸场子。</p>
<p>在下面参观了VR技术，现在做的还很有限。必须使用三点定位，也就是应该有有两个定位器在两个角上。然后再用头盔进行三点定位。手柄的感应做的也很好。以及头盔中视频<br>做的也不错。</p>
<p>以后的发展方向是VR定位技术，VR头盔的太重。未来可能是眼镜而不是头盔，当然也可能是裸眼3D效果。未来手柄意义可能不大，可能就是一个架子用来对应虚拟化场景的<br>。</p>
<p>VR这个的发展还是很迅猛，应该是未来发展的方向。不过未来还可以做的更好。因为现在场景基本上都是定点的。如果人移动起来可能仍然有各种问题。因为三点静止定位难度<br>系数还是比较低的。所以现在大部分游戏场景就是定在一个地点。不会让你到处走动。不过我相信未来应该有大的发展。</p>
<p>超算或者并行计算最主要的问题在于程序能否并行化。以及并行化后能否有效的减少计算时间。这两个问题一个是涉及到基本的程序流程，一个是代价成本问题。一个运行时间不<br>长，并且使用次数不多的程序，将其修改为并行化的程序的代价可能远远超过了之前运行的总时间。所以事情总是要权衡考虑。</p>
<p>超算对于计算量大的程序并不是万能灵药。需要你的程序适配超算才能真正的发挥效果。我曾见过某些程序运行在普通PC上效率是超算的数倍。因为超算重要的是核多，而不是<br>主频高。</p>
<p>GPU vs CPU, 超算 vs 普通PC, 这个类比就是外包公司 vs 公司里自己养的开发团队.是否好用，是否成本低。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2016/09/13/52530596/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/09/13/52530596/" class="post-title-link" itemprop="url">阿里月饼门 vs 阿里价值观</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-09-13 23:16:00" itemprop="dateCreated datePublished" datetime="2016-09-13T23:16:00+08:00">2016-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天下午被朋友圈刷屏了。大量的月饼。</p>
<p>月饼、月饼、月饼…</p>
<p>这事情是阿里内部的事情。开除谁，留谁都是阿里的决定。</p>
<p>因为那几个开除抢月饼的是因为阿里的价值观。<br>所以我仔细研究了一下阿里的价值观。发现一个重大问题： ** 根本与公司的价值没有半毛钱的关系 ** 。</p>
<p>也就是说： ** 即使没有给阿里赚到钱，即使给阿里抹黑，即使损害了阿里的口碑和资产，但是符合了那几个核心价值观，仍然被认为是阿里好员工。 **</p>
<p>这套体系真tm有趣。</p>
<p>如果你不信的话，那几个直接导致“月饼门”爆发的人。包括阿里的HR、第一个爆出“月饼门”的人、将截图发给报社记者的人、阿里的公关们，怎么一个都没有被开除呢？</p>
<p>你们知道吗？“月饼门”直接导致互联网程序员的集体吐槽。甚至有人表示要劝阻想去阿里的程序员。这对阿里是多大的损害？截个图：</p>
<p><img src="http://img.blog.csdn.net/20160913231015028" alt="这里写图片描述"></p>
<p>作为管理者，是不是应该反思一下HR和IT民工们这种相互掐架以及其间的政治斗争。如果真要开除的话，要么全开除；要么全部留下；要么只把HR开除了。否则 **<br>我实在无法想象一家只有HR的IT公司是怎样的公司 ** 。</p>
<p>** 我倒是鼓励HR们去阿里的。技术人员你们还是请三思吧。 **</p>
<p>另外国内外的安全问题非常严峻。阿里这种公司内部系统如此容易就被攻克。我们有什么理由轻易相信这家公司对外开放的产品呢？</p>
<p>另外我们再深入的考虑一下阿里到底出了什么问题。</p>
<ol>
<li>月饼为什么会有剩余？是HR没有统计好人数。还是市场部乱采购？还是本身规划好的活动？ </li>
<li>月饼真的是一人一份吗？是否有剩余月饼先被HR、高层管理者、市场采购者先拿走一部分？ </li>
<li>谁负责的月饼秒杀活动？为什么没有考虑到脚本抢购？ </li>
<li>谁开发的月饼秒杀，为什么不和淘宝的秒杀一样？不会自动跳转到付款页面？怎么不复用代码？ </li>
<li>秒杀活动有验证码，为什么使用的是有安全隐患的验证码？ </li>
<li>阿里内部系统没有验证码组件吗 ？ </li>
<li>月饼秒杀活动到底有没有猫腻。强烈要求公开源代码包括但不限于数据库的各种配置。 </li>
<li>强烈要求公开存储在数据库中所有月饼购买者的信息。看是否有人购买多次但是未付款。 </li>
<li>是否有人收购或者倒卖月饼？是否有人要求周围同事帮忙抢购？这些人都不符合阿里的价值观。请查证。</li>
</ol>
<p>所以阿里的管理者们你们没有任何反思吗？阿里作为一家活了这么多年的公司，秒杀系统应该是常用的、验证码应该是常用的。但是代码却未能复用。这说明了什么 ？</p>
<p>我抱着唯恐天下不乱的心态看这个“月饼门”的问题。写篇blog真是痛快。</p>
<p>我发现了漏洞，我会抢月饼吗？</p>
<p>不会。</p>
<p>因为我不喜欢吃月饼。</p>
<p>不过我可能会把如何使用漏洞写到blog里面，让其他人去抢。</p>
<p>如果不知道“月饼门”是什么。下面是“月饼门”的知乎介绍：<br><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzUwNjAwMzAx"> https://www.zhihu.com/question/50600301
<i class="fa fa-external-link-alt"></i></span></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2016/09/09/52491026/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/09/09/52491026/" class="post-title-link" itemprop="url">谈谈容器技术</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-09-09 23:39:00" itemprop="dateCreated datePublished" datetime="2016-09-09T23:39:00+08:00">2016-09-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先呢，上台演讲的人均认为容器不是虚拟化，两者不等价。</p>
<blockquote>
<p>嗯，是呀。如果等价的话，这应该叫虚拟化技术大会了。</p>
</blockquote>
<p>演讲者均认为这两者的区别在于：容器是应用的包裹。虚拟化是操作系统的包裹。</p>
<blockquote>
<p>这就是为什么我收快递总是有那么多层包裹。最后里面的玻璃杯还是tm的碎了。原因？原因可能是快递小哥扔了一下。所以需要商家再增加更多的包裹。</p>
</blockquote>
<p>容器既然是应用的包裹。那么理所当然想要管理应用的生命周期。想要监控应用的状态。想要更好的管理和调度应用本身。</p>
<blockquote>
<p>你们有没有先问问应用想不想被包裹呀…</p>
</blockquote>
<p>容器，你可以理解为应用运行的环境。现在这个环境可以非常容易的迁移。这种迁移不局限于其物理位置。应用可以在一个机器中的相同磁盘的不同扇区之间移动，后来可以在不<br>同磁盘之间移动，再后来可以在同一集群的不同机器之间移动，再后来在不同的机房之间移动。</p>
<blockquote>
<p>可移植是软件的一个属性。现在因为容器，这个属性成为普适属性。这当然是件好事。</p>
</blockquote>
<p>因为有了容器。假设我们认为容器和之上的应用并没有状态。或者是初始状态即可。那么我们就获取到软件的可扩展性。容器和之上的软件可以不断的复制以适应规模的需求。</p>
<blockquote>
</blockquote>
<p>这种假设很理想。实际上这并不是软件研发过程中非常重视的事情。非常重视的事情是你开发出来的软件能不能分布式部署。是否可以通过多部署来线性的增强软件急需的能力。</p>
<blockquote>
</blockquote>
<blockquote>
<p>显然容器的开发者们寄希望于应用的开发者都可以胜任这项事情。呃……借用80&#x2F;20原则的话，就是80%的开发者都不能胜任这件事情。另外20%的开发者不会在8<br>0%的业务需求中考虑这件事情。</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>以上的观点可能会被80%的开发者认同或者反对。</p>
</blockquote>
<p>软件行业的未来会像汽车制造厂一样。流水线的装配各种零件，然后制造出来一款成熟的软件。</p>
<blockquote>
<p>据我所知，任何一款成熟的软件只要通过ctrl+c , ctrl+v 就可以制造出来另一款成熟的软件。呃……现在流行的方法可能是使用git&#x2F;fork.<br>我有了车子，就能制造车子。何必要流水线呢？</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>其实我很想要一款6个轮子的车子。但是万恶的黑心厂商只造4个轮子的。只有军方才有6个轮子的车子用。未来，我的软件中就不能多加一个功能吗？就不能修改一个流程<br>吗？就不能不用UDP&#x2F;TCP吗? 更可笑的在于，我的车子就不能随便换个大奔的logo吗？</p>
</blockquote>
<p>容器可以让运维更加轻松。效率提高</p>
<blockquote>
<p>这我举双手赞同。当然运维需要先熟悉一下各个操作系统的命令，再熟悉一下各个PAAS的组件，以及容器相关的命令。另外如果容器系统&#x2F;PAAS&#x2F;OS挂掉了，需要<br>知道到底哪些组件出了问题，以及如何恢复。</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>我们从小学到现在一直学习那么多繁杂的知识，不就是为了让自己过的轻松一些吗？咳咳……来，再让我翻一翻小学奥数题虐一虐面试者~</p>
</blockquote>
<p>让我们一键式的部署来管理应用吧~</p>
<blockquote>
<p>在这之前先多键式把配置搞定。…嗯…编译出了问题…不能翻墙…先搭建一个vpn…gcc版本好像太低了…嗯…再配个内部域名吧…等等…权限还要设置一下…ldap<br>怎么设来着?…还需要copy一些私钥…嗯…下班了…明天再弄吧…</p>
</blockquote>
<p>总结总结：</p>
<blockquote>
<p>下面是十万个为什么时间：</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>为什么开发者总是为难开发者?<br>为什么开发者总是为难非开发者?<br>为什么非开发者总是为难开发者?</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>再问一个简单的问题：<br>为什么容器技术不能成为自容器？和容器中的应用一样发布、部署?</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>该问题的简单答案：<br>太累了</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>不，我并不是觉得容器技术不好。也不是觉得现在的运维方案完全够用。我是觉得容器技术还应该向我指出的方向发展一下。</p>
</blockquote>
<p>想想应该取个好点的标题。</p>
<p>再加一个图片吧。<br><img src="http://img.blog.csdn.net/20160910095540087" alt="这里写图片描述"></p>
<p>再修改一下标题..z</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2016/07/02/51388435/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/07/02/51388435/" class="post-title-link" itemprop="url">发送垃圾邮件的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-07-02 14:59:00" itemprop="dateCreated datePublished" datetime="2016-07-02T14:59:00+08:00">2016-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>很多人问我，这个功能需要给用户发送一封注册&#x2F;激活邮件，这封邮件不要发送到用户的垃圾邮件中。</p>
<p>简单的说：<br>不能！！<br>不能！！<br>不能！！</p>
<p>重要事情说三遍。<br>复杂的说：</p>
<blockquote>
<p>一封邮件在某个时刻发送到某个用户，可能不是垃圾邮件。但绝对不能保证这封邮件在未来的某个时刻发送给另外一个用户不会变成垃圾邮件。</p>
</blockquote>
<p>很多人问我，这个功能发送的邮件为什么用户没有看到。</p>
<p>简单的说：</p>
<blockquote>
<p>这个功能发送的邮件被用户邮箱屏蔽了。</p>
</blockquote>
<p>复杂的说：</p>
<blockquote>
<ol>
<li>检查一下用户的邮箱是否正确</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>邮件中是否有高频垃圾词汇：例如发票，彩票，中奖，邀请</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>是否文字太少，图片太多</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>是否email中没有实质内容</li>
</ol>
</blockquote>
<blockquote>
<ol start="5">
<li>是否email中只有超链接地址。</li>
</ol>
</blockquote>
<blockquote>
<ol start="6">
<li>是否携带了一些可执行程序的附件</li>
</ol>
</blockquote>
<blockquote>
<ol start="7">
<li>邮件内容是否过大。附件是否过大</li>
</ol>
</blockquote>
<blockquote>
<ol start="8">
<li>发送方的邮件是否通过认证的邮件服务器发送</li>
</ol>
</blockquote>
<blockquote>
<ol start="9">
<li>发送方的email是否已经被对方列为垃圾邮件</li>
</ol>
</blockquote>
<blockquote>
<ol start="10">
<li>发送方的email中的内容是否曾被对方列为垃圾邮件</li>
</ol>
</blockquote>
<blockquote>
<ol start="11">
<li>发送方的邮件服务器ip是否被加入到对方邮件的黑名单</li>
</ol>
</blockquote>
<p>邮件的投递机制：</p>
<p>应用程序 &#x3D;&gt;  本地邮件服务器网关  &#x3D;&gt; 目标邮件服务器网关</p>
<p>假如应用程序正常投递了本地邮件服务器。不代表这邮件能从本地邮件服务器发给目标服务器，也不代表本地邮件服务器能让目标服务器接收，更不代表目标服务器能把这封邮件<br>展现到用户的收件箱中。每每遇到这种链式的请求感觉都是头大。</p>
<p>有机制降低成为垃圾邮件的几率吗？<br>简单说:</p>
<blockquote>
<p>非垃圾内容，不套用同一个模板内容，低频率发送可以降低垃圾邮件的几率。</p>
</blockquote>
<p>复杂点说：</p>
<blockquote>
<p>1. 要突破反垃圾邮件规则。首先你得是非垃圾邮件。或者是还未曾出现的垃圾邮件形式。所以要创新。要不断突破，所以不要使用同一套模板内容。<br>2. 将本地邮件服务器的反垃圾邮件规则禁用掉。这样可以保证从你本地邮件服务的发送率是100%。<br>但是如果你的本地邮件服务器被列入垃圾邮件黑名单。那这个ip发出去大概率会变成垃圾邮件了。<br>3. 一般来说如果发送email和接收email 在同一个域名下。例如 发送者是 <span class="exturl" data-url="bWFpbHRvOiYjOTc7JiM2NDsmIzQ5OyYjNTQ7JiM1MTsmI3gyZTsmI3g2MzsmIzExMTsmI3g2ZDs=">&#97;&#64;&#49;&#54;&#51;&#x2e;&#x63;&#111;&#x6d;<i class="fa fa-external-link-alt"></i></span>  接收者是 <span class="exturl" data-url="bWFpbHRvOiYjeDYyOyYjeDQwOyYjNDk7JiM1NDsmI3gzMzsmIzQ2OyYjeDYzOyYjeDZmOyYjMTA5Ow==">&#x62;&#x40;&#49;&#54;&#x33;&#46;&#x63;&#x6f;&#109;<i class="fa fa-external-link-alt"></i></span> 那么一般都不会被邮件<br>服务器直接屏蔽掉。最坏的情况也就是放到垃圾邮件箱中。所以如果可以，尽量和接收者使用同一个邮件服务器。这会带来开发的难度，也无法解决企业邮箱和私人域邮箱的问题<br>。</p>
</blockquote>
<p>总之，发送邮件的到达率一定不是100%。所以只要能正常收到一封邮件，就算该功能正常。就不要再纠结：为什么有的人没有正常的收到邮件？</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2016/03/28/50995490/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/03/28/50995490/" class="post-title-link" itemprop="url">Fastjson 定制化解析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-28 10:28:00" itemprop="dateCreated datePublished" datetime="2016-03-28T10:28:00+08:00">2016-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近写了一个简单的定制解析。</p>
<p>fastjson 解析 Map key value时有bug.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static class KVPair&lt;K,V&gt; &#123;</span><br><span class="line">        private K key;</span><br><span class="line">        private V value;</span><br><span class="line">        public KVPair()&#123;&#125;</span><br><span class="line">        public KVPair(K key, V value)&#123;</span><br><span class="line">            this.key = key;</span><br><span class="line">            this.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">        public K getKey() &#123;</span><br><span class="line">            return key;</span><br><span class="line">        &#125;</span><br><span class="line">        public void setKey(K key) &#123;</span><br><span class="line">            this.key = key;</span><br><span class="line">        &#125;</span><br><span class="line">        public V getValue() &#123;</span><br><span class="line"></span><br><span class="line">            return value;</span><br><span class="line">        &#125;</span><br><span class="line">        public void setValue(V value) &#123;</span><br><span class="line">            this.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这是一个简单的 KeyValue 类。这个类被fastjson解析出来的结果是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">        KVPair&lt;String, String&gt; kv = new KVPair&lt;String, String&gt;(&quot;aaa&quot;, &quot;bbb&quot;);</span><br><span class="line">        System.out.println(JSON.toJSONString(kv));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">输出结果为：</span><br><span class="line">&#123;&quot;key&quot;:&quot;aaa&quot;,&quot;value&quot;:&quot;bbb&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>在fastjson 1.1.23 版本时， 只要改动一下 setValue() 这个方法，就可以得到这样的解析结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">改动后的 setValue(V value) 方法为：</span><br><span class="line"></span><br><span class="line">public V setValue(V value) &#123;</span><br><span class="line">      this.value = value;</span><br><span class="line">      return this.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出结果为：</span><br><span class="line">&#123;&quot;aaa&quot;:&quot;bbb&quot;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这明显是 fastjson的bug。所以在1.1.46版本，已经不存在这个问题了。不管如何变化 setValue()函数，最后的输出结果仍然为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">&#123;&quot;key&quot;:&quot;aaa&quot;,&quot;value&quot;:&quot;bbb&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>现在问题来了。我更希望解析为下面的这种。 &#96;&#96;&#96;</p>
<pre><code>&#123;&quot;aaa&quot;:&quot;bbb&quot;&#125;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">这样占用的资源更少，并且也很清楚的表达了意思。这怎么写？fastjson提供的specialConfig 来提供特殊的序列化配置。  </span><br><span class="line">首先我们先对这个class创建一个特殊的序列化方法：</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>public static final SerializeConfig JSON_WRITE_CONFIG = new SerializeConfig();
    static &#123;
        JSON_WRITE_CONFIG.put(KVPair.class, new KVPairSerailzer());
    &#125;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">然后我们来构造这个特殊的序列化类：</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>public class KVPairSerailzer implements ObjectSerializer&#123;

    @SuppressWarnings(&quot;rawtypes&quot;)
    @Override
    public void write(JSONSerializer serializer, Object object, Object fieldName, Type fieldType) throws IOException &#123;
        
        SerializeWriter out = serializer.getWriter();
        if (object ==null) &#123;
            return ;
        &#125;
        KVPair pair = (KVPair)object; 
        out.write(&quot;&#123;&quot;);
        write(out,pair.getKey());
        out.write(&quot;:&quot;);
        write(out,pair.getValue());
        out.write(&quot;&#125;&quot;);
    &#125;
    
    public void write(SerializeWriter out, Object value) &#123;
        if (value == null) &#123;
            return;
        &#125; else if (value instanceof Integer) &#123;
            out.writeInt((Integer)value);
        &#125; else if (value instanceof Long) &#123;
            out.writeLong((Long)value);
        &#125; else if (value instanceof String) &#123;
            out.write(&quot;\&quot;&quot;);
            out.write((String)value);
            out.write(&quot;\&quot;&quot;);
        &#125; else if (value instanceof Double) &#123;
            out.write(Double.toString((Double)value));
        &#125; else if (value instanceof Float) &#123;
            out.write(Float.toString((Float)value));
        &#125; else &#123;
            throw new RuntimeException(&quot;not support value:&quot;+value);
        &#125;
    &#125;

&#125;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">fastjson的逻辑是： 开始要传入一个序列化配置。这个序列化配置中有针对各个类如何进行序列化的子类(也就是映射关系)。如果我们将JSON_WRITE_C</span><br><span class="line">ONFIG传入到序列化过程中，那么针对 KVPair.class这个类，就可以使用KVPairSerialzer()进行序列化。KVPairSerialze</span><br><span class="line">r在这个类需要继承ObjectSerializer, 重要的是重构这个方法：</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>public void write(JSONSerializer serializer, Object object, Object fieldName, Type fieldType)
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">这里只要获取  serializer  .getWriter()，然后将序列化后的字符串写入到writer中就结束了。SerializerWriter</span><br><span class="line">其实就是一个可变长char数组,细节没有什么好讲的。</span><br><span class="line"></span><br><span class="line">另外 1.1.46 之前的版本如果不希望将某些field不放在序列化后的json中，需要加入一个</span><br><span class="line">实现了PropertyPreFilter的类才行。例如下面这个类：</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>public class FieldJsonIgnoreFilter implements PropertyPreFilter  &#123;
    private Set&lt;String&gt; excludes;

    @Override
    public boolean apply(JSONSerializer serializer, Object object, String name) &#123;
        if(object instanceof ComputerCluster) &#123;
            return !excludes.contains(name);
        &#125;
        return true;
    &#125;
    public FieldJsonIgnoreFilter() &#123;
        this.excludes = Sets.newHashSet();
        
    &#125;
    public void add(String excludeFieldName) &#123;
        excludes.add(excludeFieldName);
    &#125;
    
    public static final FieldJsonIgnoreFilter FIELD_JSON_IGNORE_FILTER = new FieldJsonIgnoreFilter();
    static &#123;
        FIELD_JSON_IGNORE_FILTER.add(&quot;aaa&quot;);  // 如果fieldName 为 aaa 则不进行序列化。
        FIELD_JSON_IGNORE_FILTER.add(&quot;bbb&quot;);
        FIELD_JSON_IGNORE_FILTER.add(&quot;ccc&quot;);
        
    &#125;
&#125;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.1.46版本之后只需要在在field上面加入Annotation.就可以实现上面的效果。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>@JSONField(serialize=false)
private String aaa;
</code></pre>
<pre><code>
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/80/">80</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2017 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">帐前卒</span>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  






  




<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"chilly/blog_comments","issue_term":"url","theme":"github-dark"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>

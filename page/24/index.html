<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.ico">
  <link rel="mask-icon" href="/icon.svg" color="#222">
  <meta name="google-site-verification" content="hcdiytqUGPoTW0eAaN6TWAmRfiv7IWFIIc9DKNr7Eno">
  <meta name="yandex-verification" content="eb8f01295fdccb3d">
  <meta name="baidu-site-verification" content="QoJxa8tZnO">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Times+New+Roman:300,300italic,400,400italic,700,700italic%7CRaleway:300,300italic,400,400italic,700,700italic%7COswald:300,300italic,400,400italic,700,700italic%7CWork+Sans:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chillyc.info","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.18.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":20,"unescape":false,"preload":false}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/config.min.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="帐前卒专栏">
<meta property="og:url" content="http://chillyc.info/page/24/">
<meta property="og:site_name" content="帐前卒专栏">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="帐前卒">
<meta property="article:tag" content="有意思的代码，有意思的架构, 有趣的小说, 好看的故事, code, software, articles, novel, architect">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://chillyc.info/page/24/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/24/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>帐前卒专栏 - code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/rss2.xml" title="帐前卒专栏" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <!-- Global site tag (gtag.js) - Google Analytics start -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11621532-3"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6565392687771630"
     crossorigin="anonymous"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-11621532-3');
</script>
 <!-- Global site tag (gtag.js) - Google Analytics end -->
  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">帐前卒专栏</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-feeds"><a href="/rss2.xml" rel="section"><i class="fa fa-feed fa-fw"></i>feeds</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="帐前卒"
      src="/icon.svg">
  <p class="site-author-name" itemprop="name">帐前卒</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">798</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoaWxseQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chilly"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9jY3R0XzE=" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cctt_1"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8="><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/big/by_nc_nd.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/17/5742476/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/17/5742476/" class="post-title-link" itemprop="url">诸神之战</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-17 20:04:00" itemprop="dateCreated datePublished" datetime="2010-07-17T20:04:00+08:00">2010-07-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>one day somebody’s gonna  have to make a stand.</p>
<p>one day, somebody’s gonna have to say enough.</p>
<p>老渔夫说出这么有哲理的话出来.是抱怨呢?还是just say to his son.<br />
不过一般说这话的人都很难第一个站出来.否则也就不会说这就话了.因为他使用了somebody而不是…I.但是这话本身在这场电影里挺有气势的.</p>
<p>I never understood the gods, but even I don’t question that  you are saved for<br />
some reason. And some day, that reason, is gonna take you far away from here.</p>
<p>换而言之,每个人呆在这个地球上都是有理由的.当然有可能是配角,上来便game over. 也有可能是主角,到最后怎么都不会game<br />
over.所以努力活着…该over的时候就认命.</p>
<p>I can do this as a man.这话是鄙视人类还是鄙视要做的这件事本身呢? or both of them.</p>
<p>your journey does not  end well. Fate has spoken.女巫说了这样的话.加入相信,那就必死无疑.不相信,或许还能<br />
证明女巫说错了.想到了算命的.没有什么准不准,自己把握着自己的命运.其实女巫说只有美杜莎可以杀死海妖,这事情我早就知道了.惊奇的发现拍片人的智商依旧那么低.<br />
当然如果他们早就知道,估计就没有女巫那一场戏了.</p>
<p>I’d rather die in the mud with those men, than live forever as a<br />
God.其实做God挺好…推荐他先看一下上帝也疯狂.</p>
<p>we live, we fight and we die for each other.生死患难,或许就是这句话的意思.</p>
<p>I have everything I need. Right here.主角这人其实活得很high…啥叫知足者常乐.</p>
<p>其实这部影片写的希腊神话被编剧改的面目全非.不过希腊神话就是神话,几乎所有神话都可以改写来改写去的.看电影其实是看看编辑的想象力.只不过我很好奇…美杜<br />
莎跟所有编剧都有仇…不杀死她咋都没有办法完成任务.</p>
<p>这部影片中要献祭的公主其实就是仙女座,男主角是英仙座,皇后是仙后座,国王是仙王座.海怪是鲸鱼座.我终于理解日本人为啥要杀鲸鱼了…这是几千年的仇恨呀…</p>
<p>总体评价:</p>
<p>场面宏大,打斗火爆.话语有时很激情.配角比主角更出色.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/16/5738744/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/16/5738744/" class="post-title-link" itemprop="url">念念有词</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-16 09:22:00" itemprop="dateCreated datePublished" datetime="2010-07-16T09:22:00+08:00">2010-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>696</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>有许多其实开始就知道即使尽力也很难实现。所以在结果出来之时，我还是询问下是否尽力了。尽力而为或者与虽败尤荣是同义词，只不过一个是在之前说，另外一个是在之后说<br />
。说尽力是真话，反正也可以作为幌子。真与假只有自己评定。这是一份诚信的答卷，可是仍然可以写不诚信的答案。机会给了又给却还是不一定有机会。人何必执着，没有必要<br />
为一个信念而活，就如同不要在一颗树上吊死一样。于是我说，那就在两棵树上吊死好了…都是死掉还分什么多少？墓葬的人可曾想到？…但是人的确是执着的，结果就<br />
沦为固执。本来就是度的问题，结果因为不可量化而导致不同的结局。当然要看结局是什么。所有人都是结局论者，因为历史中没有假设。自己也是极端主义者，因为假设了所有<br />
的人。运气是实力的一部分，我很赞同。因为在对的地点遇到对的人做对的事情本来就是攒了许多人品的运气。师兄的杯子留给了我，里面是黑黑的茶垢还有数不尽的细菌和病毒<br />
，我准备用它来养花。但是首先要将它戳个洞。事情总要有先决条件，没有的话就是想到也做不成。因为我这里没有锥子。真实世界和计算机世界有太多不同，这就是许多技术牛<br />
人至今仍然默默无闻的原因，这也是许多出了名的往往不是技术牛人的原因。混是很好的词，它反映了当今社会的主流趋势。所以即使你不想同流合污，也必须混成非主流。呓语<br />
有终但无始。散文形散而意不散，我的形散意也散。真想将此文当资格评审卷考一下语文老师们。他们是无论如何也揣摩不出我的深层含义，当然你们也一样。这让我想到说的所<br />
有话都是歧义句，我怎么可能有全部理解正确的时候？知道自己的信念就坚持走下去，总有人会跟随…换句话说也对，坚持走下去总会产生自己的信念，并为别人所信仰…<br />
.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/16/code/algorithm/2010-07-16-quick-sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/16/code/algorithm/2010-07-16-quick-sort/" class="post-title-link" itemprop="url">Quick Sort</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-16 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-16T00:00:00+08:00">2010-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-05-16 23:53:23" itemprop="dateModified" datetime="2024-05-16T23:53:23+08:00">2024-05-16</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_description" content="Optimize QuickSort" />
<meta name="_su_keywords" content="Optimize,Quick,Sort" />
<meta name="_su_title" content="Quick Sort" />
<meta name="views" content="851" />
the simplest quick sort is like following:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int Partition(int * a, int start, int end)&#123;</span><br><span class="line">    swap(a[start],a[start+rand()%(end-start+1)]);</span><br><span class="line">    int p = a[start];</span><br><span class="line">    while(start&amp;lt;end)&#123;</span><br><span class="line">        while(start&amp;lt;end &amp;amp;&amp;amp; a[end] &amp;gt;= p) end--;</span><br><span class="line">        swap(a[start],a[end]);</span><br><span class="line">        while(start&amp;lt;end &amp;amp;&amp;amp; a[start]&amp;lt;= p) start++;</span><br><span class="line">        swap(a[start],a[end];)</span><br><span class="line">    &#125;</span><br><span class="line">    return start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void QuickSort(int * a, int start, int end)&#123;</span><br><span class="line"></span><br><span class="line">     if(end-start&amp;gt;=1)&#123;</span><br><span class="line">         int mid = Partition(a,start, end);</span><br><span class="line">         QuickSort(a,start,mid-1);</span><br><span class="line">         QuickSort(a,mid+1,end);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But If you want do some optimization in QuickSort, first when the number of elements is small than 10, do insert sort not quick sort. Second, To find the near-like middle element of array, and not use the random one. Third, when the array is already sorted , do not use quick sort. and Reduce the function call. You will the following codes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void QuickSort(int *a, int start, int end)&#123;</span><br><span class="line"></span><br><span class="line">    if(end - start &amp;lt;= 0 ) // or you can throw some exceptions!</span><br><span class="line">       return ;</span><br><span class="line"></span><br><span class="line">// if the number of element is less than 8, do insert sort;</span><br><span class="line"></span><br><span class="line">    if(end - start&amp;lt;7)&#123;</span><br><span class="line"></span><br><span class="line">      for(int i = start; i &amp;lt;= end; i++)&#123;</span><br><span class="line"></span><br><span class="line">         for(int j = i; j &amp;gt; start &amp;amp;&amp;amp; a[j] &amp;lt; a[j-1]; j--)</span><br><span class="line"></span><br><span class="line">             swap(a[j],a[j-1]);</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">// check if the array is sorted.</span><br><span class="line"></span><br><span class="line">    bool isSorted = true;</span><br><span class="line">    for(int i = start; i &amp;lt; end; i++)&#123;</span><br><span class="line">       if(a[i]&amp;gt;a[i+1])</span><br><span class="line">         isSorted = false;</span><br><span class="line">    &#125;</span><br><span class="line">    if(isSorted)</span><br><span class="line">      return;</span><br><span class="line"></span><br><span class="line">// get the near-like middle element, use 3 point middle method.</span><br><span class="line"></span><br><span class="line">    int dm = start+(end-start)/2;</span><br><span class="line"></span><br><span class="line">    int dl, dh;</span><br><span class="line"></span><br><span class="line">    if(end-start&amp;lt;40)&#123;</span><br><span class="line"></span><br><span class="line">       int d = (end-start+1)/8;</span><br><span class="line"></span><br><span class="line">       dl = mid(a, start,start+d,start+2*d);</span><br><span class="line"></span><br><span class="line">       dm = mid(a,dm-d,dm,dm+d);</span><br><span class="line"></span><br><span class="line">       dh = mid(a,end-2*d,end-d, end);</span><br><span class="line"></span><br><span class="line">       dm = mid(a,dl,dm,dh);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">// do partition</span><br><span class="line"></span><br><span class="line">    swap(a[start],a[dm]);</span><br><span class="line"></span><br><span class="line">    int low=start, high = end, p = a[start];</span><br><span class="line">    while(low&amp;lt;high)&#123;</span><br><span class="line">        while(low &amp;lt; high &amp;amp;&amp;amp; a[high]&amp;gt;= p) high--;</span><br><span class="line">        swap(a[low],a[high]);</span><br><span class="line">        while(low&amp;lt;high &amp;amp;&amp;amp; a[low]&amp;lt;= p) low ++;</span><br><span class="line">        swap(a[low],a[high]);</span><br><span class="line">    &#125;</span><br><span class="line">    QuickSort(a,start, low-1);</span><br><span class="line">    QuickSort(a,low+1,end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/13/5732637/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/13/5732637/" class="post-title-link" itemprop="url">Stl Upper_bound函数实现</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-13 19:50:00" itemprop="dateCreated datePublished" datetime="2010-07-13T19:50:00+08:00">2010-07-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>写了一个upper_bound的实现。其中递归使用二分法求解最上界，虽然写的完全不像STL的风格，但是练手还是可以的。</p>
<p>#include<iostream> #include<iterator> #include<cstring> #include<cassert><br />
using namespace std; int UpperBound(int* a, int start, int end , const int&amp;<br />
value){ int mid = 0; int index = 0; int up_index = 0; if(a[end]&lt;value) //<br />
特判比最后一个数大时，end+1 return end+1; //这里是经典的二分 while(start&lt;= end){ mid = start +<br />
(end - start)/2; if(a[mid] == value){ index = mid + 1; // 去递归的找一下上界 up_index =<br />
UpperBound(a,mid+1,end,value); // 如果找到的上界比现在的还小，那么就用现在的 return up_index &gt;<br />
index? up_index : index; } else if(a[mid]&lt;value){ start = mid+1; } else{ end =<br />
mid-1; // 记录上界 index = mid; } } return index; }</p>
<p>如果原数组中没有存在那个元素，就根本没有调用那个递归程序，递归只有在出现多个此元素时才会调用。另外中间递归调用段地方还可以改写为：</p>
<p>if(a[mid] == value){ index = mid + 1; /* up_index =<br />
UpperBound(a,mid+1,end,value); return up_index &gt; index? up_index : index; */<br />
// 因为只有在递归调用中start&gt;end时，才会返回一个index = 0 return (mid+1&gt;end) ? index :<br />
UpperBound(a,mid+1,end,value); }</p>
<p>这样写完后写一下测试代码,顺便wrap一层upper_bound：</p>
<p>int upper_bound(int * a,int n, const int&amp; value){ // 使用宏可以在编译时去除 #ifdef TEST<br />
// pre-condition assert(NULL != a &amp;&amp; n&gt;0); // check the array a is sorted by<br />
elements for(int i = 1; i &lt; n; i++){ assert(a[i-1]&lt;=a[i]); } int * tmp_a = new<br />
int[n]; memcpy(tmp_a,a,sizeof(int)*n); #endif int index =<br />
UpperBound(a,0,n-1,value); #ifdef TEST // post-condition //check whether the<br />
array is changed or not for(int i = 0; i &lt; n; i++) assert(a[i] == tmp_a[i]);<br />
if(index == 0){ // min assert(a[index]&gt;value); } else if(index == n){ // max<br />
assert(a[index-1]&lt;=value); } else{ assert(a[index]&gt;value &amp;&amp;<br />
a[index-1]&lt;=value); } delete [] tmp_a; #endif return index; }</p>
<p>如果希望别人不调用UpperBound而只调用upper_bound,可以使用static 关键字， 将UpperBound限制在只在本文件中使用。别人调用<br />
就只能调用upper_bound()函数。不过STL的教学源码比我这精简的多，根本无须使用递归。真正的STL源码变量名称会使用下划线__作为起始。</p>
<p>template &lt;class ForwardIterator, class T&gt; ForwardIterator upper_bound (<br />
ForwardIterator first, ForwardIterator last, const T&amp; value ) {<br />
ForwardIterator it; iterator_traits<ForwardIterator>::distance_type count,<br />
step; count = distance(first,last); while (count&gt;0) { it = first;<br />
step=count/2; advance (it,step); if (!(value&lt;*it)) // or: if<br />
(!comp(value,*it)), for the comp version { first=++it; count-=step+1; } else<br />
count=step; } return first; }</p>
<p>这里的advance()函数定义类似:</p>
<p>template&lt;class Iterator, class Distance&gt; void advance(Iterator&amp; i, Distance<br />
n); 类似于 i = x.begin()+n; i is an iterator of x</p>
<p>最后把主函数贴上做结：</p>
<p>int main(int argc, char* argv[]) { // 这里你可以使用random的方法进行测试。 int x[] =<br />
{1,2,3,4,5,5,5,5,9}; vector<int> v(x,x+9); sort(v.begin(),v.end()); cout &lt;&lt;<br />
(int)(upper_bound(v.begin(),v.end(),9)-v.begin()); cout &lt;&lt; upper_bound(x,9,9);<br />
return 0; }</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/11/5727277/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/11/5727277/" class="post-title-link" itemprop="url">HashMap 将Object 当做Key传入</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-11 17:51:00" itemprop="dateCreated datePublished" datetime="2010-07-11T17:51:00+08:00">2010-07-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>package test; import java.util.*; // Key class class A{ public int a; public<br />
int b; A(int a, int b){ this.a = a; this.b = b; } public boolean equals(Object<br />
o){ A x = (A)o; if(x.a == this.a &amp;&amp; x.b == this.b) return true; return false;<br />
} public int hashCode(){ return a+b; } } public class HashTableTest { /** *<br />
@param args */ public static void main(String[] args) { // TODO Auto-generated<br />
method stub HashMap&lt;A,Integer&gt; hm = new HashMap&lt;A,Integer&gt;(); A a1 = new<br />
A(2,3); A a2 = new A(4,5); A a4 = new A(2,3); A a3 = new A(3,2); hm.put(a1,<br />
new Integer(1)); hm.put(a2, new Integer(3));<br />
System.out.print(hm.containsKey(a4)); } }</p>
<p>对于Key这个类，这里需要重载boolean  equals(Object o) 和int hashCode()<br />
两个函数。这两个函数必须都要重载，否则会导致key找到不到。这里要说为什么，估计是HashMap中使用key相等的策略是<br />
if(key1.equals(key2) &amp;&amp; key1.hashCode() == key2.hashCode()),<br />
因为hashcode可能会有多个不同的实例对应于一个hashCode, 所以这个东东会重叠。对于判断两个对象是否相等，java默认使用的是引用相等，即a<br />
== b。但是对于String等其他内置的类来说，他们有自己的重载equals()方法。另外java<br />
doc中也提到，当重载equals()方法时，最好把hashCode()方法也重载掉。这样看来if(key1.equals(key2) &amp;&amp;<br />
key1.hashCode() == key2.hashCode())这句应该变为：</p>
<p>Key k = this.Get(key2.hashCode()); if (k.equals(key2)) return …</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/09/2010-07-09-print-display-row/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/09/2010-07-09-print-display-row/" class="post-title-link" itemprop="url">Print Only Display One Row</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-09 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-09T00:00:00+08:00">2010-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:06:21" itemprop="dateModified" datetime="2023-10-05T23:06:21+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>0</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="这篇文章是写如何在界面上只输出一行，而不用写到另外一行的方法。中文不知道专业名称是什么，英语也不知道怎么说这个才能被搜索到。
<p>this article is about how to print one row only, and do not need to write to another row. I don’t know how to describe it in Chinese or English. And I also don’t know this article how to be searched.&quot; /&gt;<br />
<meta name="_su_keywords" content="c++,fflush,\n,\r,output,printf" /><br />
<meta name="_su_rich_snippet_type" content="none" /><br />
<meta name="_su_title" content="print only display one row process bar" /><br />
<meta name="views" content="690" /><br />
这篇文章是写如何在界面上只输出一行，而不用写到另外一行的方法。中文不知道专业名称是什么，英语也不知道怎么说这个才能被搜索到。</p>
<p>this article is about how to print one row only, and do not need to write infos to another row. I don’t know how to describe it in Chinese or English. And I also don’t know this article how to be searched.</p>
<p>This effect is like use wget to downloading files. You will see the process bar moving. How to display this effect? Use the following code:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;cstdio&amp;gt;</span><br><span class="line">#include&amp;lt;unistd.h&amp;gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    printf(&quot;====&amp;gt;\r&quot;);</span><br><span class="line">    fflush(stdout);       #flush buffer</span><br><span class="line">    sleep(2);             # wait</span><br><span class="line">    printf(&quot;======&amp;gt;\r&quot;);</span><br><span class="line">    fflush(stdout);</span><br><span class="line">    sleep(3);</span><br><span class="line">    printf(&quot;========&amp;gt;\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the above code, ‘\r’ is “Enter” character, and ‘\n’ is “newline” character. If input ‘\n’ into printf(), it will go to a new line. If input ‘\r’ into printf(), the output cursor will go to the beginning. If you do not use fflush(stdout); you will never your output without ‘\n’.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/07/2010-07-07-absolute-valueinteger/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/07/2010-07-07-absolute-valueinteger/" class="post-title-link" itemprop="url">Get Absolute Value(integer)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-07 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-07T00:00:00+08:00">2010-07-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:05" itemprop="dateModified" datetime="2023-10-06T22:54:05+08:00">2023-10-06</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="how to use bit operator and simple +-*/ to get absolute number." />
<meta name="_su_keywords" content="bit,operator,absolute,complement,number,priority" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_title" content="bit operators absolute complement number priority" />
<meta name="views" content="1060" />
<meta name="_wp_old_slug" content="absolute-numberinteger" />
How to get absolute (integer) only use bit operators and +-*/.(In gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5)&nbsp; )
<ul>
	<li>if number &gt;= 0 , then number &gt;&gt; 31 == 0</li>
</ul>
<ul>
	<li>if number &lt; 0&nbsp;&nbsp; , then number &gt;&gt; 31 == 0xFFFFFFFF</li>
</ul>
If some number exclusive or( xor ) 0xFFFFFFFF means each bit becomes its "opposite" number. (1 becomes 0, and 0 becomes 1).And If a number xor 0x00000000 means nothing happened to this number. So:
<ul>
	<li>number ^ 0xFFFFFFFF = ~number</li>
	<li>number ^ 0x00000000 = number</li>
</ul>
In this question, you should also know something about<span class="exturl" data-url="aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaWduZWRfbnVtYmVyX3JlcHJlc2VudGF0aW9ucyNPbmVzLjI3X2NvbXBsZW1lbnQ="> complement number(see two's complement)<i class="fa fa-external-link-alt"></i></span>. When a number is negative, |number| = ~number +1 or you can use |number| = !number + 1. When a number is positive, |number| = number.
<p>If you know above, then the goal of |x| = (x^(x&gt;&gt;31))+(~(x&gt;&gt;31)+1).</p>
<p>(x^(x&gt;&gt;31)) means:</p>
<ul>
	<li>x &gt;= 0, x^(x&gt;&gt;31) = x^0x00000000 = x</li>
	<li>x &lt; 0, x^(x&gt;&gt;31) = x^0xFFFFFFFF = ~x</li>
</ul>
And (~(x&gt;&gt;31)+1)means:
<ul>
	<li>x &gt;= 0, ~(x&gt;&gt;31)+1 = 0xFFFFFFFF+1 = 0</li>
	<li>x &lt; 0, ~(x&gt;&gt;31)+1 = 0x00000000+1 = 1</li>
</ul>
And we should take care of those brackets, because the priorities of operators are: ~ <span style="color: rgb(128, 0, 0); font-size: 16pt;"><strong>&gt;</strong></span> */ <span style="color: rgb(153, 51, 0); font-size: 16pt;"><strong>&gt;</strong></span> + - <strong><span style="color: rgb(153, 51, 0); font-size: 16pt;">&gt;</span></strong> bit operators(&amp;,^,|)
<table>
<tbody>
<tr>
<th>Level</th>
<th>Operator</th>
<th>Description</th>
<th>Grouping</th>
</tr>
<tr>
<td>1</td>
<td><tt>::</tt></td>
<td>scope</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>2</td>
<td><tt>() [] . -&gt; ++ -- dynamic_cast static_cast  reinterpret_cast const_cast typeid</tt></td>
<td>postfix</td>
<td>Left-to-right</td>
</tr>
<tr>
<td rowspan="3">3</td>
<td><tt>++ -- ~ ! sizeof new delete</tt></td>
<td>unary  (prefix)</td>
<td rowspan="3">Right-to-left</td>
</tr>
<tr>
<td><tt>* &amp;</tt></td>
<td>indirection and reference (pointers)</td>
</tr>
<tr>
<td><tt>+ -</tt></td>
<td>unary sign operator</td>
</tr>
<tr>
<td>4</td>
<td><tt>(type)</tt></td>
<td>type casting</td>
<td>Right-to-left</td>
</tr>
<tr>
<td>5</td>
<td><tt>.* -&gt;*</tt></td>
<td>pointer-to-member</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>6</td>
<td><tt>* / %</tt></td>
<td>multiplicative</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>7</td>
<td><tt>+ -</tt></td>
<td>additive</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>8</td>
<td><tt>&lt;&lt; &gt;&gt;</tt></td>
<td>shift</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>9</td>
<td><tt>&lt; &gt; &lt;= &gt;=</tt></td>
<td>relational</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>10</td>
<td><tt>== !=</tt></td>
<td>equality</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>11</td>
<td><tt>&amp;</tt></td>
<td>bitwise AND</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>12</td>
<td><tt>^</tt></td>
<td>bitwise XOR</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>13</td>
<td><tt>|</tt></td>
<td>bitwise OR</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>14</td>
<td><tt>&amp;&amp;</tt></td>
<td>logical AND</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>15</td>
<td><tt>||</tt></td>
<td>logical OR</td>
<td>Left-to-right</td>
</tr>
<tr>
<td>16</td>
<td><tt>?:</tt></td>
<td>conditional</td>
<td>Right-to-left</td>
</tr>
<tr>
<td>17</td>
<td><tt>= *= /= %= += -= &gt;&gt;= &lt;&lt;= &amp;= ^= |=</tt></td>
<td>assignment</td>
<td>Right-to-left</td>
</tr>
<tr>
<td>18</td>
<td><tt>,</tt></td>
<td>comma</td>
<td>Left-to-right</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/05/2010-07-05-memory-allocation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/05/2010-07-05-memory-allocation/" class="post-title-link" itemprop="url">Memory Allocation in C</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-05 00:00:00" itemprop="dateCreated datePublished" datetime="2010-07-05T00:00:00+08:00">2010-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:04" itemprop="dateModified" datetime="2023-10-06T22:54:04+08:00">2023-10-06</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_description" content="c language , memory allocation about malloc function , calloc function and realloc function, free function and new and delete. " />
<meta name="views" content="1100" />
<meta name="_su_title" content="memory allocation in c" />
<meta name="_su_keywords" content="memory, allocation,malloc,calloc,realloc,free,new,delete,c,c++" />
In c language, there are three methods for memory allocation: malloc(), calloc(), realloc(). And one method to free memory: free().
<p>The <strong>malloc</strong> function prototype is :<strong> void* malloc(size_t size);</strong> This function will allocates a block of <em>size</em> bytes of memory, returning a pointer to  the beginning of the block. <span style="color: #ff0000;">Attention:</span> this function is only for allocating memory! So the initial value of these memory will be Non-Zero. Maybe sometimes, it will be zero. Code for example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;stdio.h&amp;gt;</span><br><span class="line">#include&amp;lt;stdlib.h&amp;gt;</span><br><span class="line">int main()&#123;</span><br><span class="line"></span><br><span class="line">	int * a = NULL;</span><br><span class="line">	a = malloc(sizeof(int)*4);</span><br><span class="line">	// like int a[4], but those memory is in heap</span><br><span class="line">	for(int i = 0; i&amp;lt; 4; i++)</span><br><span class="line">		printf(&quot;%d &quot;,a[i]);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The <strong>realloc</strong> function prototype is :<strong> void* realloc(void* ptr, size_t size);</strong> This function will reallocates a block of <em>size</em> bytes of memory,  returning a pointer to  the beginning of the block. If size is zero and ptr is not <strong>NULL</strong>, it will be used as <strong>free()</strong>. If prt is NULL and size is not zero, it will be used as <strong>malloc()</strong>. If ptr is NULL and size is zero, return value is some kind of memory which contains zero elements! Wooo~~~~. Look at the following codes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">char * p = NULL;</span><br><span class="line">printf(&quot;%x&quot;,(int)p); // will output 0</span><br><span class="line"></span><br><span class="line">p = (char*)realloc(p,0);</span><br><span class="line">printf(&quot;%x&quot;,(int)p); // will output non-zero</span><br><span class="line"></span><br><span class="line">p = (char*)realloc(p,0);</span><br><span class="line">printf(&quot;%x&quot;,(int)p);</span><br></pre></td></tr></table></figure>
<p>why?! Because if this function is called successfully, it will return non-zero memory address. And you will see the third output <strong>subtract </strong>the second output will be<strong> 16 bytes</strong>. If ptr is not NULL , and size is non-zero, and current block can simply expand without moving,  the return value is the same as ptr. But there is not enough space for simply expand, it will execute<strong> free(ptr) and return malloc(size)</strong>. This function will become very <span style="color: #ff0000;">dangerous!</span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char * k = (char*)realloc(NULL,100);</span><br><span class="line">char * kbigger = (char*)realloc(k,104);</span><br><span class="line">char * kbiggest = (char*)realloc(k,106); &lt;span style=&quot;color: #ff0000;&quot;&gt;// crash!&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p>Safety called will be like the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char * k = (char*)realloc(NULL,100);</span><br><span class="line">k = (char*)realloc(k,4); // k&#x27;s address is not changed</span><br><span class="line">k = (char*)realloc(k,104); // k&#x27;s address is changed</span><br></pre></td></tr></table></figure>
<p>If there is not enough free memory to be allocated, this function will return NULL.<span style="color: #ff0000;">Attention:</span> this function will not initialize those memory also.</p>
<p><strong>calloc</strong>'s prototype is void* calloc(int num, size_t size).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">char* p = (char*)calloc(20,sizeof(char));</span><br><span class="line"></span><br><span class="line">// it is equal to</span><br><span class="line"></span><br><span class="line">char* p = (char*)malloc(20*sizeof(char));</span><br><span class="line">memset(p,0,20*sizeof(char));</span><br></pre></td></tr></table></figure>
<p><span style="color: #ff0000;">But calloc is efficient!</span></p>
<p><span style="color: #ff0000;"> <strong> </strong><span style="color: #000000;"><strong>free</strong> function is to delete memory which has been allocated. But free function will not assign the point to zero.</span></span></p>
<p><span style="color: #ff0000;"><span style="color: #000000;"></span></span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">char * p = (char*)calloc(100);</span><br><span class="line"></span><br><span class="line">p[0] = &#x27;a&#x27;;</span><br><span class="line">printf(&quot;%c&quot;,p[0]);   // output &#x27;a&#x27;</span><br><span class="line">printf(&quot;%x&quot;,(int)p);</span><br><span class="line">free(p);</span><br><span class="line">printf(&quot;%c&quot;,p[0]); // output nothing</span><br><span class="line">printf(&quot;%x&quot;,(int)p); // the value is the same as the first.</span><br></pre></td></tr></table></figure>
<p>And all of those functions will not recommend to be used in c++, because those functions will not initialize class structure or v_ptr. free() function will not destruct parent class when sub class is destructed. In c++, maybe should always use <strong>new</strong> and <strong>delete</strong>!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/07/02/5709968/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/07/02/5709968/" class="post-title-link" itemprop="url">XMLCSPReader Null Point Error</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-07-02 19:28:00" itemprop="dateCreated datePublished" datetime="2010-07-02T19:28:00+08:00">2010-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:46" itemprop="dateModified" datetime="2023-10-05T12:41:46+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>package queens; import java.io.FileNotFoundException; import<br />
java.io.IOException; import org.sat4j.csp.SolverFactory; import<br />
org.sat4j.reader.ParseFormatException; import org.sat4j.reader.XMLCSPReader;<br />
import org.sat4j.specs.ContradictionException; import<br />
org.sat4j.specs.IProblem; import org.sat4j.specs.ISolver; import<br />
org.sat4j.specs.TimeoutException; import org.sat4j.tools.ModelIterator; public<br />
class Solver { public static void main(String[] args) { ISolver solver =<br />
SolverFactory.newDefault(); solver.setTimeout(360); ModelIterator mi = new<br />
ModelIterator(solver); XMLCSPReader reader = new XMLCSPReader(solver); try {<br />
if (reader != null) reader.parseInstance(“queens.xml”); IProblem problem = mi;<br />
boolean unsat = true; int count = 1; while (problem.isSatisfiable()) { unsat =<br />
false; System.out.print(“[” + count + &quot;] “); for (int i = 0; i &lt;<br />
mi.model().length; i++) { System.out.print(mi.model()[i] + &quot; “); }<br />
System.out.println(””); // Call mi.model() to be sure you iterate to the next<br />
solution mi.model(); count++; } if (unsat) {<br />
System.out.println(“Unsitisfied”); } } catch (TimeoutException e) {<br />
System.out.println(“Timeout”); } catch (FileNotFoundException e) {<br />
System.out.println(“File not found”); } catch (IOException e) {<br />
System.out.println(“IO Exception”); } catch (ParseFormatException e) {<br />
System.out.println(“ParseFormatException”); } catch (ContradictionException e)<br />
{ System.out.println(“Contradiction”); } catch (java.lang.NullPointerException<br />
e) { System.out.print(“NullPointerException”); } } }</p>
<p>上面一段代码不知道如何，一直报NULL Point Exception. 最后发现并非是代码写错，而是因为jre不对。需要使用opensdk-1.6。</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069103M0j0.gif" alt="" /></p>
<p>然后：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069268oWP9.gif" alt="java" /></p>
<p>然后：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069345M766.gif" alt="java" /></p>
<p>选中java-opensdk1.6 然后在外面选中刚才的JavaSE-1.6 :</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069450Fl9g.gif" alt="" /></p>
<p>有时候eclipse报出Class Not Found错误，可能是因为jar包应该放在external<br />
jar的地方，但是你却放错了位置。添加external jar的地方。如果想添加external jars,需要在：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069654J18h.gif" alt="" /></p>
<p>选中propertise,然后：</p>
<p><img src="http://hi.csdn.net/attachment/201007/2/0_1278069784s1ld.gif" alt="" /></p>
<p>左边add external jars, 添加需要的jar即可。</p>
<p>如果发生了selection dose not contain a main type,<br />
那么就需要重新创建一个Project,然后将你的文件再重新导入到新的Project中。或者粘贴过去。不知道为什么eclipse经常发生这个错误。</p>
<p><span class="exturl" data-url="aHR0cDovL3huLS1YTUxDU1BSZWFkZXJqYXJzYXQ0ai05ZDQ1YWpnOTFhcDdtZzEzYm5jcmJ3MmdjbzFlNDV0YTR2MWllcDFkN3NjLm9yZw==">上面一个XMLCSPReader的各种jar文件需要在sat4j.org<i class="fa fa-external-link-alt"></i></span> 上下载。该下模块的都下，但是注意版本号。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/06/30/2010-06-30-try-catch-exception-c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/30/2010-06-30-try-catch-exception-c/" class="post-title-link" itemprop="url">try...catch...exception in C++</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-06-30 00:00:00" itemprop="dateCreated datePublished" datetime="2010-06-30T00:00:00+08:00">2010-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:05:22" itemprop="dateModified" datetime="2023-10-05T23:05:22+08:00">2023-10-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="try...catch...exception in c++, and it describe how to use it.  the philosophy of exceptions." />
<meta name="_su_keywords" content="c,c++,exception,throw, catch,try" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="_su_title" content="try...catch...exception in c++" />
<meta name="views" content="2645" />
if you will throw something, you should catch it as the same type. like following:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">int main()&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw 20;</span><br><span class="line">    &#125;catch(int i)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;Exception Num is NO.&quot;&amp;lt;&amp;lt;i&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw &#x27;X&#x27;;</span><br><span class="line">    &#125;catch(char c)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;this exception is a char:&quot;&amp;lt;&amp;lt;c&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try&#123;</span><br><span class="line">        throw &quot;abc&quot;;</span><br><span class="line">    &#125;catch(const char * e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;this is string exception:&quot;&amp;lt;&amp;lt;e&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try&#123;</span><br><span class="line">        int *d = new int(65);</span><br><span class="line">        throw d;</span><br><span class="line">    &#125;catch(const int * e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;this is int point exception:&quot;&amp;lt;&amp;lt;*e&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    /* ok, catch will handle everything, if you throw correct type.*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and if you want create classes for exceptions. You should add #include&lt;exception&gt; and inherit exception class, and then override the function “<strong>what</strong>”.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line">#include&amp;lt;exception&amp;gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">/// this exception class is from #include&amp;lt;exception&amp;gt;</span><br><span class="line">/// you should override the function what() to generate your exception string</span><br><span class="line">class MyException: public exception&#123;</span><br><span class="line">    virtual const char* what() const throw()&#123;</span><br><span class="line">        return &quot;myExceptions!!!!!!!&quot;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class SubException: public MyException&#123;</span><br><span class="line">    virtual const char* what()const throw()&#123;</span><br><span class="line">        return &quot;sub exception !!!!!!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw MyException();</span><br><span class="line">    &#125;catch(exception&amp;amp; e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; e.what()&amp;lt;&amp;lt;endl;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    try&#123;</span><br><span class="line">        throw SubException();</span><br><span class="line">    &#125;catch(bad_alloc&amp;amp;)&#123;</span><br><span class="line">        // this will not occur, just test this type.</span><br><span class="line">        // if it is occured, your computer will be locked.</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;nothing&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;catch(exception&amp;amp; e)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; e.what()&amp;lt;&amp;lt;endl;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>There are some standard exceptions in exception.h. These exceptions are:</p>
<p><strong>bad_alloc</strong></p>
<p>A bad_alloc is thrown by new if an allocation failure occurs.</p>
<p><strong>bad_cast</strong></p>
<p>A bad_cast is thrown by dynamic_cast when it fails with a referenced  type.</p>
<p><strong>bad_exception</strong></p>
<p>A bad_exception is thrown when an exception type doesn’t match any  catch</p>
<p><strong>bad_typeid</strong></p>
<p>A bad_typeid is thrown by typeid</p>
<p><strong>ios_base::failure</strong></p>
<p>An ios_base::failure is thrown by functions in the iostream library.</p>
<p>in #include&lt;stdexecpt&gt; can use these exception:<br />
class <strong>logic_error</strong>; // :  public exception<br />
class <strong>domain_error</strong>; // :  public logic_error<br />
class <strong>invalid_argument</strong>; // : public logic_error<br />
class<strong> length_error</strong>; // :  public logic_error<br />
class <strong>out_of_range</strong>; // :  public logic_error<br />
class <strong>runtime_error</strong>; // :  public exception<br />
class <strong>range_error</strong>; // :  public runtime_error<br />
class <strong>overflow_error</strong>; // :  public runtime_error<br />
class <strong>underflow_error</strong>; // :  public runtime_error</p>
<p>If you don’t know which kind of exception will occur. you should use <strong>catch(…)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">        srand(time(NULL));</span><br><span class="line">        int i = rand()%4;</span><br><span class="line"></span><br><span class="line">        switch(i)&#123;</span><br><span class="line">            case 0:</span><br><span class="line">                throw; // terminate called without an active exception</span><br><span class="line">                       // Aborted, ... will not catch it.</span><br><span class="line">                break;</span><br><span class="line">            case 1:</span><br><span class="line">                throw &#x27;x&#x27;;</span><br><span class="line">                break;</span><br><span class="line">            case 2:</span><br><span class="line">                throw 50;</span><br><span class="line">                break;</span><br><span class="line">            case 3:</span><br><span class="line">                throw &quot;my string&quot;;</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;catch(...)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;I don&#x27;t know which exception will occur!&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>But when i == 0, the program will execute throw;, and it will exit and print:</p>
<blockquote>terminate called without an active exception
<p>Aborted</blockquote><br />
<strong>You should specify something to throw. throw; is only be used within catch clauses.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            throw 2;</span><br><span class="line">        &#125;catch(int i)&#123;</span><br><span class="line">            throw; // here I use it again!</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;catch(...)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;re-throw it!!!!&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>you can declare your functions using throw(). But it is just declare!  you can throw everything! But you declare it will throw bad_exception, and use set_unexpected(), it will process some unexpected exceptions.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">void foo() throw(int,bad_exception)&#123;</span><br><span class="line"></span><br><span class="line">    throw &quot;abc&quot;;</span><br><span class="line">&#125;</span><br><span class="line">void myunexpected()&#123;</span><br><span class="line">    cout &amp;lt;&amp;lt; &quot;I get unexpected exceptions!&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    throw;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// in main</span><br><span class="line"></span><br><span class="line">    set_unexpected(myunexpected);</span><br><span class="line">    try&#123;</span><br><span class="line">        foo();</span><br><span class="line">    &#125;catch(int)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;catch a integer&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;catch(bad_exception&amp;amp;)&#123;</span><br><span class="line">        cout &amp;lt;&amp;lt; &quot;bad_exception&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    // you can use catch(...)</span><br></pre></td></tr></table></figure>
<p>output is</p>
<blockquote>I get unexpected exceptions!
bad_exception</blockquote>
If the program or your function can not process some kind of situation. you should throw something out.  Sometime, someone argued that it will reduce the usability. But If you don't stop the processing(program or function), it will create a disaster.  Remember, by all means, throw it! But should we catch those exceptions and how we catch those? e....as your wish. Some bug will not appear, if you use not appropriate catch and process those exceptions in unsuitable way. If your program have some bug, and it is difficult to find, please delete all catches!
<p>In some languages which have finally clauses. But in c++, it dose not have finally clauses.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/23/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><span class="space">&hellip;</span><a class="page-number" href="/page/80/">80</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/25/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2017 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">帐前卒</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">1.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">24:23</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/next-boot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/bookmark.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/search/local-search.min.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin="anonymous">


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"chilly/blog_comments","issue_term":"url","theme":"github-dark"}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/comments/utterances.min.js"></script>

</body>
</html>

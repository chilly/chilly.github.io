<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.ico">
  <link rel="mask-icon" href="/icon.svg" color="#222">
  <meta name="google-site-verification" content="hcdiytqUGPoTW0eAaN6TWAmRfiv7IWFIIc9DKNr7Eno">
  <meta name="yandex-verification" content="eb8f01295fdccb3d">
  <meta name="baidu-site-verification" content="QoJxa8tZnO">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Times+New+Roman:300,300italic,400,400italic,700,700italic%7CRaleway:300,300italic,400,400italic,700,700italic%7COswald:300,300italic,400,400italic,700,700italic%7CWork+Sans:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chillyc.info","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.18.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/config.min.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="帐前卒专栏">
<meta property="og:url" content="http://chillyc.info/page/25/">
<meta property="og:site_name" content="帐前卒专栏">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="帐前卒">
<meta property="article:tag" content="有意思的代码，有意思的架构, 有趣的小说, 好看的故事, code, software, articles, novel, architect">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://chillyc.info/page/25/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/25/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>帐前卒专栏 - code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <!-- Global site tag (gtag.js) - Google Analytics start -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11621532-3"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6565392687771630"
     crossorigin="anonymous"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-11621532-3');
</script>
 <!-- Global site tag (gtag.js) - Google Analytics end -->
  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">帐前卒专栏</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">code, software architect, articles and novels.<br/>代码，软件架构，博客和小说</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-feeds"><a href="/rss2.xml" rel="section"><i class="fa fa-feed fa-fw"></i>feeds</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="帐前卒"
      src="/icon.svg">
  <p class="site-author-name" itemprop="name">帐前卒</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">792</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">735</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoaWxseQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chilly"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9jY3R0XzE=" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;cctt_1"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8="><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/big/by_nc_nd.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/27/5627160/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/27/5627160/" class="post-title-link" itemprop="url">Ignorance Bless You! 无知是福</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-27 09:23:00" itemprop="dateCreated datePublished" datetime="2010-05-27T09:23:00+08:00">2010-05-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>近期看一个电影&lt;二维平面&gt;(FlatLand),这个电影讲述的是二维平面中发生的故事.发现任何事物都很难脱离自身所在的环境想问题.二维中的square<br />
A就是这样.他只知东西南北四个方向,完全没有向上和向下的概念.所以圆球说线移动成面,面移动成体,对square A来说完全没有概念.但是当square A脱<br />
离了他原本所在的二维平面,他人也就大彻大悟了.如果有一维直线,也就有二维平面,如果有二维平面,也就会有三维立体空间,如果有三维立体空间,也就会存在四维世界.<br />
在二维世界中如果有人宣扬或者知道三维世界,就要被杀掉,因为不利于二维世界的统治.毕竟如果知道还有更高级的生命体或者个体存在,现在的体制就会土崩瓦解.并非出于<br />
惧怕,而是出于信仰.就如同如果神真的存在,那么人还有什么值得崇拜和推崇的?电光火石中争长短,几许光阴;蜗牛角上较雌雄,许大世界?不过真的有四维世界吗?这首先<br />
要论证真的有二维世界和一维世界吗?因为在我们的世界中暂时还找不到二维物体.想多了就晕,即使知道了事实也无法证明.即使证明了也会引来杀身之祸.所以无知是福.觉<br />
得非常奇怪的一点就是知道了就去宣扬,这让我想到日心说.想来哥白尼的确是位智者.当然逼哥白尼临终发表天体运行论的那群人也很聪明.相反布鲁诺多多少少有些愚钝.不<br />
过提点别人的错误,往往自己也抱持相同的错误.最后用白居不易的&lt;对酒&gt;一诗结束此文:蜗牛角上争何事,石火光中寄此身,随贫随福且欢乐,不开口笑是痴人.</p>
<p>** 中 文名 ** :  二维电影</p>
<p>** 英文名 ** :  Flatland</p>
<p>** 别名 ** :  Flatland the Film</p>
<p>** IMDb ** :  <span class="exturl" data-url="aHR0cDovL3d3dy5pbWRiLmNvbS90aXRsZS90dDk3MjM3NC8="> 7.0/10 (455 votes) <i class="fa fa-external-link-alt"></i></span></p>
<p>** 资 源格式 ** :  DVDRip</p>
<p>** 发行日期 ** :  2007年</p>
<p>** 导 演 ** :  <span class="exturl" data-url="aHR0cDovL3d3dy52ZXJ5Y2QuY29tL3NlYXJjaC9zdGFyL0xhZGQrRWhsaW5nZXIrSnIu"> Ladd Ehlinger Jr. <i class="fa fa-external-link-alt"></i></span></p>
<p>** 演员 ** :  <span class="exturl" data-url="aHR0cDovL3d3dy52ZXJ5Y2QuY29tL3NlYXJjaC9zdGFyL0NocmlzK0NhcnRlcg=="> Chris Carter … King Of Lineland <i class="fa fa-external-link-alt"></i></span><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Megan+Colleen"> Megan Colleen … A Hexagon<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Ladd+Ehlinger+Jr."> Ladd Ehlinger Jr. … A Square<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Oscar+Gutierrez"> Oscar Gutierrez … Old Trapezoid<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Simon+Hammond"> Simon Hammond … A Sphere<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Michael+Karle"> Michael Karle … Pentagon Doctor<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Jeff+Sanders"> Jeff Sanders … Cube Carlton<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Jonathon+Shoemaker"> Jonathon Shoemaker … Soldier X<br />
</a><br />
<a target="_blank" rel="noopener" href="http://www.verycd.com/search/star/Gregory+Trent"> Gregory Trent … President Circle<br />
</a></p>
<p>** 地区 ** :  <span class="exturl" data-url="aHR0cDovL3d3dy52ZXJ5Y2QuY29tL3NlYXJjaC9hcmVhL3VzYQ=="> 美国 <i class="fa fa-external-link-alt"></i></span></p>
<p>** 语 言 ** :  <span class="exturl" data-url="aHR0cDovL3d3dy52ZXJ5Y2QuY29tL3NlYXJjaC9sYW5nL2VuZ2xpc2g="> 英语 <i class="fa fa-external-link-alt"></i></span></p>
<p>** 简 介 ** :</p>
<p>[ ](<span class="exturl" data-url="aHR0cDovL2ltYWdlLTEudmVyeWNkLmNvbS8zZWI2MmI1ZTZlYjVhYmEzY2Q3OTUzMGE1MDAzN2MyODQ1NjA5L3Bvc3QtMzI1OTU=">http://image-1.verycd.com/3eb62b5e6eb5aba3cd79530a50037c2845609/post-32595<i class="fa fa-external-link-alt"></i></span><br />
9-1221031016.jpg)<br />
<img src="http://hi.csdn.net/attachment/201005/28/0_1275033369mMv1.gif" alt="" /></p>
<p>◎译　　名 　二维电影<br />
◎片　　名　Flatland<br />
◎年　　代　2007<br />
◎国　　家　美国<br />
◎类　　别　动画/奇幻/科幻<br />
◎ 语　　言　英语<br />
◎字　　幕　N/A<br />
◎IMDB评分 7.4/10 (253 votes)<br />
◎IMDB链接 <a target="_blank" rel="noopener" href="http://www.imdb.com/title/tt0972374"> http://www.imdb.com/title/tt0972374<br />
</a><br />
◎文件格式　XviD + MP3<br />
◎视频尺寸　656 x 272<br />
◎文件大小　1CD 49 x 15MB<br />
◎片　　长　99 Mins<br />
◎导　　演　 Ladd Ehlinger Jr.<br />
◎主　　演　Chris Carter … King Of Lineland<br />
Megan Colleen … A Hexagon<br />
Ladd Ehlinger Jr. … A Square<br />
Oscar Gutierrez … Old Trapezoid<br />
Simon Hammond … A Sphere<br />
Michael Karle … Pentagon Doctor<br />
Jeff Sanders … Cube Carlton<br />
Jonathon Shoemaker … Soldier X<br />
Gregory Trent … President Circle</p>
<p>◎简　　介</p>
<p>Flatland: The Movie是由1884年一位英国牧师Edwin A.<br />
Abbott(1838-1926)所撰写的一本小册子《Flatland》改编的一部动画片。小说里构造了一个全新的世界──这个世界是二维的！整个小<br />
说分成两个部分，前一部分系统地描述这个二维世界，包括自然状况、居民生活、政治历史等等。真正有趣的事情发生在后一部分里，这里不同维度的世界之间发生<br />
了碰撞——二维世界中的主人公拜访了一维世界，同时又接触到了一个全新的三维世界。当他在他的世界传播三维思想时，整个世界大乱，哥白尼时代的那段故事再 次发生。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/26/2010-05-26-climbing-wall/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/26/2010-05-26-climbing-wall/" class="post-title-link" itemprop="url">Climbing Wall?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-26 00:00:00" itemprop="dateCreated datePublished" datetime="2010-05-26T00:00:00+08:00">2010-05-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-07 11:42:24" itemprop="dateModified" datetime="2023-10-07T11:42:24+08:00">2023-10-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/knowledge/" itemprop="url" rel="index"><span itemprop="name">knowledge</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_rich_snippet_type" content="none" />
<meta name="views" content="495" />
<meta name="_wp_old_slug" content="" />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">plink -ssh -D 7070 -P 22 -pw &quot;$1&quot; freessh@a.freessh.us</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/24/2010-05-24-design-pattern-chain-reponsibility/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/24/2010-05-24-design-pattern-chain-reponsibility/" class="post-title-link" itemprop="url">Design Pattern CHAIN of Reponsibility</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2010-05-24T00:00:00+08:00">2010-05-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:03:16" itemprop="dateModified" datetime="2023-10-05T23:03:16+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/architect/" itemprop="url" rel="index"><span itemprop="name">architect</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="design pattern CHAIN of reponsibility" />
<meta name="_su_keywords" content="design pattern CHAIN of reponsibility" />
<meta name="_su_title" content="design pattern CHAIN of reponsibility" />
<meta name="views" content="603" />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;cstdio&amp;gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">namespace pattern&#123;</span><br><span class="line">	/// this pattern links all handler as a line, if previous handler can process a request, it wil not be</span><br><span class="line">	/// send to next handler. For example, if someone requested changing programming style, </span><br><span class="line">	/// this decision will be made by a programmer. </span><br><span class="line">	/// He will change his programming style without noticing his lead. </span><br><span class="line">	/// But if someone request changing the requirements, the programmer can not make this decision. </span><br><span class="line">	/// He will noticing his lead, and make his lead decided.</span><br><span class="line"></span><br><span class="line">	/// this is request class.</span><br><span class="line">	#define STYLE 0</span><br><span class="line">	#define REQIREMENT 1</span><br><span class="line">	class Request&#123;</span><br><span class="line">		public:</span><br><span class="line">			int type; // changing programming style or changing requirements?</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	/// this class for processing request.</span><br><span class="line">	class Handler&#123;</span><br><span class="line">	private:</span><br><span class="line">		Handler* parent;</span><br><span class="line">	public:</span><br><span class="line">		Handler(Handler* p):parent(p)&#123;&#125;</span><br><span class="line">		virtual bool DoHandle(Request&amp;amp; r)=0;</span><br><span class="line">		void Process(Request&amp;amp; r);</span><br><span class="line">		virtual ~Handler()&#123;&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	void Handler::Process(Request&amp;amp; r)&#123;</span><br><span class="line">		if(!this-&amp;gt;DoHandle(r) &amp;amp;&amp;amp; NULL != parent)&#123;</span><br><span class="line">			parent-&amp;gt;Process(r);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	class Programmer: public Handler&#123;</span><br><span class="line">		public:</span><br><span class="line">		Programmer(Handler* p):Handler(p)&#123;&#125;</span><br><span class="line">		virtual bool DoHandle(Request&amp;amp; r);</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line">	bool Programmer::DoHandle(Request&amp;amp; r)&#123;</span><br><span class="line">		if(r.type == STYLE)&#123;</span><br><span class="line">			printf(&quot;programmer: I can process changing programming style\n&quot;);</span><br><span class="line">			return true;</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			printf(&quot;programmer: I can not process this request. I will report this to my lead!\n&quot;);</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	class Lead:public Handler&#123;</span><br><span class="line">		public:</span><br><span class="line">		Lead(Handler* p):Handler(p)&#123;&#125;</span><br><span class="line">		virtual bool DoHandle(Request&amp;amp; r);</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line">	bool Lead::DoHandle(Request&amp;amp; r)&#123;</span><br><span class="line">		if(r.type == REQIREMENT)&#123;</span><br><span class="line">			printf(&quot;lead: I will process changing reqirements\n&quot;);</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">	pattern::Lead lead((pattern::Handler*)NULL);</span><br><span class="line">	pattern::Programmer programmer(&amp;amp;lead);</span><br><span class="line">	pattern::Request r;</span><br><span class="line">	r.type = STYLE;</span><br><span class="line">	programmer.Process(r);</span><br><span class="line">	r.type = REQIREMENT;</span><br><span class="line">	programmer.Process(r);</span><br><span class="line">	return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/23/5618652/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/23/5618652/" class="post-title-link" itemprop="url">在Ubuntu下生成大文件,并测试文件读写效率</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-23 21:40:00" itemprop="dateCreated datePublished" datetime="2010-05-23T21:40:00+08:00">2010-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在ubuntu或者其他的linux下生成大文件,必须使用编译参数  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64.否<br />
则生成的文件一定是2G左右的,原因是fseek,这个函数中的offset参数是一个long型的或者是size_t型的,在fseeko中是off_t,但是这个<br />
off_t默认还是32位,只有加了  -D_FILE_OFFSET_BITS=64的宏定义才被作为64位对待.</p>
<p>写了下面一段代码来生成大文件,传说有一种方法:直接跳转nG位置之后,然后写入一个字符.这种方法可能更快,不过我为了保守的生成文件,还是使用下面的一个写法:</p>
<p>#include&lt;stdio.h&gt; #include&lt;stdlib.h&gt; #include&lt;unistd.h&gt; #include&lt;string.h&gt;<br />
void gen_file(const char <em>filename, int block_size, int count){ int is_exist =<br />
0; FILE</em> file = fopen(filename,“w+b”); char * buf = NULL; int i=0; long long<br />
size = block_size; if(file == NULL){ printf(“fatal error in gen_file:<br />
fopen/n”); exit(1); } buf = (char <em>)malloc(sizeof(char)<em>block_size);<br />
memset(buf,‘1’,sizeof(char)<em>block_size); while(i++&lt;count){ if(i % 10 == 0){<br />
printf(“count is %d, size is %lld/n”,i,size); } fwrite(buf,block_size,1,file);<br />
size += block_size; fseeko(file,size,SEEK_SET); } fclose(file); free(buf); /</em><br />
long long size = 1024</em>1024</em>1024; size <em>=10; fseeko(file,size,SEEK_SET);<br />
fwrite(buf,block_size,1,file); fclose(file); free(buf); <em>/ } int main(){<br />
printf(“size of char %d/n”,sizeof(char)); int block_size = 1024</em>1024</em>20; //<br />
20M int count = 50; gen_file(“smallfile”,block_size,count*2);// gen 2G file<br />
return 0; }</p>
<p>int block_size = 1024<em>1024</em>20; // 20M</p>
<p>这个是每次写入的数据大小,gen_file(“smallfile”,block_size,count*2);第三个参数可以调节生成文件的大小.</p>
<p>下面写了一个测试大文件和小文件的随机读写和顺序读写.</p>
<p>#include&lt;stdio.h&gt; #include&lt;time.h&gt; #include&lt;sys/stat.h&gt; #include&lt;sys/types.h&gt;<br />
#include&lt;unistd.h&gt; #include&lt;stdlib.h&gt; #include&lt;sys/time.h&gt; #include&lt;string.h&gt;<br />
const int block_size = 8092; struct timeval start; struct timeval end; struct<br />
timezone tz; void start_time(){ gettimeofday(&amp;start,&amp;tz); } void end_time(){<br />
gettimeofday(&amp;end,&amp;tz); } void print_time(){ printf(“%lf sec/n”,(end.tv_sec-<br />
start.tv_sec)+(double)(end.tv_usec-start.tv_usec)/1000000); } size_t<br />
look_size(const char * filename){ struct stat st; stat(filename,&amp;st); return<br />
st.st_size; } void read_blocks(FILE* file, off_t offset,int block_size){ int<br />
where = offset<em>block_size; fseeko(file,where,0); } FILE</em> fopen_safe(const char</p>
<ul>
<li>filename){ FILE* file = fopen(filename,“r”); if(file == NULL){ printf(“fatal<br />
error in random_read, open file”); exit(1); } return file; } void<br />
random_read(const char * filename){ int random; size_t size; FILE* file =<br />
fopen_safe(filename); size = look_size(filename)/block_size; random =<br />
rand()%size; read_blocks(file,random,block_size); fclose(file); } void<br />
order_read(const char <em>filename,int order){ size_t size; FILE</em> file =<br />
fopen_safe(filename); size = look_size(filename)/block_size;<br />
read_blocks(file,order%size,block_size); fclose(file); } void<br />
random_test(const char * filename,int times){ int count = 0; start_time();<br />
while(count++&lt;times){ // access Big File random_read(filename); } end_time();<br />
print_time(); } void order_test(const char * filename, int times){ int count =<br />
0; start_time(); while(count++&lt;times){ order_read(filename,count); }<br />
end_time(); print_time(); } void random_test_diff(const char * basename,int<br />
num,int times){ int count = 0; char ** names = malloc(sizeof(char)*num); int<br />
len = strlen(basename); int i = 0; while( i &lt; num){ names[i] =<br />
malloc(sizeof(char)*len+4); sprintf(names[i],“%s_%d”,basename,i); i++; }<br />
start_time(); while(count++&lt;times){ if(count &lt; 900){ random_read(names[0]); }<br />
else { if(count &lt; 960){ random_read(names[count%num]);<br />
random_read(names[(count+1)%num]); } if(count &lt; 1000){<br />
random_read(names[count%num]); random_read(names[(count+1)%num]);<br />
random_read(names[(count+2)%num]); } } } end_time(); print_time(); } int<br />
main(){ int i,count; int times = 1000; count = 0; // clock_t start,end;<br />
srand(time(NULL)); char * filename=“bigfile”; //printf(“time is %lf”,((double<br />
)(end-start))/CLOCKS_PER_SEC); random_test(filename,times);<br />
order_test(filename,times); times = times; filename = “smallfile”;<br />
random_test(filename,times); order_test(filename,times);<br />
random_test_diff(filename,3,times); return 0; }</li>
</ul>
<p>当然你这里做测试的时候可以把gettimeofday替换为clock()或者time()函数,其中clock()是程序实际运行的时间,你感觉可能执行了七八秒<br />
,其实程序只占用cpu执行了1秒.如果是time()函数或者gettimeofday()函数就是真正的运行时间也就是你感觉执行的时间.所以各有千秋,前者是为<br />
了排除各种运行环境中的软件或者os的不同,单独检测程序的效率.后者是在系统环境中程序的执行时间.</p>
<p>下面是我得到的结论,创建1个10G文件,创建3个2G小文件.<br />
大文件 随机访问7.199645 sec<br />
大文件 顺序访问0.013617 sec<br />
单个小文件 随机访问5.119245 sec<br />
小文件 顺序访问0.014190 sec<br />
多个小文件的随机访问测试:90%的几率访问同一个小文件，6%访问两个小文件，4%访问3个小文件 9.791248<br />
sec.并且90%几率发生在前,所以如果随机发生多个文件的随机访问,那么可能速度会更慢.这里慢的原因,是因为fopen.</p>
<p>这也就是数据库为什么只有一个数据文件的原因.有时进行文件切分,反而不利于效率的提高.但是对于100G以上的大文件,是否这个结论又要改变了呢?我没有做过这个实<br />
验.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/23/5617749/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/23/5617749/" class="post-title-link" itemprop="url">Csdn举办的云计算大会——总结思考篇</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-23 11:05:00" itemprop="dateCreated datePublished" datetime="2010-05-23T11:05:00+08:00">2010-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这次大会的演讲嘉宾的内容参差不齐，有好有坏。</p>
<p>有时个人觉得听上面的人吹来吹去，不如听听各个展台的工程师是怎么做的。</p>
<p>个人感觉csdn实在是没有钱。既然没有钱就不要打肿脸充胖子乱搞活动。中午就发个三明治。还不如不发餐卷，或者写自带午餐或者请到外面的成都小吃自己买饭吃。我实在<br />
不知道处于什么目的，发一个精美的袋子，里面就一点点吃的。本以为是午餐前的餐点，后来才真的相信这就是午餐。</p>
<p>传说第一届的午餐也是三明治，但是人家是不要钱的!另外第一、二天其实没有票也是可以去听的。当初实验室真不如把钱给我们算了。</p>
<p>去那里发现许多人和我有同样的问题，有一部分解答了，有一部分还在思考研究中：</p>
<p>１。服务器利用率的提高，是否是真正利用了？这部分利用率是用于虚拟化，还是用于真正的业务？VMware的工程师说，资源只用5%消耗在虚拟化上。这个5%并不随着<br />
虚拟机的增多而线性增加。当然，我还是不信…</p>
<p>２。当两台虚拟机在同一个机器中运行，是有公平的弹性机制(你不用时我用，我不用时你用，你我都用时对半分)，也就是balloom技术。至于这个技术是啥米，有待研<br />
究，但是从xcp中看到了Memory Balloom,不知道是否是同样的东东。</p>
<p>３。当应用需消耗大量资源的程序，如果在一台物理服务器上跑得很吃力，那么就别寻求云计算。</p>
<p>４。程序必须有并发性。如果云计算平台能屏蔽分布式物理机带来的进程通信的影响，那么多进程的编程是必要的。如果云计算可以只把线程迁移到其他物理机器上，那就更好了<br />
，不过我知道那是天方夜谭。</p>
<p>５。如果我的物理机器都只是两核的，那么我也就不会虚拟出四核的机器。</p>
<p>６。一台虚拟机器可以使用另外一台物理机器的存储资源(硬盘)？当时那个工程师说可以。那是因为那台物理机器开启了另外一个VM实例,还是没有开？</p>
<p>７。chinaCache说Xen比vmware好，因为xen是os层虚拟化，vmware说vmware最好，因为vmware稳定。其实vmware传说也有自<br />
己的os虚拟化技术。</p>
<p>８。mysql在chinaCache中效率比EC2高３倍。因为它是一个机器中的本地存储，而EC2可以看作使用了存储网络，所以EC2会有线路传输带宽的消耗。我<br />
个人认为chinaCache没有办法大量持续扩容的.否则性能会降低到EC2的水平。</p>
<p>９。如果因为一台物理机中太多虚拟机共同消耗资源，而导致某些井喷业务不能响应，那么会将这些业务迁移到其他机器中。但是它的监控器都无法响应了，它怎么知道哪个业务<br />
是井喷业务呢？</p>
<p>10。以后会议别请高层了，乱忽悠。另外我不太清楚服务器是什么概念？如果是高级稳定机器来说，我们实验室就两台服务器。如果随便的pc机就可以做服务器，那归我管的<br />
服务器就有4~5台。我觉得业界还没有统一服务器的概念。</p>
<p>11。大云其实就是做了基于MapReduce的数据挖掘算法…</p>
<p>12.中移动说现在已经可以支持5000台服务器，那是Yahoo的hadoop.其实我不太相信他有这么多机器。(他的服务器是啥概念？)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/10/2010-05-10-debug-postgresql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/10/2010-05-10-debug-postgresql/" class="post-title-link" itemprop="url">How to Debug PostgreSQL</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-10 00:00:00" itemprop="dateCreated datePublished" datetime="2010-05-10T00:00:00+08:00">2010-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:03" itemprop="dateModified" datetime="2023-10-06T22:54:03+08:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="postgresql debug" />
<meta name="_su_keywords" content="postgresql debug" />
<meta name="_su_title" content="postgresql debug" />
<meta name="views" content="1123" />
First, compile the source code use ./configure --prefix=XXXX --enable-debug &amp;&amp; CFLAGS=-O0
<p>then make and make install.</p>
<h2><span style="color: #800000;">IF you want to RESTART PG</span></h2>
Detected if there is an instance of Postgre server. If there is, kill it. use
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -e | grep postgre</span><br><span class="line">// find id of the process</span><br><span class="line">kill -9 $processid</span><br></pre></td></tr></table></figure>
<p>to detect the pocess of postgresql and kill it.</p>
<p>then use:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gdb postgresqlHomeDIR/bin/postgres -quiet</span><br><span class="line">// enter gdb then use</span><br><span class="line">set args -D DATADIR</span><br><span class="line">run</span><br></pre></td></tr></table></figure>
<p>here DATADIR and postgresqlDIR are your own directory.</p>
<h2><span style="color: #800000;">IF you don't want to RESTART PG</span></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// find postgres pid</span><br><span class="line">pid = `ps auxww | \</span><br><span class="line">    grep postgres: | \</span><br><span class="line">    grep -v -e &#x27;grep postgres:&#x27; -e &#x27;postgres: stats&#x27; -e &#x27;postgres: writer&#x27; -e &#x27;postgres: archiver&#x27; -e &#x27;postgres: logger&#x27; -e &#x27;postgres: autovacuum&#x27; | \</span><br><span class="line">    tee /dev/tty | \</span><br><span class="line">    awk &#x27;&#123;print $2&#125;&#x27;`</span><br><span class="line">gdb pid</span><br></pre></td></tr></table></figure>
<p>then use</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./psql test</span><br></pre></td></tr></table></figure>
<p>to test. Here test is  your database name.</p>
<p>IF you want to debug contrib</p>
<p>make &amp;&amp; make install in contrib/yourdir</p>
<p>then go to gdb to file your shard lib to load symbol. Here <span class="exturl" data-url="aHR0cDovL1hYWC5zbw==">XXX.so<i class="fa fa-external-link-alt"></i></span> is your contrib share lib.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) file XXX.so</span><br></pre></td></tr></table></figure>
<p>if not, when you use break somefunction, it will report:</p>
<p>No symbol table is loaded.  Use the “file” command.<br />
Make breakpoint pending on future shared library load? (y or [n])</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/05/2010-05-05-design-pattern-flyweight/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/05/2010-05-05-design-pattern-flyweight/" class="post-title-link" itemprop="url">Design Pattern -- Flyweight</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-05 00:00:00" itemprop="dateCreated datePublished" datetime="2010-05-05T00:00:00+08:00">2010-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:02:50" itemprop="dateModified" datetime="2023-10-05T23:02:50+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/architect/" itemprop="url" rel="index"><span itemprop="name">architect</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="software architecture
design pattern " />
<meta name="_su_keywords" content="design,pattern,flyweight,code" />
<meta name="_su_title" content="flyweight,pattern,code,design" />
<meta name="views" content="904" />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">// flyweight.cpp : Defines the entry point for the console application.</span><br><span class="line">// author: chillyc</span><br><span class="line">// email: chillycreator @t gmail.com</span><br><span class="line"></span><br><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line">#include&amp;lt;map&amp;gt;</span><br><span class="line">namespace pattern&#123;</span><br><span class="line"></span><br><span class="line">	/// this is flyweight pattern </span><br><span class="line">	/// In text processing, there will be thousands of hundreds of characters.</span><br><span class="line">	/// If we construct too many this class instance, and </span><br><span class="line">	/// imaging this class will have many member variables, will the system be efficient? </span><br><span class="line">	/// So we just record the characters state, and not care about other part of character.</span><br><span class="line">	/// we shall save a lot of main memories, shall we?</span><br><span class="line">	/// If there are many characters, but  they are only in differnt place, we can reuse characters.</span><br><span class="line">	/// So there are Fly_Manager to record the shared objects or states.</span><br><span class="line">	/// All objects should be derived from Metadata class.</span><br><span class="line">	/// Graphdata is no-shared metadata. And Character is shared metadata.</span><br><span class="line">	/// In main function, you will see the difference between two of them.</span><br><span class="line"></span><br><span class="line">#ifndef STATE_H</span><br><span class="line">#define STATE_H</span><br><span class="line">	class State&#123;</span><br><span class="line">	private:</span><br><span class="line">		int font_num;</span><br><span class="line">		int style;</span><br><span class="line"></span><br><span class="line">	public:</span><br><span class="line">		void Set_Font_Num(int num)&#123;font_num = num;&#125;</span><br><span class="line">		void Set_Style(int style)&#123;this-&amp;gt;style = style;&#125;</span><br><span class="line">		int Get_Font_Num()&#123;return font_num;&#125;</span><br><span class="line">		int Get_Style()&#123;return style;&#125;</span><br><span class="line">		State()&#123;&#125;</span><br><span class="line">		State(int num,int style)&#123;</span><br><span class="line">			font_num = num; </span><br><span class="line">			this-&amp;gt;style = style;</span><br><span class="line">		&#125;</span><br><span class="line">		State(const State&amp;amp; state)&#123;</span><br><span class="line">			this-&amp;gt;font_num = state.font_num; </span><br><span class="line">			this-&amp;gt;style = state.style;</span><br><span class="line">		&#125;</span><br><span class="line">		State* operator = (const State&amp;amp; state)&#123;</span><br><span class="line">			this-&amp;gt;font_num = state.font_num; </span><br><span class="line">			this-&amp;gt;style = state.style;</span><br><span class="line">			return this;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#ifndef METADATA_H</span><br><span class="line">#define METADATA_H</span><br><span class="line">	class Metadata&#123;</span><br><span class="line">	public:</span><br><span class="line">		virtual void show()=0;</span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#ifndef character_H</span><br><span class="line">#define character_H</span><br><span class="line">	// share the basic information</span><br><span class="line">	// here you should image character has a huge infomation, </span><br><span class="line">	// and state is only a small part of this class</span><br><span class="line">	class character: public Metadata&#123;</span><br><span class="line">	private:</span><br><span class="line">		State state;</span><br><span class="line">	public:</span><br><span class="line">		// set state to default state</span><br><span class="line">		character():Metadata(),state(1,1)&#123;&#125;</span><br><span class="line">		~character()&#123;&#125;</span><br><span class="line">		void Set_State(State&amp;amp; state);</span><br><span class="line">		virtual void show();</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line">	void character::Set_State(pattern::State&amp;amp; state)&#123;</span><br><span class="line">		this-&amp;gt;state = state;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	void character::show()&#123;</span><br><span class="line">		std::cout &amp;lt;&amp;lt; &quot;write a character font is &quot;&amp;lt;&amp;lt; state.Get_Font_Num()&amp;lt;&amp;lt; &quot; style is &quot;</span><br><span class="line">			&amp;lt;&amp;lt; state.Get_Style()&amp;lt;&amp;lt;std::endl; </span><br><span class="line">	&#125;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#ifndef GRAPHDATA_H</span><br><span class="line">#define GRAPHDATA_H</span><br><span class="line">	// not share </span><br><span class="line">	class Graphdata: public Metadata&#123;</span><br><span class="line">	private:</span><br><span class="line">		State state;</span><br><span class="line">	public:</span><br><span class="line">		Graphdata(State &amp;amp; state):Metadata(),state(state)&#123;&#125;</span><br><span class="line">		// font num is not used</span><br><span class="line">		Graphdata(int style):Metadata(),state(-1,style)&#123;&#125;</span><br><span class="line">		~Graphdata()&#123;&#125;;</span><br><span class="line">		virtual void show();</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">#endif</span><br><span class="line">	void Graphdata::show()&#123;</span><br><span class="line">		// only use its own state</span><br><span class="line">		std::cout&amp;lt;&amp;lt; &quot;print a graph! style is &quot;&amp;lt;&amp;lt;state.Get_Style()&amp;lt;&amp;lt;std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">#ifndef FLYMANAGER_H</span><br><span class="line">#define FLYMANAGER_H</span><br><span class="line">	class Fly_Manager&#123;</span><br><span class="line">	public:</span><br><span class="line">		// suggest you should make it as private or protected</span><br><span class="line">		std::map&amp;lt;int,State&amp;gt; characters;</span><br><span class="line">		Fly_Manager()&#123;&#125;</span><br><span class="line">		void Set_I(int i, State&amp;amp; state);</span><br><span class="line">		State&amp;amp; Get_I(int i);</span><br><span class="line">		~Fly_Manager()&#123;&#125;</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line">	void Fly_Manager::Set_I(int i, State&amp;amp; state)&#123;</span><br><span class="line">		characters[i] = state;</span><br><span class="line">	&#125;</span><br><span class="line">	State&amp;amp; Fly_Manager::Get_I(int i)&#123;</span><br><span class="line">		return characters[i];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	pattern::Fly_Manager fm;</span><br><span class="line">	pattern::character c;</span><br><span class="line">	pattern::State s1(1,2);</span><br><span class="line">	pattern::State s2(2,3);</span><br><span class="line">	pattern::State s3(3,4);</span><br><span class="line">	fm.Set_I(0,s1);</span><br><span class="line">	fm.Set_I(1,s2);</span><br><span class="line">	fm.Set_I(2,s3);</span><br><span class="line">	pattern::Graphdata gd1(2);</span><br><span class="line">	pattern::Graphdata gd2(9);</span><br><span class="line">	for(int i = 0; i &amp;lt; 3; i++)&#123;</span><br><span class="line">		c.Set_State(fm.Get_I(i));</span><br><span class="line">		c.show();</span><br><span class="line">	&#125;</span><br><span class="line">	gd1.show();</span><br><span class="line">	gd2.show();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/03/5552900/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/03/5552900/" class="post-title-link" itemprop="url">Unmountable Boot Volume 0x000000ED</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-03 18:16:00" itemprop="dateCreated datePublished" datetime="2010-05-03T18:16:00+08:00">2010-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 12:41:45" itemprop="dateModified" datetime="2023-10-05T12:41:45+08:00">2023-10-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>昨天机器终于蓝屏了。产生了一个unmountable_boot_volume错误，大概是我管电源时突然断电所致。这个错误会停在0x000000ED位置。据微<br />
软官方称是因为硬盘驱动器IDE写缓存时导致的内容不一致。最初断电后重启，画面一只能够停在windows图标上，并且硬盘没有动静。后来F8进入选择最近配置，结<br />
果就报出了这个0x000000ED蓝屏，然后再try了下安全模式，发现依旧是蓝屏。</p>
<p>微软提供的解决方案是把windows安装盘放进去，然后再进入recover console.进入后使用chkdsk<br />
/r即可恢复。结果我放入windows安装盘，进入recover console, 提示曰：安装程序没有找到安装在此计算机上的硬盘驱动器。我后来想重装，结果<br />
是一样的提示。（连windows都不能重装）。后来进入BIOS，使用硬盘检测，fail掉了。以为是硬件坏了…幸好安装了ubuntu,可以顺利进入ubu<br />
ntu,这说明硬件是没有问题的。继续搜索发现windows xp的OEM版本在同样的问题下也不能进入recover<br />
console.我发现自己每次都是走的最长路径。微软说OEM不能进入recover console,然后就没有任何解决方案了…唉~.</p>
<p>无奈之下找了张番茄家园，可以进入DOS NTFS,然后选择DOS+NTFS的选项，进入后使用NTFSCHK,它说正在运行所以不能运行…无语，然后去win<br />
dows/system32下找到chkdsk.exe 然后执行chkdsk /r,结果它说不能在DOS下运行…更加无语。无奈之后退出。</p>
<p>然后在番茄中选择xp引导修复，反正也是碰碰运气，再选择正常启动，结果终于看到了蓝色的自检画面。</p>
<p>之后检查了半个小时，终于进入了windows.</p>
<p>对于OEM的用户，修复过程可能如下：</p>
<p>使用番茄进入xp引导修复，选择正常启动或者前一次配置，然后done.</p>
<p>非OEM的用户：</p>
<p>使用windows安装盘，进入recover console,然后执行chkdsk c: /r /f 如果不行再使用fixboot</p>
<p>要是没有ubuntu,真的以为硬盘坏掉了。windows系统实在是太霸道了,害我差点想把整个硬盘重新格式化。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/03/2010-05-03-design-pattern-bridge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/03/2010-05-03-design-pattern-bridge/" class="post-title-link" itemprop="url">Design Pattern--Bridge</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-03 00:00:00" itemprop="dateCreated datePublished" datetime="2010-05-03T00:00:00+08:00">2010-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-05 23:02:33" itemprop="dateModified" datetime="2023-10-05T23:02:33+08:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/architect/" itemprop="url" rel="index"><span itemprop="name">architect</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="why use bridge pattern?If the original parent class is not suitable for being inherited by subclass, it will be refactor. And If there are some concepts are common, it will be abstracted as implement interface or abstract class." />
<meta name="_su_keywords" content="design,pattern,bridge" />
<meta name="_su_title" content="design pattern bridge pattern" />
<meta name="views" content="465" />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">// bridge.cpp : Defines the entry point for the console application.</span><br><span class="line">//</span><br><span class="line">/// author : chillyc</span><br><span class="line">/// email : chillycreator @t gmail.com</span><br><span class="line">/// uml:</span><br><span class="line">///                   _ </span><br><span class="line">///                  / \</span><br><span class="line">///                 /_ _\</span><br><span class="line"></span><br><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line"></span><br><span class="line">namespace pattern&#123;</span><br><span class="line"></span><br><span class="line">/// why use bridge pattern?</span><br><span class="line">/// If the original parent class is not suitable for being inherited by subclass, </span><br><span class="line">/// it will be refactor. And If there are some concepts are common, </span><br><span class="line">/// it will be abstracted as implement interface or abstract class.</span><br><span class="line">/// for example: in KFC, there will be some softdrink to be sold, </span><br><span class="line">/// like coca cola, coff, and so on. And if you wish, you will add some additions like sugar,</span><br><span class="line">/// or ice into softdrinks. If we design the classes as sugar-cocacola, sugar-coff, ice-cocacola,</span><br><span class="line">/// and ice-coff. There will be four subclasses here. And in the future, is there add another</span><br><span class="line">/// additions? If yes, the system will add another two classes! But if use bridge pattern,</span><br><span class="line">/// it will add only one class called &quot;another additions&quot; inherited from addition class. </span><br><span class="line">/// This is benefits of this pattern.</span><br><span class="line"></span><br><span class="line">#ifndef ADDITION_H</span><br><span class="line">#define ADDITION_H</span><br><span class="line">	/// this is the implement class in Bridge pattern.</span><br><span class="line">	/// if you want add another additions, </span><br><span class="line">	/// inherit this class and the point of your class into Softdrink class.</span><br><span class="line">	/// Do you have better implements for just adding class here and not modifying Softdrink class?</span><br><span class="line">	class Addition&#123;</span><br><span class="line">	public:</span><br><span class="line">		virtual void Add()=0;</span><br><span class="line">		virtual ~Addition()&#123;&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#ifndef SUGAR_H</span><br><span class="line">#define SUGAR_H</span><br><span class="line">	class Sugar:public Addition&#123;</span><br><span class="line">	public:</span><br><span class="line">		virtual void Add();</span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line">	void Sugar::Add()&#123;</span><br><span class="line">		std::cout&amp;lt;&amp;lt;&quot;add sugar&quot;&amp;lt;&amp;lt;std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">#ifndef ICE_H</span><br><span class="line">#define ICE_H</span><br><span class="line">	class Ice:public Addition&#123;</span><br><span class="line">	public:</span><br><span class="line">		virtual void Add();</span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line">	void Ice::Add()&#123;</span><br><span class="line">		std::cout&amp;lt;&amp;lt;&quot;add ice&quot;&amp;lt;&amp;lt;std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">#ifndef SOFTDRINK_H</span><br><span class="line">#define SOFTDRINK_H</span><br><span class="line">	/// this class is the abstract class in Bridge pattern.</span><br><span class="line">	/// I consider there will be some other implement methods.</span><br><span class="line">	/// I use Addition objects as member variables, </span><br><span class="line">	/// and construct and destroy them in Softdrink.</span><br><span class="line">	/// But if there is no member variables of Addition, It will be ok.</span><br><span class="line">	/// for example: you can send Addition instances as parameters into Softdrink subclass.</span><br><span class="line">	/// But in Bridge pattern, the uml is aggregation between implement class and abstract class.</span><br><span class="line">	class Softdrink&#123;</span><br><span class="line">	public:</span><br><span class="line">		Softdrink();</span><br><span class="line">		virtual void drink()=0;</span><br><span class="line">		virtual ~Softdrink()=0;</span><br><span class="line">	protected:</span><br><span class="line">		Addition *sugar;</span><br><span class="line">		Addition *ice;</span><br><span class="line">		/// another additions add here!</span><br><span class="line">	&#125;;</span><br><span class="line">	Softdrink::~Softdrink()&#123;</span><br><span class="line">		if(NULL != sugar)&#123;</span><br><span class="line">			delete sugar;</span><br><span class="line">		&#125;</span><br><span class="line">		if(NULL != ice)&#123;</span><br><span class="line">			delete ice;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	Softdrink::Softdrink()&#123;</span><br><span class="line">		sugar = new Sugar();</span><br><span class="line">		ice = new Ice();</span><br><span class="line">	&#125;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#ifndef COFF_H</span><br><span class="line">#define COFF_H</span><br><span class="line"></span><br><span class="line">	class Coff: public Softdrink&#123;</span><br><span class="line">	public:</span><br><span class="line"></span><br><span class="line">		virtual void drink();</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line">	void Coff::drink()&#123;</span><br><span class="line">		std::cout&amp;lt;&amp;lt;&quot;I am drinking coff!&quot;&amp;lt;&amp;lt;std::endl;</span><br><span class="line">		sugar-&amp;gt;Add();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">#ifndef COCA_H</span><br><span class="line">#define COCA_H</span><br><span class="line">	class Coca: public Softdrink&#123;</span><br><span class="line">	public:</span><br><span class="line">		virtual void drink();</span><br><span class="line">	&#125;;</span><br><span class="line">#endif</span><br><span class="line">	void Coca::drink()&#123;</span><br><span class="line">		std::cout&amp;lt;&amp;lt;&quot;I am drinking coca cola!&quot;&amp;lt;&amp;lt;std::endl;</span><br><span class="line">		ice-&amp;gt;Add();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	pattern::Coca coca;</span><br><span class="line">	coca.drink();</span><br><span class="line">	pattern::Coff coff;</span><br><span class="line">	coff.drink();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://chillyc.info/2010/05/03/2010-05-03-design-pattern-adapter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/icon.svg">
      <meta itemprop="name" content="帐前卒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帐前卒专栏">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 帐前卒专栏">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/05/03/2010-05-03-design-pattern-adapter/" class="post-title-link" itemprop="url">Design Pattern -- Adapter</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2010-05-03 00:00:00" itemprop="dateCreated datePublished" datetime="2010-05-03T00:00:00+08:00">2010-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-06 22:54:02" itemprop="dateModified" datetime="2023-10-06T22:54:02+08:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/architect/" itemprop="url" rel="index"><span itemprop="name">architect</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <meta name="_edit_last" content="1" />
<meta name="_su_description" content="adapter pattern is used for combining two or more classes,which have the same behaviors but different interfaces." />
<meta name="_su_keywords" content="design,pattern,virtual,class,constructor,destory,adapter" />
<meta name="_su_title" content="design pattern adapter pattern" />
<meta name="views" content="546" />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">// Adapter.cpp : Defines the entry point for the console application.</span><br><span class="line">// author: chillyc</span><br><span class="line">// email: chillycreator @t gmail.com</span><br><span class="line"></span><br><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line">#include&amp;lt;string&amp;gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">/// adapter pattern is used for combining two or more classes,</span><br><span class="line">/// which have the same behaviors but different interfaces.</span><br><span class="line">/// some classes is common used in future, and the other which are special will never used.</span><br><span class="line">/// common used classes should be public, and the other is private.</span><br><span class="line">/// some classes which inherit adapter class will never use the special ones. </span><br><span class="line">/// adapter pattern is divided into two patterns.</span><br><span class="line">/// one is belong to class structure, and the other is belong to object structure.</span><br><span class="line"></span><br><span class="line">#ifndef INTERFACEA_H</span><br><span class="line">#define INTERFACEA_H</span><br><span class="line">/// Interface A is a common interface!</span><br><span class="line">class Interface_A&#123;</span><br><span class="line">public :</span><br><span class="line">	virtual void connect_com();</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line">void Interface_A::connect_com()&#123;</span><br><span class="line">	cout&amp;lt;&amp;lt;&quot;connect a&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#ifndef INTERFACEB_H</span><br><span class="line">#define INTERFACEB_H</span><br><span class="line">/// Interface B is not a common interface, </span><br><span class="line">/// it will be used in some special area!</span><br><span class="line">class Interface_B&#123;</span><br><span class="line">public :</span><br><span class="line">	virtual void connect_B();</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line">void Interface_B::connect_B()&#123;</span><br><span class="line">	cout&amp;lt;&amp;lt; &quot;connect b&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#ifndef ADAPTERCLASS_H</span><br><span class="line">#define ADAPTERCLASS_H</span><br><span class="line">/// this class uses private inheritance to construct adapter.</span><br><span class="line">/// and it is a kind of class structure.</span><br><span class="line">class Adapter_Class: public Interface_A, private Interface_B&#123;</span><br><span class="line">public:</span><br><span class="line">	Adapter_Class();</span><br><span class="line">	~Adapter_Class();</span><br><span class="line">	virtual void connect();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/// this class uses private member variable to construct adapter.</span><br><span class="line">/// and it uses object relationship.</span><br><span class="line">class Adapter_Object: public Interface_A&#123;</span><br><span class="line">private:</span><br><span class="line">	Interface_B * b;</span><br><span class="line">public:</span><br><span class="line">	Adapter_Object();</span><br><span class="line">	~Adapter_Object();</span><br><span class="line"></span><br><span class="line">	virtual void connect();</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">Adapter_Class::Adapter_Class()&#123;</span><br><span class="line">	cout&amp;lt;&amp;lt; &quot;Adapter_Class construct&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">Adapter_Class::~Adapter_Class()&#123;&#125;</span><br><span class="line">void Adapter_Class::connect()&#123;</span><br><span class="line">	Interface_A::connect_com();</span><br><span class="line">	Interface_B::connect_B();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Adapter_Object::Adapter_Object()&#123;</span><br><span class="line">	cout&amp;lt;&amp;lt;&quot;Adapter_Object construct&quot;&amp;lt;&amp;lt;endl;</span><br><span class="line">	b = new Interface_B();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">Adapter_Object::~Adapter_Object()&#123;</span><br><span class="line">	delete b;</span><br><span class="line">&#125;</span><br><span class="line">void Adapter_Object::connect()&#123;</span><br><span class="line">	Interface_A::connect_com();</span><br><span class="line">	b-&amp;gt;connect_B();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Adapter_Class ac;</span><br><span class="line">	ac.connect();</span><br><span class="line">	Adapter_Object ao;</span><br><span class="line">	ao.connect();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/24/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/80/">80</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/26/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2017 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">帐前卒</span>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/next-boot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/bookmark.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/search/local-search.min.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin="anonymous">


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"chilly/blog_comments","issue_term":"url","theme":"github-dark"}</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.18.1/source/js/third-party/comments/utterances.min.js"></script>

</body>
</html>
